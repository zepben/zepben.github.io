<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-81287323-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="EWB Bundle" href="/evolve/docs/ewb-bundle/opensearch.xml"><title data-react-helmet="true">Data Ingestion | EWB Bundle</title><meta data-react-helmet="true" name="docsearch:version" content="r13.0,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Data Ingestion | EWB Bundle"><meta data-react-helmet="true" name="description" content="The Energy Workbench deals with a lot of time series data. Each day, the previous days data becomes available for"><meta data-react-helmet="true" property="og:description" content="The Energy Workbench deals with a lot of time series data. Each day, the previous days data becomes available for"><meta data-react-helmet="true" property="og:url" content="https://zepben.github.io/evolve/docs/ewb-bundle/evolve/docs/ewb-bundle/data-ingestion"><link data-react-helmet="true" rel="shortcut icon" href="/evolve/docs/ewb-bundle/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://3K6D3DR52K-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://zepben.github.io/evolve/docs/ewb-bundle/evolve/docs/ewb-bundle/data-ingestion"><link rel="stylesheet" href="/evolve/docs/ewb-bundle/styles.1edb5451.css">
<link rel="preload" href="/evolve/docs/ewb-bundle/styles.d4b8cf7b.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/runtime~main.3d59bc08.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/main.44d1a5f0.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/1.4cbb3af7.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/2.d48518c4.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/1be78505.a8173f3d.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/9e2094ca.f2163bcc.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/20.def85c51.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/19.c60a9734.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/3ec6479d.2e0ecfcc.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/17896441.f3a7e909.js" as="script">
<link rel="preload" href="/evolve/docs/ewb-bundle/79682f72.42041afa.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://www.zepben.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/evolve/docs/ewb-bundle/img/logo.svg" alt="Zepben"><strong class="navbar__title"></strong></a><a href="https://zepben.github.io/evolve/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Evolve</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/evolve/docs/ewb-bundle/">Docs</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/evolve/docs/ewb-bundle/">r13.0</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.zepben.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img class="navbar__logo" src="/evolve/docs/ewb-bundle/img/logo.svg" alt="Zepben"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://zepben.github.io/evolve/docs" target="_blank" rel="noopener noreferrer" class="menu__link">Evolve</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/evolve/docs/ewb-bundle/">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link">Versions</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/ewb-bundle/">Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/evolve/docs/ewb-bundle/data-ingestion">Data Ingestion</a></li><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/ewb-bundle/deployment">Deployment</a></li><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/ewb-bundle/glossary">Glossary</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><div><span class="badge badge--secondary">Version: r13.0</span></div><header><h1 class="docTitle_1Lrw">Data Ingestion</h1></header><div class="markdown"><p>The Energy Workbench deals with a lot of time series data. Each day, the previous days data becomes available for
consumption and the EWB ingests this to have the latest data ready to be accessed from the EWB APIs.</p><p>The daily data that gets crunched includes the following:</p><ul><li>A network model from PowerOn Fusion.</li><li>Energy consumption data from smart meters.</li><li>Mappings of current meter, supply point, NMI, transformers and weather stations.</li><li>Weather data such as temperature, rainfall, wind speeds etc.</li></ul><p>This data is processed by various tools released as part of the Energy Workbench:</p><table><thead><tr><th>Tool</th><th>Description</th></tr></thead><tbody><tr><td><code>PoF Network Extractor</code></td><td>Extracts a network model from PowerOn Fusion and processes LV meter mappings.</td></tr><tr><td><code>Load Processor</code></td><td>Processes meter energy usage data CSV files and stores it in the EWB time series database.</td></tr><tr><td><code>Load Aggregator</code></td><td>Aggregates meter energy usage data to their corresponding distribution transformer.</td></tr><tr><td><code>Weather Processor</code></td><td>Processes weather data CSV files and stores it in the database.</td></tr></tbody></table><p>For more information on each on these tools, see their corresponding documentation.</p><hr><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ewb_dailysh"></a>ewb_daily.sh<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ewb_dailysh" title="Direct link to heading">#</a></h3><p>A script has been provided to invoke all the above tools in the appropriate order to perform the daily data crunching.</p><p>It can be found at <code>EWB_RELEASE_DIR/bin/ewb_daily.sh</code>.</p><p>The script relies on the <code>ewb.conf</code> script found in <code>EWB_RELEASE_DIR/conf/ewb.conf</code>. If you have moved this conf file
the conf include path in the script needs to updated to its location. See the deployment doco for more information
about <code>ewb.conf</code>.</p><p>It is recommended to set this script to run via a cron job after all appropriate data files have been copied to the input
directories defined in each tools conf file. See the corresponding tool documentation for information on their config
and the types of files they ingest.</p><p>The script performs the following tasks:</p><ul><li>Stops the EWB server.</li><li>Run the PoF Network Extractor.</li><li>Run the Load Processor.</li><li>Run the Load Aggregator.</li><li>Run the Weather Processor.</li><li>Run the Weather Station Mapper.</li><li>Start the EWB Server.</li></ul><p>!!! note
The PoF Network Extractor will use the ENMAC_USER and ENMAC_PASSWORD environment variables.
Ensure the daily script is run in a way that these environment variables are available.</p><p>If any of the data processing tools fail, the script will still restart the EWB server and then exit with a non 0 code.
Any errors that occur during the processing will need to be fixed and then the failed processes will need to be manually
invoked to process the data.
Check the syslog if it has been enabled via <code>ewb.conf</code> for errors and also in the logs for each tool in the logs/
directory under the EWB release directory (or at the otherwise configured location).</p><hr></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/evolve/docs/ewb-bundle/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/evolve/docs/ewb-bundle/deployment"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deployment Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ewb_dailysh" class="table-of-contents__link">ewb_daily.sh</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright Â© 2021 Zeppelin Bend Pty. Ltd.</div></div></div></footer></div>
<script src="/evolve/docs/ewb-bundle/styles.d4b8cf7b.js"></script>
<script src="/evolve/docs/ewb-bundle/runtime~main.3d59bc08.js"></script>
<script src="/evolve/docs/ewb-bundle/main.44d1a5f0.js"></script>
<script src="/evolve/docs/ewb-bundle/1.4cbb3af7.js"></script>
<script src="/evolve/docs/ewb-bundle/2.d48518c4.js"></script>
<script src="/evolve/docs/ewb-bundle/1be78505.a8173f3d.js"></script>
<script src="/evolve/docs/ewb-bundle/9e2094ca.f2163bcc.js"></script>
<script src="/evolve/docs/ewb-bundle/20.def85c51.js"></script>
<script src="/evolve/docs/ewb-bundle/19.c60a9734.js"></script>
<script src="/evolve/docs/ewb-bundle/3ec6479d.2e0ecfcc.js"></script>
<script src="/evolve/docs/ewb-bundle/17896441.f3a7e909.js"></script>
<script src="/evolve/docs/ewb-bundle/79682f72.42041afa.js"></script>
</body>
</html>