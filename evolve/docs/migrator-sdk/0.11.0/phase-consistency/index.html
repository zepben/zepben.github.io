<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/evolve/docs/migrator-sdk-jvm/blog/rss.xml" title="Migrator SDK (JVM) Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/evolve/docs/migrator-sdk-jvm/blog/atom.xml" title="Migrator SDK (JVM) Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-81287323-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Migrator SDK (JVM)" href="/evolve/docs/migrator-sdk-jvm/opensearch.xml"><title data-react-helmet="true">Phase Consistency Processor | Migrator SDK (JVM)</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="0.11.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-0.11.0"><meta data-react-helmet="true" name="docsearch:project" content="migrator-sdk-jvm"><meta data-react-helmet="true" property="og:title" content="Phase Consistency Processor | Migrator SDK (JVM)"><meta data-react-helmet="true" name="description" content="The phase consistency module is used to repair phase inconsistencies in a NetworkService."><meta data-react-helmet="true" property="og:description" content="The phase consistency module is used to repair phase inconsistencies in a NetworkService."><meta data-react-helmet="true" property="og:url" content="https://zepben.github.io/evolve/docs/migrator-sdk-jvm//evolve/docs/migrator-sdk-jvm/0.11.0/phase-consistency"><link data-react-helmet="true" rel="shortcut icon" href="/evolve/docs/migrator-sdk-jvm/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://3K6D3DR52K-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://zepben.github.io/evolve/docs/migrator-sdk-jvm//evolve/docs/migrator-sdk-jvm/0.11.0/phase-consistency"><link rel="stylesheet" href="/evolve/docs/migrator-sdk-jvm/styles.c4df73fd.css">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/styles.3b899dd3.js" as="script">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/runtime~main.426930d7.js" as="script">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/main.e5bb66c3.js" as="script">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/1.85a64607.js" as="script">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/2.68f9391e.js" as="script">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/1f391b9e.167f0092.js" as="script">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/30.57ed8687.js" as="script">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/77816f9e.cf5412b4.js" as="script">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/17896441.f3897e57.js" as="script">
<link rel="preload" href="/evolve/docs/migrator-sdk-jvm/4f9d76cb.878fafb6.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://www.zepben.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/evolve/docs/migrator-sdk-jvm/img/logo.svg" alt="Zepben" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/evolve/docs/migrator-sdk-jvm/img/logo-dark.svg" alt="Zepben" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a><a href="https://zepben.github.io/evolve/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Evolve</a><a class="navbar__item navbar__link" href="/evolve/docs/migrator-sdk-jvm/">Docs</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/evolve/docs/migrator-sdk-jvm/release-notes">Release Notes</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/evolve/docs/migrator-sdk-jvm/0.11.0/">0.11.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/evolve/docs/migrator-sdk-jvm/next/phase-consistency">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/evolve/docs/migrator-sdk-jvm/0.11.0/phase-consistency">0.11.0</a></li><li><a class="dropdown__link" href="/evolve/docs/migrator-sdk-jvm/0.10.0/phase-consistency">0.10.0</a></li><li><a class="dropdown__link" href="/evolve/docs/migrator-sdk-jvm/0.9.0/phase-consistency">0.9.0</a></li><li><a class="dropdown__link" href="/evolve/docs/migrator-sdk-jvm/0.8.0/phase-consistency">0.8.0</a></li></ul></div><a href="https://github.com/zepben/migrator-sdk/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.zepben.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/evolve/docs/migrator-sdk-jvm/img/logo.svg" alt="Zepben" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/evolve/docs/migrator-sdk-jvm/img/logo-dark.svg" alt="Zepben" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://zepben.github.io/evolve/docs" target="_blank" rel="noopener noreferrer" class="menu__link">Evolve</a></li><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/migrator-sdk-jvm/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/migrator-sdk-jvm/release-notes">Release Notes</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/migrator-sdk-jvm/next/phase-consistency">Next</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/evolve/docs/migrator-sdk-jvm/0.11.0/phase-consistency">0.11.0</a></li><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/migrator-sdk-jvm/0.10.0/phase-consistency">0.10.0</a></li><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/migrator-sdk-jvm/0.9.0/phase-consistency">0.9.0</a></li><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/migrator-sdk-jvm/0.8.0/phase-consistency">0.8.0</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/zepben/migrator-sdk/" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/evolve/docs/migrator-sdk-jvm/0.11.0/">Migrator SDK Overview</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/evolve/docs/migrator-sdk-jvm/0.11.0/phase-consistency">Phase Consistency Processor</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: 0.11.0</span></div><header><h1 class="docTitle_Oumm">Phase Consistency Processor</h1></header><div class="markdown"><p>The phase consistency module is used to repair phase inconsistencies in a <code>NetworkService</code>.</p><h2 id="quick-start">Quick Start</h2><p>The simplest, and most common use of this module is via the <code>PhaseConsistencyProcessor</code> class and the <code>makeConsistent</code> function, which takes the following
parameters:</p><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>networkService</td><td>The network service to process.</td></tr><tr><td>getTransformerPhaseType</td><td>Callback to get the <code>TransformerPhaseType</code> for a transformer ID from the source data.</td></tr><tr><td>getFileId</td><td>Callback to get the source file associated with an ID.</td></tr></tbody></table><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1shy">Kotlin</li></ul><div class="margin-vert--md"><div role="tabpanel" hidden=""><pre><code class="language-kotlin">val logger = LoggerFactory.getLogger(javaClass);
val issues = PhaseIssues(logger)
val lvThreshold = 1000

val phaseConsistencyProcessor = PhaseConsistencyProcessor(issues, lvThreshold)

phaseConsistencyProcessor.makeConsistent(
    networkService,
    getTransformerPhaseType = { sourceId -&gt;
        mapToTransformerPhaseType(sourceData[sourceId]?.attributes?.getString(&quot;Phases&quot;))
    },
    getFileId = { sourceId -&gt;
        sourceData[sourceId]?.fileId
    }
)

</code></pre></div></div></div><p>The <code>makeConsistent</code> function will update the phases for the specified <code>networkService</code> to ensure they are consistent, keeping as much of the source phase
information as possible. To do this, the following processes will be run:</p><ol><li>Set transformer phases from known transformer phase types using a <code>TransformerPhaseProcessor</code>.</li><li>Repair the phases of any split 3-phase.</li><li>Extend phases onto missing downstream using a <code>PhaseExtender</code>.</li><li>Infer transformer phases from unknown transformer phase type using a <code>TransformerPhaseProcessor</code>.</li><li>Extend phases onto missing downstream again to allow for transformer phases from step 4 using a <code>PhaseExtender</code>.</li><li>Extend phases onto missing upstream using a <code>PhaseExtender</code>.</li><li>Replace invalid phases downstream using an <code>IncompatiblePhaseFixer</code>.</li><li>Replace invalid phases upstream from transformers using an <code>IncompatiblePhaseFixer</code>.</li><li>Replace invalid phases in loops using a <code>DroppedPhaseLoopFixer</code>.</li><li>Update XY phase codes to known phases using an <code>XyPhaseProcessor</code>.</li><li>Replace invalid phases upstream from transformers using an <code>IncompatiblePhaseFixer</code> again after the XY processing in step 10.</li><li>Make all remaining network with missing phases 3-phase.</li></ol><p>In each instance where phases are spread, priority will be given to the phases emanating from transformers, then 3-phase over 2-phase over single-phase.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Known Edge Case</h5></div><div class="admonition-content"><p>There is a known edge case that is not supported by the above processing. If you have a section of 3-phase backbone with an incorrect SWER segment above a split
3-phase regulator (each phase going through a separate transformer), the results of the consistency processing will be inaccurate/broken. In this case you will
need to either fix the SWER segment in the source system and generate a new extract, or update it manually in the extracted source data.</p></div></div><h2 id="repair-the-phases-of-any-split-3-phase">Repair the phases of any split 3-phase</h2><p>When a section of 3-phase backbone is split into three separate cables for an underground span in a source system that does not provide the actual phases of the
cables (just the number of cores), you end up with all the cables being marked as phase <code>X</code>. If you do not repair this, you will end up with each of the cables
being given the same phase, which can break the feeder downstream in strange ways (far from the site of the error) due to conflicting information from the
transformers.</p><p>In order to fix this, we detect termination points where a 3-phase cable is split into three individual phase cables that later join back together, and replace
these <code>X</code> phase cables with one each of <code>A</code>, <code>B</code> and <code>C</code>. Since some source systems do not need to be electrically correct (e.g. some GIS systems) we also
detect where a single span of single core cable is attached between the 3-phase and the split, which has been observed to make diagrams &quot;prettier&quot;.</p><h2 id="sub-processors">Sub-processors</h2><p>The following sub-processors are used to make a <code>NetworkService</code> consistent. Each of these can be used separately to perform their actions if desired.</p><h3 id="droppedphaseloopfixer">DroppedPhaseLoopFixer</h3><p>A class that can be used to fix the phasing of loops that contain segments surrounded by segments with fewer phases, resulting in dropped phases.</p><h4 id="fix"><code>fix</code></h4><p>Fix 3-phase loop segments that are surrounded by single-phase segments. If there is a 3-phase transformer in the loop, or there
is another 3-phase segment in the loop (including the incoming connection to the loop), create a 3-phase path between them, otherwise, remove the island
3-phase segment and any downstream 3-phase.</p><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>networkService</td><td>The network service to process.</td></tr></tbody></table><h3 id="incompatiblephasefixer">IncompatiblePhaseFixer</h3><p>A class for fixing incompatible phase combinations.</p><h4 id="fixdownstream"><code>fixDownstream</code></h4><p>Fix any phase incompatibilities in a downstream direction. This will replace the incompatible downstream phases with the valid upstream phases.
Incompatible phases are any phases that are not a subset of the upstream phases, or an unknown representation of those phases. To do this,
phases will be spread in the following order:</p><ol><li>From any transformer not in a loop.</li><li>From the low voltage side of any transformer in a loop.</li><li>From any non-transformer not in a loop.</li><li>From any non-transformer in a loop.</li></ol><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>networkService</td><td>The network service to process.</td></tr></tbody></table><h4 id="fixtransformerupstreams"><code>fixTransformerUpstreams</code></h4><p>Fix any paths to transformers that have phase incompatibilities in an upstream direction. This will replace the incompatible upstream phases with the
valid transformer phases. Incompatible phases are any phases that are not a superset of the transformer phases, or an unknown representation of those
phases.</p><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>networkService</td><td>The network service to process.</td></tr></tbody></table><h3 id="phaseextender">PhaseExtender</h3><p>A class for extending known phases onto terminals with missing phases. This is done in a downstream direction first, giving priority to known transformer
phases, then 3-phase over single-phase.</p><h4 id="extenddownstream"><code>extendDownstream</code></h4><p>Extend phases downstream onto terminals with missing phases for the specified <code>networkService</code>. Priority will be given to transformer phases, then following
the order defined by <code>PhasePrecedence.PRECEDENCE</code>.</p><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>networkService</td><td>The network service to process.</td></tr></tbody></table><h4 id="extendupstream"><code>extendUpstream</code></h4><p>Extend known phases upstream onto terminals with unknown phases for the specified <code>networkService</code>. Priority will be given to transformer phases, then
following the order defined by <code>PhasePrecedence.PRECEDENCE</code>.</p><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>networkService</td><td>The network service to process.</td></tr></tbody></table><h3 id="phaseissues">PhaseIssues</h3><p>A collection of issue trackers for tracking problems corrected by the phase consistency processing.</p><table><thead><tr><th>Tracker</th><th>Purpose</th></tr></thead><tbody><tr><td>inconsistentPhases</td><td>Tracks items where the phases in the EWB database do not match the phases in the source data.</td></tr><tr><td>txMultipleUpstreamFeeds</td><td>Tracks transformers where phase consistency could not be processed due to having multiple paths to a feeder head, so direction could not be determines.</td></tr><tr><td>txWithConflictingSwer</td><td>Tracks transformers with conflicts between SWER phases and voltages.</td></tr><tr><td>txWithMissingSourcePhases</td><td>Tracks transformers where there was no phase information available in the source data, and the phases had to be inferred.</td></tr></tbody></table><h3 id="phaseprecedence">PhasePrecedence</h3><p>Defines the order of precedence that phases will be processed, and which phases belong to each category.</p><h3 id="transformerphaseprocessor">TransformerPhaseProcessor</h3><p>A class for processing <code>PowerTransformer</code> phases.</p><h4 id="process"><code>process</code></h4><p>Validate that <code>PowerTransformer</code> phases make sense, and update them if they don&#x27;t. Transformers with unknown source phases (or SWER without SWER voltage)
will be stored for later processing via <code>inferUnknown</code>.</p><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>networkService</td><td>The network service to process.</td></tr><tr><td>getTransformerType</td><td>A callback to get the <code>TransformerPhaseType</code> for the specified ID. Returning <code>null</code> will be treated the same as <code>TransformerPhaseType.UNKNOWN</code>.</td></tr></tbody></table><h4 id="inferunknown"><code>inferUnknown</code></h4><p>Validate that the phases of <code>powerTransformer</code> with unknown type make sense, and update them if they don&#x27;t.</p><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>powerTransformer</td><td>The <code>PowerTransformer</code> to process.</td></tr><tr><td>up</td><td>The upstream terminal of <code>powerTransformer</code>.</td></tr><tr><td>down</td><td>The downstream terminals of <code>powerTransformer</code>.</td></tr><tr><td>onTypeDetermined</td><td>Consumer that is used to perform processing (e.g. logging) when the type of the <code>powerTransformer</code> is determined.</td></tr></tbody></table><p>Returns a list of terminals that have been updated.</p><h4 id="processswer"><code>processSwer</code></h4><p>Validate that the phases of SWER <code>powerTransformer</code> make sense, and update them if they don&#x27;t.</p><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>powerTransformer</td><td>The <code>PowerTransformer</code> to process.</td></tr><tr><td>up</td><td>The upstream terminal of <code>powerTransformer</code>.</td></tr><tr><td>down</td><td>The downstream terminals of <code>powerTransformer</code>.</td></tr></tbody></table><p>Return a list of terminals that have been updated.</p><h3 id="transformerphasetype">TransformerPhaseType</h3><p>An enumeration of the phase type for a <code>PowerTransformer</code>.</p><h3 id="xyphaseprocessor">XyPhaseProcessor</h3><p>A class that can be used to replace XY phases with primary phases. Takes an optional phase allocation algorithm used to determine which candidate phase to use
when an exact match could not be found. Takes two parameters, the terminal being processed and the candidate phases.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Ignoring Candidates</h5></div><div class="admonition-content"><p>There is no validation of the returned phase code. If you return a phase that is not in the candidates, you will introduce a phase inconsistency.</p></div></div><p>The default phase allocation algorithm chooses a random candidate based on the hash of the terminals conducting equipments mRID. This does a reasonable job of
spreading the phases while also being repeatable, giving stability to re-runs of an extract.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Precondition</h5></div><div class="admonition-content"><p>All terminals in the network service that are connected to XY spans must have phases assigned prior to calling this function for it to work correctly.
The <code>PhaseExtender</code> class can be used to ensure this precondition is met.</p></div></div><h4 id="assignprimaryphases"><code>assignPrimaryPhases</code></h4><p>Assign primary phases to all XY terminals. This is done with the following priority:</p><ol><li><p>Continue any matching known phasing:</p><p>This will continue AB, BC or AC over XY, or A, B or C over X, maintaining neutrals.</p></li><li><p>Back-fill from any subsets of known phases.</p><p>This will back-fill AB or AC over XY is there is a downstream A, BC or AB from B and AC or BC from C, maintaining neutrals. Which phase is used
is determined by the phase allocation algorithm.</p></li><li><p>Allocate a valid subset phase using the phase allocation algorithm.</p><p>This will allocate one of the following:</p><ul><li>AB, BC or AC for an XY below ABC</li><li>A, B or C for an X below ABC</li><li>A or B for an X below AB</li><li>B or C for an X below BC</li><li>C or A for an X below AC</li></ul></li></ol><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Transformer Phases</h5></div><div class="admonition-content"><p>While applying these rules, any transformers will be processed with the following translations where necessary:</p><ul><li>HV to LV:<ul><li>ABC &lt;-&gt; ABCN</li><li>AB &lt;-&gt; AN</li><li>BC &lt;-&gt; BN</li><li>AC &lt;-&gt; CN</li></ul></li><li>HV to SWER:<ul><li>AB &lt;-&gt; A</li><li>BC &lt;-&gt; B</li><li>AC &lt;-&gt; C</li></ul></li><li>SWER to LV<ul><li>A &lt;-&gt; AN</li><li>B &lt;-&gt; BN</li><li>C &lt;-&gt; CN</li></ul></li></ul></div></div><table><thead><tr><th>Parameter</th><th>Purpose</th></tr></thead><tbody><tr><td>networkService</td><td>The network service to process.</td></tr></tbody></table></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/evolve/docs/migrator-sdk-jvm/0.11.0/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Migrator SDK Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#quick-start" class="table-of-contents__link">Quick Start</a></li><li><a href="#repair-the-phases-of-any-split-3-phase" class="table-of-contents__link">Repair the phases of any split 3-phase</a></li><li><a href="#sub-processors" class="table-of-contents__link">Sub-processors</a><ul><li><a href="#droppedphaseloopfixer" class="table-of-contents__link">DroppedPhaseLoopFixer</a></li><li><a href="#incompatiblephasefixer" class="table-of-contents__link">IncompatiblePhaseFixer</a></li><li><a href="#phaseextender" class="table-of-contents__link">PhaseExtender</a></li><li><a href="#phaseissues" class="table-of-contents__link">PhaseIssues</a></li><li><a href="#phaseprecedence" class="table-of-contents__link">PhasePrecedence</a></li><li><a href="#transformerphaseprocessor" class="table-of-contents__link">TransformerPhaseProcessor</a></li><li><a href="#transformerphasetype" class="table-of-contents__link">TransformerPhaseType</a></li><li><a href="#xyphaseprocessor" class="table-of-contents__link">XyPhaseProcessor</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Zeppelin Bend Pty. Ltd.</div></div></div></footer></div>
<script src="/evolve/docs/migrator-sdk-jvm/styles.3b899dd3.js"></script>
<script src="/evolve/docs/migrator-sdk-jvm/runtime~main.426930d7.js"></script>
<script src="/evolve/docs/migrator-sdk-jvm/main.e5bb66c3.js"></script>
<script src="/evolve/docs/migrator-sdk-jvm/1.85a64607.js"></script>
<script src="/evolve/docs/migrator-sdk-jvm/2.68f9391e.js"></script>
<script src="/evolve/docs/migrator-sdk-jvm/1f391b9e.167f0092.js"></script>
<script src="/evolve/docs/migrator-sdk-jvm/30.57ed8687.js"></script>
<script src="/evolve/docs/migrator-sdk-jvm/77816f9e.cf5412b4.js"></script>
<script src="/evolve/docs/migrator-sdk-jvm/17896441.f3897e57.js"></script>
<script src="/evolve/docs/migrator-sdk-jvm/4f9d76cb.878fafb6.js"></script>
</body>
</html>