"use strict";(self.webpackChunkewb_sdk_examples_python=self.webpackChunkewb_sdk_examples_python||[]).push([["7042"],{9944:function(e,n,t){t.r(n),t.d(n,{frontMatter:()=>s,toc:()=>h,default:()=>d,metadata:()=>r,assets:()=>a,contentTitle:()=>c});var r=JSON.parse('{"id":"examples-fetching-network-hierarchy","title":"Fetching Network Hierarchy","description":"This tutorial demonstrates how to use the NetworkConsumerClient to connect to a gRPC service and fetch information about a network hierarchy from the EWB server.","source":"@site/versioned_docs/version-0.5.0/fetching_network_hierarchy.mdx","sourceDirName":".","slug":"/examples-fetching-network-hierarchy","permalink":"/evolve/docs/ewb-sdk-examples-python/0.5.0/examples-fetching-network-hierarchy","draft":false,"unlisted":false,"tags":[],"version":"0.5.0","frontMatter":{"id":"examples-fetching-network-hierarchy","title":"Fetching Network Hierarchy"},"sidebar":"someSidebar","previous":{"title":"Building a Network Hierarchy","permalink":"/evolve/docs/ewb-sdk-examples-python/0.5.0/examples-build-network-hierarchy"},"next":{"title":"Fetching Network Model","permalink":"/evolve/docs/ewb-sdk-examples-python/0.5.0/examples-fetching-network-model"}}'),o=t(4848),i=t(4429);t(3021),t(2207);let s={id:"examples-fetching-network-hierarchy",title:"Fetching Network Hierarchy"},c,a={},h=[{value:"Getting Started",id:"getting-started",level:2},{value:"Establish Connection",id:"establish-connection",level:2},{value:"Create a Consumer Client",id:"create-a-consumer-client",level:2},{value:"Fetch and Display Network Hierarchy",id:"fetch-and-display-network-hierarchy",level:2}];function l(e){let n={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["This tutorial demonstrates how to use the ",(0,o.jsx)(n.code,{children:"NetworkConsumerClient"})," to connect to a gRPC service and fetch information about a network hierarchy from the EWB server.\nThe code is organized to demonstrate how to establish a connection, retrieve the network hierarchy, and print the information in a structured manner."]}),"\n",(0,o.jsx)(n.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,o.jsx)(n.p,{children:"Ensure that you have imported necessary modules from the Zepben library."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"from zepben.evolve import NetworkConsumerClient, connect_with_token\nimport json\n"})}),"\n",(0,o.jsx)(n.h2,{id:"establish-connection",children:"Establish Connection"}),"\n",(0,o.jsxs)(n.p,{children:["Before connecting, ensure that you have a ",(0,o.jsx)(n.code,{children:"config.json"})," file that includes the connection parameters, such as ",(0,o.jsx)(n.code,{children:"host"}),", ",(0,o.jsx)(n.code,{children:"access_token"}),", and ",(0,o.jsx)(n.code,{children:"rpc_port"}),".\nHere is an example of the ",(0,o.jsx)(n.code,{children:"config.json"})," file format."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "host": "your-ewb-hostname",\n    "access_token": "your-access-token",\n    "rpc_port": 1234\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Now, establish the connection by using the ",(0,o.jsx)(n.code,{children:"connect_with_token"})," function, which securely connects to the EWB server using an access token."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'with open("config.json") as f:\n    c = json.loads(f.read())\n\nchannel = connect_with_token(host=c["host"], access_token=c["access_token"], rpc_port=c["rpc_port"])\n\n'})}),"\n",(0,o.jsx)(n.h2,{id:"create-a-consumer-client",children:"Create a Consumer Client"}),"\n",(0,o.jsxs)(n.p,{children:["After establishing the connection, create a ",(0,o.jsx)(n.code,{children:"NetworkConsumerClient"})," using the provided channel."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"client = NetworkConsumerClient(channel=channel)\n"})}),"\n",(0,o.jsx)(n.h2,{id:"fetch-and-display-network-hierarchy",children:"Fetch and Display Network Hierarchy"}),"\n",(0,o.jsxs)(n.p,{children:["You can fetch the network hierarchy by calling the ",(0,o.jsx)(n.code,{children:"get_network_hierarchy"})," method on the ",(0,o.jsx)(n.code,{children:"NetworkConsumerClient"})," instance.\nOnce you have fetched the network hierarchy, you can iterate through the hierarchical structure and print information about each level (that is the geographical regions, sub-geographical regions, substations, and feeders).\nIn this example, indentation is used to help represent the hierarchical relationships clearly."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'network_hierarchy = await client.get_network_hierarchy()\nprint("Network hierarchy:")\nfor gr in network_hierarchy.result.geographical_regions.values():\nprint(f"- {gr.name}")\nfor sgr in gr.sub_geographical_regions:\n    print(f"  - {sgr.name}")\n    for sub in sgr.substations:\n        print(f"    - {sub.name}")\n        for fdr in sub.feeders:\n            print(f"      - {fdr.name}")\n'})}),"\n",(0,o.jsx)(n.p,{children:"Sample Output:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:t(2953).A+"",width:"1281",height:"687"})})]})}function d(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},2953:function(e,n,t){t.d(n,{A:()=>r});let r=t.p+"assets/images/fetch_network_hierarchy_ex1-8b345218388b84e482f8961f99110449.png"},2207:function(e,n,t){t(4848),t(6540)},3021:function(e,n,t){t(4848),t(6540),t(8864)},4429:function(e,n,t){t.d(n,{R:()=>s,x:()=>c});var r=t(6540);let o={},i=r.createContext(o);function s(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);