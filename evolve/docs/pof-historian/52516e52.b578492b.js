(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{64:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return r})),a.d(t,"metadata",(function(){return o})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return s}));var n=a(2),i=a(6),l=(a(0),a(79)),r={id:"overview",title:"Overview",slug:"/"},o={unversionedId:"overview",id:"version-1.3.3/overview",isDocsHomePage:!1,title:"Overview",description:"The PofHistorianService runs as a Windows service that communicates with the client to get the SCADA history data from the history data file. The server is built using .NET and can run only on Windows.",source:"@site/versioned_docs\\version-1.3.3\\overview.md",slug:"/",permalink:"/evolve/docs/pof-historian/",version:"1.3.3",sidebar:"version-1.3.3/sidebar"},c=[{value:"Technologies Used",id:"technologies-used",children:[]},{value:"Dependencies",id:"dependencies",children:[]},{value:"Installation Instructions",id:"installation-instructions",children:[]},{value:"Uninstallation Instructions",id:"uninstallation-instructions",children:[]},{value:"Run in Console",id:"run-in-console",children:[]},{value:"Configuration",id:"configuration",children:[]},{value:"SQLITE Database Configuration",id:"sqlite-database-configuration",children:[]}],b={rightToc:c};function s(e){var t=e.components,r=Object(i.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},b,r,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"The PofHistorianService runs as a Windows service that communicates with the client to get the SCADA history data from the history data file. The server is built using .NET and can run only on Windows.\nWhen reading from the history data file, the service will create the index file if it does not exist."),Object(l.b)("h3",{id:"technologies-used"},"Technologies Used"),Object(l.b)("p",null,"The PofHistorianService is written in C# and targets .NET Framework 4.5.1."),Object(l.b)("h3",{id:"dependencies"},"Dependencies"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},".NET Framework 4.5.1."),Object(l.b)("li",{parentName:"ul"},"Windows 7 operating system with SP 1 or above.")),Object(l.b)("h3",{id:"installation-instructions"},"Installation Instructions"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Login to the Windows machine in which PofHistorianService needs to be installed."),Object(l.b)("li",{parentName:"ul"},"Create a folder PofHistorianService, (For example: C:\\PofHistorianService). You can create other folder name if you wish."),Object(l.b)("li",{parentName:"ul"},"Copy all the PofHistorianService binaries from the .zip file of the release to this folder."),Object(l.b)("li",{parentName:"ul"},"Change the config file to make sure it is correct in the running environment."),Object(l.b)("li",{parentName:"ul"},"Make sure you have administrator privileges."),Object(l.b)("li",{parentName:"ul"},"Navigate to C:\\PofHistorianService"),Object(l.b)("li",{parentName:"ul"},"Run the command .\\pof-historian-api.exe install"),Object(l.b)("li",{parentName:"ul"},"You should get the installed successfully message."),Object(l.b)("li",{parentName:"ul"},"The PofHistorianService windows service is installed at this point."),Object(l.b)("li",{parentName:"ul"},"Go to the Services console in Windows."),Object(l.b)("li",{parentName:"ul"},"Make sure the service is running. If not, start it."),Object(l.b)("li",{parentName:"ul"},"Check the properties of the service to ensure that it is configured to start automatically.")),Object(l.b)("h3",{id:"uninstallation-instructions"},"Uninstallation Instructions"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Login to the Windows machine in which PofHistorianService is installed."),Object(l.b)("li",{parentName:"ul"},"Make sure you have administrator privileges."),Object(l.b)("li",{parentName:"ul"},"Navigate to C:\\PofHistorianService."),Object(l.b)("li",{parentName:"ul"},"Run the command .\\pof-historian-api.exe uninstall"),Object(l.b)("li",{parentName:"ul"},"You should get an uninstall successful message.")),Object(l.b)("h3",{id:"run-in-console"},"Run in Console"),Object(l.b)("p",null,"The service can also be run as a console app without installing the service. When debugging the service or testing, you may need to simply run the service as a console app."),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Navigate to C:\\PofHistorianService"),Object(l.b)("li",{parentName:"ul"},"Right click the app file \u201cpof-historian-api.exe\u201d, select \u201cRun as administrator\u201d.")),Object(l.b)("p",null,Object(l.b)("img",{alt:"Running in Console",src:a(88).default})),Object(l.b)("h3",{id:"configuration"},"Configuration"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Navigate to C:\\PofHistorianService."),Object(l.b)("li",{parentName:"ul"},"Open the file pof-historian-api.exe.config in the text editor of choice."),Object(l.b)("li",{parentName:"ul"},"Update the configuration items as specified below, save and close the file. Restart the service for the new configuration to take effect.")),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Key"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"ServicePort")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Service port number")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"ServerBaseUrl")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Base server URL that will be used by the client to send http requests e.g. https://+:.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"LogFileRelativePath")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Path of the log files relative to the deployment directory. A path of Logs\\ will create the log file in C:\\PofHistorianService\\Logs if the deployment directory is C:\\PofHistorianService. Log file is created in text format and the rolling interval is set to a day.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"LocalRequestOnly")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The flag to set if only the local requests are valid.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"FileLocation")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The folder name to contain the data file and index file, including the path name.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"FileLocationSecond")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The second folder name to contain the data file and index file, including the path name.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"ConfigSqlite")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Connection string. Specify the connection string for the config database in SQLITE")))),Object(l.b)("h6",{id:"sample-content"},"Sample content"),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-xml"}),'<?xml version="1.0" encoding="utf-8"?>\n<configuration>\n    ...\n    ...\n    ...\n  <appSettings>\n    <add key="ServicePort" value="8888" />\n    <add key="ServerBaseUrl" value="http://+:" />\n    <add key="LogFileRelativePath" value="Logs\\" />\n    <add key="LocalRequestOnly" value="false" />\n    <add key="FileLocation" value="D:\\sincal-get-scada\\file" />\n    <add key="FileLocationSecond" value="D:\\sincal-get-scada\\altfile" />\n  </appSettings>\n  <connectionStrings>\n    <add name="ConfigSqlite" connectionString="Data Source=.\\config\\config.sqlite" />\n  </connectionStrings>\n    ...\n    ...\n    ...\n</configuration>\n\n')),Object(l.b)("h3",{id:"sqlite-database-configuration"},"SQLITE Database Configuration"),Object(l.b)("p",null,"The SQLITE configuration can be found in the config.sqlite file within the ",Object(l.b)("em",{parentName:"p"},"tblNameMapping")," table."),Object(l.b)("h4",{id:"tblnamemapping"},"tblNameMapping"),Object(l.b)("p",null,"Holds the mapping between feeder name and alias/attribute."),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Column Name"),Object(l.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"Name")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Feeder name for the service API input parameter")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"Phase")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Phase information of the measurement")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"NomPowerFact")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Power factor to calculate the power via formula: P = \u221a3 \xd7 pf \xd7 I \xd7 V")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"NomBusVolts")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Bus voltage to calculate the power via formula: P = \u221a3 \xd7 pf \xd7 I \xd7 V")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"Measuring")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Measurement type")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"Alias")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Measurement alias")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"Attribute")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Measurement attribute name")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"AltAlias")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Alternative alias for the measurement.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.b)("inlineCode",{parentName:"td"},"AltAttribute")),Object(l.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Alternative attribute name for the measurement")))),Object(l.b)("h6",{id:"sample-content-1"},"Sample content"),Object(l.b)("p",null,Object(l.b)("img",{alt:"Running in Console",src:a(89).default})),Object(l.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(l.b)("h5",{parentName:"div"},Object(l.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(l.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(l.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(l.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(l.b)("ol",{parentName:"div"},Object(l.b)("li",{parentName:"ol"},"When getting power data, if alias with measuring \u201cMW\u201d does not exist as SCADA value, we will calculate it using the current value with measuring \u201cAMPS\u201d with the formula: P = \u221a3 \xd7 pf \xd7 I \xd7 V"),Object(l.b)("li",{parentName:"ol"},"When the first alias can not be found in the data file, the alternative alias will be used to get the data.")))))}s.isMDXComponent=!0},88:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/run-f36e560891f4b03ea7883e1244cfd542.png"},89:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/content-31d43f8be35190cf8dd20e1345be617d.png"}}]);