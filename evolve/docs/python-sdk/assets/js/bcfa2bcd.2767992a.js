"use strict";(self.webpackChunkewb_sdk_python=self.webpackChunkewb_sdk_python||[]).push([["5377"],{82745:function(e,n,r){r.r(n),r.d(n,{frontMatter:()=>i,toc:()=>l,default:()=>h,metadata:()=>t,assets:()=>a,contentTitle:()=>o});var t=JSON.parse('{"id":"sdk-persistence","title":"Persisting Models","description":"Evolve data service","source":"@site/versioned_docs/version-0.42.0/persistence.mdx","sourceDirName":".","slug":"/sdk-persistence","permalink":"/evolve/docs/python-sdk/0.42.0/sdk-persistence","draft":false,"unlisted":false,"tags":[],"version":"0.42.0","frontMatter":{"id":"sdk-persistence","title":"Persisting Models"},"sidebar":"someSidebar","previous":{"title":"Tracing","permalink":"/evolve/docs/python-sdk/0.42.0/sdk-tracing"},"next":{"title":"Requesting Models","permalink":"/evolve/docs/python-sdk/0.42.0/sdk-consumer"}}'),s=r(74848),c=r(84429);r(33021),r(72207);let i={id:"sdk-persistence",title:"Persisting Models"},o,a={},l=[{value:"Evolve data service",id:"evolve-data-service",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"evolve-data-service",children:"Evolve data service"}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["The API for persisting data to a remote server is currently in alpha and very likely to experience breaking changes\nin the future. Please provide any feedback about this API to ",(0,s.jsx)(n.a,{href:"http://www.zepben.com",children:"Zepben"}),"."]})}),"\n",(0,s.jsxs)(n.p,{children:["The SDK provides a client to send models to a remote data server via ",(0,s.jsx)(n.a,{href:"http://grpc.io/",children:"gRPC"}),". The service and proto\ndefinitions for this API can be found ",(0,s.jsx)(n.a,{href:"http://github.com/zepben/evolve-grpc",children:"here"}),". An implementation of the server for\nthe services is provided with the Evolve platform data services."]}),"\n",(0,s.jsx)(n.p,{children:"Here is an example of how to connect to and send a model to the evolve data server:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from zepben.evolve import connect_async, connect, ProducerClient, NetworkService, CustomerService, DiagramService\n\nasync with connect_async(host="localhost", rpc_port=50051) as channel:\n    client = ProducerClient(channel)\n\n    network_service = NetworkService()\n    customer_service = CustomerService()\n    diagram_service = DiagramService()\n    populate_network_objects(network_service)\n\n    await client.send([network_service, customer_service, diagram_service])\n\n# Or using the synchronous API:\nwith connect(host="localhost", rpc_port=50051) as channel:\n    client = ProducerClient(channel)\n\n    network_service = NetworkService()\n    customer_service = CustomerService()\n    diagram_service = DiagramService()\n    populate_network_objects(network_service)\n\n    client.send([network_service, customer_service, diagram_service])\n'})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ProducerClient"})," is an abstraction layer that allows sending all services at once (useful for a server that exposes\nmore than one service), however typically you'll want to use a dedicated service for the data you are working with.\nFor these cases there are the following classes:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"NetworkProducerClient"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"CustomerProducerClient"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"DiagramProducerClient"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["These classes expose a similar API to ",(0,s.jsx)(n.code,{children:"ProducerClient"}),", however accepting a single service of the named type rather than a list.\nFor example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from zepben.evolve import connect_async, NetworkService, CustomerService, DiagramService, NetworkProducerClient, CustomerProducerClient, DiagramProducerClient\n\nasync with connect_async(host="localhost", rpc_port=50051) as channel:\n    network_client = NetworkProducerClient(channel)\n\n    network_service = NetworkService()\n    populate_network_objects(network_service)\n\n    await client.send([network_service, customer_service, diagram_service])\n\nasync with connect_async(host="localhost", rpc_port=50052) as channel:\n    customer_client = CustomerProducerClient(channel)\n\n    customer_service = CustomerService()\n    populate_customer_objects(customer_service)\n\n    await client.send(customer_service)\n\nasync with connect_async(host="localhost", rpc_port=50052) as channel:\n    diagram_client = DiagramProducerClient(channel)\n\n    diagram_service = DiagramService()\n    populate_diagram_objects(diagram_service)\n\n    await client.send(diagram_service)\n'})})]})}function h(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},72207:function(e,n,r){r(74848),r(96540)},33021:function(e,n,r){r(74848),r(96540),r(98864)},84429:function(e,n,r){r.d(n,{R:()=>i,x:()=>o});var t=r(96540);let s={},c=t.createContext(s);function i(e){let n=t.useContext(c);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);