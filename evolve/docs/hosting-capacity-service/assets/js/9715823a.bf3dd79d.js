"use strict";(self.webpackChunkhosting_capacity_service=self.webpackChunkhosting_capacity_service||[]).push([["1984"],{1201:function(e,n,i){i.r(n),i.d(n,{metadata:()=>s,default:()=>h,frontMatter:()=>t,contentTitle:()=>a,toc:()=>d,assets:()=>o});var s=JSON.parse('{"id":"how-to-guides/validation-scripts","title":"Validation Scripts","description":"Data validation scripts are provided as-is without formal support. They are intended to test data validation as we develop more formal data validation tools.","source":"@site/docs/how-to-guides/validation-scripts.mdx","sourceDirName":"how-to-guides","slug":"/how-to-guides/validation-scripts","permalink":"/evolve/docs/hosting-capacity-service/next/how-to-guides/validation-scripts","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"validation-scripts","title":"Validation Scripts","slug":"/how-to-guides/validation-scripts","toc_max_heading_level":4}}'),r=i(4848),l=i(8453);let t={id:"validation-scripts",title:"Validation Scripts",slug:"/how-to-guides/validation-scripts",toc_max_heading_level:4},a="Data Validation Scripts for Hosting Capacity Model (HCM)",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Validation Modes",id:"validation-modes",level:3},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Configure the Validator",id:"1-configure-the-validator",level:3},{value:"2. Run the Validator",id:"2-run-the-validator",level:3},{value:"3. Review Output",id:"3-review-output",level:3},{value:"Validator 1: Scenario Configuration Validator",id:"validator-1-scenario-configuration-validator",level:2},{value:"What It Does",id:"what-it-does",level:3},{value:"How to Use",id:"how-to-use",level:3},{value:"Understanding the Results",id:"understanding-the-results",level:3},{value:"Core Information",id:"core-information",level:4},{value:"Validation Checks",id:"validation-checks",level:4},{value:"Data Coverage Metrics",id:"data-coverage-metrics",level:4},{value:"Configuration Settings",id:"configuration-settings",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:3},{value:"Validator 2: Profile Completeness Validator",id:"validator-2-profile-completeness-validator",level:2},{value:"What It Does",id:"what-it-does-1",level:3},{value:"How to Use",id:"how-to-use-1",level:3},{value:"Understanding the Results",id:"understanding-the-results-1",level:3},{value:"Core Information",id:"core-information-1",level:4},{value:"Validation Checks",id:"validation-checks-1",level:4},{value:"Statistical Summary",id:"statistical-summary",level:4},{value:"Configuration Settings",id:"configuration-settings-1",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues-1",level:3},{value:"Validator 3: Profile Availability Validator",id:"validator-3-profile-availability-validator",level:2},{value:"What It Does",id:"what-it-does-2",level:3},{value:"How to Use",id:"how-to-use-2",level:3},{value:"Understanding the Results",id:"understanding-the-results-2",level:3},{value:"Core Information",id:"core-information-2",level:4},{value:"What &quot;Viable Profile&quot; Means",id:"what-viable-profile-means",level:4},{value:"Console Output Example",id:"console-output-example",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues-2",level:3},{value:"Overall Workflow",id:"overall-workflow",level:2},{value:"Typical Usage Pattern",id:"typical-usage-pattern",level:3},{value:"Console Output",id:"console-output",level:3},{value:"Interpreting Results",id:"interpreting-results",level:3},{value:"Configuration Reference",id:"configuration-reference",level:2},{value:"Full Configuration Example",id:"full-configuration-example",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Files",id:"files",level:2},{value:"2. Load Data Coverage Tool",id:"2-load-data-coverage-tool",level:2},{value:"What It Does",id:"what-it-does-3",level:3},{value:"How to Use",id:"how-to-use-3",level:3},{value:"Understanding the Results",id:"understanding-the-results-3",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues-3",level:3},{value:"Configuration Reference",id:"configuration-reference-1",level:3},{value:"Feeder Equipment Analysis",id:"feeder-equipment-analysis",level:2},{value:"What It Does",id:"what-it-does-4",level:3},{value:"How to Use",id:"how-to-use-4",level:3},{value:"Understanding the Results",id:"understanding-the-results-4",level:3},{value:"Core Equipment Counts",id:"core-equipment-counts",level:4},{value:"Switch Type Breakdown",id:"switch-type-breakdown",level:4},{value:"Power Electronics",id:"power-electronics",level:4},{value:"Full Mode Additional Data",id:"full-mode-additional-data",level:4},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues-4",level:3}];function c(e){let n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"data-validation-scripts-for-hosting-capacity-model-hcm",children:"Data Validation Scripts for Hosting Capacity Model (HCM)"})}),"\n",(0,r.jsx)(n.admonition,{title:"Unsupported",type:"info",children:(0,r.jsx)(n.p,{children:"Data validation scripts are provided as-is without formal support. They are intended to test data validation as we develop more formal data validation tools."})}),"\n",(0,r.jsx)(n.h1,{id:"1-scenario-validator---comprehensive-documentation",children:"1. Scenario Validator - Comprehensive Documentation"}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File:"})," ",(0,r.jsx)(n.code,{children:"scenario_validator.py"})]}),"\n",(0,r.jsx)(n.p,{children:"The Scenario Validator is an integrated validation tool that combines three validators to ensure database integrity and work package readiness before HCM execution."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"The three validators are:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scenario Configuration Validator"})," - Validates scenario setup in ",(0,r.jsx)(n.code,{children:"scenario_configuration"})," table"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Profile Completeness Validator"})," - Validates DER profile data quality"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Profile Availability Validator"})," - Validates work package can execute with required profiles"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"validation-modes",children:"Validation Modes"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Database-Wide Validation (Validators 1+2):"}),"\nValidates all scenarios and profiles in the database without requiring a work package."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Full Validation (Validators 1+2+3):"}),"\nValidates database integrity AND confirms a specific work package can execute."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Work Package Filtering:"}),"\nWhen enabled, only validates scenarios and profiles relevant to a specific work package, making validation faster and more focused."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"validation:\n  filter_to_work_package: true  # Only check data relevant to work package\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.h3,{id:"1-configure-the-validator",children:"1. Configure the Validator"}),"\n",(0,r.jsxs)(n.p,{children:["Edit ",(0,r.jsx)(n.code,{children:"scenario_validator_config.yml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'database:\n  connection:\n    host: "your-database-host"\n    port: 5432\n    name: "your_database_name"\n    user: "your_username"\n    password: "your_password"\n    timeout: 300\n\nvalidation:\n  # Choose which validators to run\n  run_config_validation: true\n  run_profile_completeness: true\n  run_availability_validation: false  # Requires work_package.path\n  \n  # Optional: Only validate data relevant to work package (faster)\n  filter_to_work_package: true\n\nwork_package:\n  # Optional: Only needed for availability validation\n  path: null  # or "my_work_package.json"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-run-the-validator",children:"2. Run the Validator"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"python scenario_validator.py\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-review-output",children:"3. Review Output"}),"\n",(0,r.jsx)(n.p,{children:"The validator generates separate CSV files for each validator that runs:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"scenario_config_validation_YYYYMMDD_HHMMSS.csv"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"profile_completeness_validation_YYYYMMDD_HHMMSS.csv"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"profile_availability_validation_{work_package_name}_YYYYMMDD_HHMMSS.csv"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"All files from the same run share the same timestamp."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"validator-1-scenario-configuration-validator",children:"Validator 1: Scenario Configuration Validator"}),"\n",(0,r.jsx)(n.h3,{id:"what-it-does",children:"What It Does"}),"\n",(0,r.jsxs)(n.p,{children:["Validates the ",(0,r.jsx)(n.code,{children:"scenario_configuration"})," input table against all related reference tables to ensure scenario setups are complete and correct before HCM execution."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key validations include:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Scenario naming and ID uniqueness"}),"\n",(0,r.jsx)(n.li,{children:"Reference integrity (allocation IDs, forecast scenarios, profile IDs)"}),"\n",(0,r.jsx)(n.li,{children:"Data consistency across forecast levels"}),"\n",(0,r.jsx)(n.li,{children:"Business logic validation (probability weights, POE values)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"how-to-use",children:"How to Use"}),"\n",(0,r.jsx)(n.p,{children:"Enable in config:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"validation:\n  run_config_validation: true\n"})}),"\n",(0,r.jsx)(n.p,{children:"The validator automatically:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Connects to the input database"}),"\n",(0,r.jsx)(n.li,{children:"Loads all reference data into memory"}),"\n",(0,r.jsx)(n.li,{children:"Runs 8 validation checks on each scenario"}),"\n",(0,r.jsx)(n.li,{children:"Outputs results to timestamped CSV file"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"understanding-the-results",children:"Understanding the Results"}),"\n",(0,r.jsx)(n.h4,{id:"core-information",children:"Core Information"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"scenario_id"})," - Unique scenario identifier"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"scenario_name"})," - Human-readable scenario name"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"overall_status"})," - ",(0,r.jsx)(n.strong,{children:"PASS"})," (all checks pass) or ",(0,r.jsx)(n.strong,{children:"FAIL"})," (issues found)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"validation-checks",children:"Validation Checks"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Check Type"}),(0,r.jsx)(n.th,{children:"What It Validates"}),(0,r.jsx)(n.th,{children:"Pass/Fail Indicators"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"basic_checks"})}),(0,r.jsx)(n.td,{children:"Scenario naming and uniqueness"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"scenario_name='base'"})," forbidden ",(0,r.jsx)("br",{})," No duplicate ",(0,r.jsx)(n.code,{children:"scenario_id"})," values"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"forecast_level_checks"})}),(0,r.jsx)(n.td,{children:"Valid forecast aggregation levels"}),(0,r.jsxs)(n.td,{children:["Must be one of: ",(0,r.jsx)(n.code,{children:"LV_FEEDER"}),", ",(0,r.jsx)(n.code,{children:"FEEDER"}),", ",(0,r.jsx)(n.code,{children:"SUBSTATION"}),", ",(0,r.jsx)(n.code,{children:"SUB_GEOGRAPHICAL_REGION"}),", ",(0,r.jsx)(n.code,{children:"GEOGRAPHICAL_REGION"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"allocation_id_checks"})}),(0,r.jsx)(n.td,{children:"Allocation table references exist"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"pv_allocation_id"}),", ",(0,r.jsx)(n.code,{children:"ev_allocation_id"}),", ",(0,r.jsx)(n.code,{children:"bess_allocation_id"})," must exist in respective allocation tables"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"forecast_scenario_checks"})}),(0,r.jsx)(n.td,{children:"Forecast scenario references exist"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"pv_forecasts_scenario"}),", ",(0,r.jsx)(n.code,{children:"ev_forecasts_scenario"}),", ",(0,r.jsx)(n.code,{children:"bess_forecasts_scenario"}),", ",(0,r.jsx)(n.code,{children:"demand_forecasts_scenario"})," must exist"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"cross_validation_checks"})}),(0,r.jsx)(n.td,{children:"Forecast level consistency"}),(0,r.jsx)(n.td,{children:"Specified forecast level must have actual data in the forecast scenario"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"demand_poe_checks"})}),(0,r.jsx)(n.td,{children:"Probability of Exceedance validity"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"demand_forecast_poe"})," must exist in demand forecast data"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"probability_weights_checks"})}),(0,r.jsx)(n.td,{children:"Allocation probability math"}),(0,r.jsx)(n.td,{children:"Weights must sum to 1.0 per feeder in each allocation"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"profile_existence_checks"})}),(0,r.jsx)(n.td,{children:"Profile reference integrity"}),(0,r.jsx)(n.td,{children:"All profile IDs in allocations must exist in profile tables"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"data-coverage-metrics",children:"Data Coverage Metrics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"pv_forecast_codes_count"})," - Number of network codes in PV forecast scenario"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ev_forecast_codes_count"})," - Number of network codes in EV forecast scenario"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"bess_forecast_codes_count"})," - Number of network codes in BESS forecast scenario"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-settings",children:"Configuration Settings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'validation:\n  scenario_config:\n    forbidden_scenario_names: ["base"]\n    forecast_levels:\n      - "FEEDER"\n    probability_tolerance: 0.001\n'})}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Error Message"}),(0,r.jsx)(n.th,{children:"Cause"}),(0,r.jsx)(n.th,{children:"Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"scenario_name='base' is forbidden"})}),(0,r.jsx)(n.td,{children:"Reserved scenario name used"}),(0,r.jsx)(n.td,{children:"Rename scenario to avoid 'base'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"allocation_id does not exist"})}),(0,r.jsx)(n.td,{children:"Missing or mistyped allocation ID"}),(0,r.jsx)(n.td,{children:"Verify allocation exists in reference table"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"forecast_scenario does not exist"})}),(0,r.jsx)(n.td,{children:"Missing forecast data"}),(0,r.jsx)(n.td,{children:"Create forecast or fix scenario reference"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"forecast_level not found in scenario"})}),(0,r.jsx)(n.td,{children:"Data/configuration mismatch"}),(0,r.jsx)(n.td,{children:"Use correct forecast level or update forecast data"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"feeder weights sum to X, not 1.0"})}),(0,r.jsx)(n.td,{children:"Incorrect probability distribution"}),(0,r.jsx)(n.td,{children:"Adjust allocation weights to sum to 1.0 per feeder"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"references missing profile_id"})}),(0,r.jsx)(n.td,{children:"Missing profile data"}),(0,r.jsx)(n.td,{children:"Create missing profiles or fix allocation references"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"validator-2-profile-completeness-validator",children:"Validator 2: Profile Completeness Validator"}),"\n",(0,r.jsx)(n.h3,{id:"what-it-does-1",children:"What It Does"}),"\n",(0,r.jsxs)(n.p,{children:["Validates DER profile data tables (",(0,r.jsx)(n.code,{children:"pv_profiles"}),", ",(0,r.jsx)(n.code,{children:"ev_profiles"}),", ",(0,r.jsx)(n.code,{children:"bess_profiles"}),") to ensure power time-series arrays are complete, correctly formatted, and contain realistic values."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key validations include:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Power array completeness and length verification"}),"\n",(0,r.jsx)(n.li,{children:"Normalized power value range checking"}),"\n",(0,r.jsx)(n.li,{children:"Technology-specific metadata validation"}),"\n",(0,r.jsx)(n.li,{children:"Statistical analysis of profile characteristics"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"how-to-use-1",children:"How to Use"}),"\n",(0,r.jsx)(n.p,{children:"Enable in config:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"validation:\n  run_profile_completeness: true\n"})}),"\n",(0,r.jsx)(n.p,{children:"The validator automatically:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Connects to the input database"}),"\n",(0,r.jsx)(n.li,{children:"Processes each DER type (PV, EV, BESS) separately"}),"\n",(0,r.jsx)(n.li,{children:"Validates profile metadata and power arrays"}),"\n",(0,r.jsx)(n.li,{children:"Outputs results to timestamped CSV file"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"understanding-the-results-1",children:"Understanding the Results"}),"\n",(0,r.jsx)(n.p,{children:"Each profile gets one row in the output CSV with validation results and statistics:"}),"\n",(0,r.jsx)(n.h4,{id:"core-information-1",children:"Core Information"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"der_type"})," - Technology type (PV, EV, or BESS)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"profile_id"})," - Unique profile identifier"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"overall_status"})," - ",(0,r.jsx)(n.strong,{children:"PASS"})," (all checks pass) or ",(0,r.jsx)(n.strong,{children:"FAIL"})," (issues found)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"validation-checks-1",children:"Validation Checks"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Check Type"}),(0,r.jsx)(n.th,{children:"What It Validates"}),(0,r.jsx)(n.th,{children:"Technology-Specific Rules"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"basic_checks"})}),(0,r.jsx)(n.td,{children:"Metadata field validity"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"All:"})," ",(0,r.jsx)(n.code,{children:"phases"})," must be 1 or 3",(0,r.jsx)("br",{}),(0,r.jsx)(n.strong,{children:"PV:"})," ",(0,r.jsx)(n.code,{children:"dc_ac_ratio"})," between 1.0-2.0",(0,r.jsx)("br",{}),(0,r.jsx)(n.strong,{children:"BESS:"})," ",(0,r.jsx)(n.code,{children:"round_trip_efficiency"})," between 0.0-1.0"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"array_length_checks"})}),(0,r.jsx)(n.td,{children:"Power array completeness"}),(0,r.jsxs)(n.td,{children:["Expected 17,520 intervals (standard year) or 17,568 (leap year)",(0,r.jsx)("br",{}),"Reports shortfall if incomplete"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"array_validation_checks"})}),(0,r.jsx)(n.td,{children:"Power value ranges"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"PV:"})," 0.0 to 1.0 \xb1 tolerance",(0,r.jsx)("br",{}),(0,r.jsx)(n.strong,{children:"EV/BESS:"})," -1.0 to 1.0 \xb1 tolerance",(0,r.jsx)("br",{}),"Accounts for floating-point precision"]})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"statistical-summary",children:"Statistical Summary"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"min_value"})," - Minimum power value in array"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"max_value"})," - Maximum power value in array"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"mean_value"})," - Average power value"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"median_value"})," - Median power value"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-settings-1",children:"Configuration Settings"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"validation:\n  profile_completeness:\n    valid_phases: [1, 3]\n    pv:\n      dc_ac_ratio_min: 1.0\n      dc_ac_ratio_max: 2.0\n    array:\n      valid_intervals_per_year: [17520, 17568]\n      length_tolerance: 0\n    normalization:\n      pv_min: 0.0\n      pv_max: 1.0\n      ev_min: 0.0\n      ev_max: 1.0\n      bess_min: -1.0\n      bess_max: 1.0\n      tolerance: 0.01\n"})}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting-common-issues-1",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Error Pattern"}),(0,r.jsx)(n.th,{children:"Cause"}),(0,r.jsx)(n.th,{children:"Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"dc_ac_ratio=0.8 should be between 1.0 and 2.0"})}),(0,r.jsx)(n.td,{children:"Unrealistic PV inverter sizing"}),(0,r.jsx)(n.td,{children:"Verify system specifications and data collection"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"expected=17520|actual=17000|shortfall=520"})}),(0,r.jsx)(n.td,{children:"Missing time intervals"}),(0,r.jsx)(n.td,{children:"Check for data collection gaps, ensure full year coverage"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"expected=17520|actual=0|shortfall=17520"})}),(0,r.jsx)(n.td,{children:"Empty power array"}),(0,r.jsx)(n.td,{children:"Profile data not loaded properly, check import process"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"max_value=1.050000, above normalized range"})}),(0,r.jsx)(n.td,{children:"Normalization errors"}),(0,r.jsx)(n.td,{children:"Review power normalization method and rated capacity"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"min_value=-0.050000, below PV tolerance"})}),(0,r.jsx)(n.td,{children:"PV showing negative generation"}),(0,r.jsx)(n.td,{children:"Check sensor calibration and data processing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"round_trip_efficiency=1.2 must be between 0.0 and 1.0"})}),(0,r.jsx)(n.td,{children:"Invalid BESS efficiency"}),(0,r.jsx)(n.td,{children:"Verify battery specifications and calculation methods"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"validator-3-profile-availability-validator",children:"Validator 3: Profile Availability Validator"}),"\n",(0,r.jsx)(n.h3,{id:"what-it-does-2",children:"What It Does"}),"\n",(0,r.jsx)(n.p,{children:"Validates that required profiles exist for all year/feeder/scenario combinations defined in a work package. This ensures a work package can execute before HCM runs begin."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key validations include:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Scenario-to-allocation mapping verification"}),"\n",(0,r.jsx)(n.li,{children:"Profile existence for specific year/feeder combinations"}),"\n",(0,r.jsx)(n.li,{children:"Lock constraint validation (lock_year, lock_feeder)"}),"\n",(0,r.jsx)(n.li,{children:"Coverage across all three DER types (PV, EV, BESS)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"how-to-use-2",children:"How to Use"}),"\n",(0,r.jsx)(n.p,{children:"Enable in config and provide work package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'validation:\n  run_availability_validation: true\n\nwork_package:\n  path: "my_work_package.json"\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Work Package Format:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "work_package_name": "my_work_package",\n  "feeders": ["WP1226", "AB1245", "MG1204"],\n  "forecast_years": [2030, 2035, 2040],\n  "scenarios": ["scenario_1", "scenario_2"],\n  "load_time": {\n    "start": "2024-07-01T10:00:00.00Z",\n    "end": "2025-07-01T10:00:00.00Z"\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"}),' The validator also supports the "crunched" format from the Work Package Manager UI. Both formats are automatically detected.']}),"\n",(0,r.jsx)(n.p,{children:"The validator automatically:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Loads work package configuration"}),"\n",(0,r.jsxs)(n.li,{children:["Maps scenarios to allocation IDs from ",(0,r.jsx)(n.code,{children:"scenario_configuration"})]}),"\n",(0,r.jsx)(n.li,{children:"Loads all profile mappings for each allocation"}),"\n",(0,r.jsx)(n.li,{children:"Validates each year/feeder/scenario combination"}),"\n",(0,r.jsx)(n.li,{children:"Outputs results to timestamped CSV file with work package name"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"understanding-the-results-2",children:"Understanding the Results"}),"\n",(0,r.jsx)(n.p,{children:"Each year/feeder/scenario combination gets one row in the output CSV:"}),"\n",(0,r.jsx)(n.h4,{id:"core-information-2",children:"Core Information"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"der_type"})," - Technology type (PV, EV, or BESS)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"scenario"})," - Scenario name from work package"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"year"})," - Forecast year from work package"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"feeder"})," - Feeder code from work package"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"allocation_id"})," - The allocation ID used by this scenario"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"status"})," - ",(0,r.jsx)(n.strong,{children:"PASS"})," (viable profile exists) or ",(0,r.jsx)(n.strong,{children:"FAIL"})," (no viable profile)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"issues"})," - Description of problem (if failed)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"what-viable-profile-means",children:'What "Viable Profile" Means'}),"\n",(0,r.jsx)(n.p,{children:"A profile is viable for a combination if:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Profile exists in the allocation's profile mappings"}),"\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"lock_year = True"}),": Profile has ",(0,r.jsx)(n.code,{children:"represents_year = scenario_year"})]}),"\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"lock_feeder = True"}),": Profile has ",(0,r.jsx)(n.code,{children:"feeder_code = scenario_feeder"})]}),"\n",(0,r.jsx)(n.li,{children:"At least ONE profile in the allocation meets all lock constraints"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"console-output-example",children:"Console Output Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"=== PV SUMMARY ===\nTotal: 1591 | Passed: 1577 (99.1%) | Failed: 14 (0.9%)\n\nFailures by scenario:\n  f2_central: 14/1591\n"})}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting-common-issues-2",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Error Message"}),(0,r.jsx)(n.th,{children:"Cause"}),(0,r.jsx)(n.th,{children:"Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Scenario not found or has no {der_type}_allocation_id"})}),(0,r.jsxs)(n.td,{children:["Scenario not in ",(0,r.jsx)(n.code,{children:"scenario_configuration"})," or allocation_id is NULL"]}),(0,r.jsx)(n.td,{children:"Add scenario to table with valid allocation_id"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Allocation has no profiles"})}),(0,r.jsxs)(n.td,{children:["allocation_id exists but has no entries in ",(0,r.jsx)(n.code,{children:"{der_type}_allocations"})," table"]}),(0,r.jsx)(n.td,{children:"Add profile mappings to allocation table"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"No viable profiles for year=2030, feeder='KC1247'"})}),(0,r.jsx)(n.td,{children:"No profile meets the lock constraints for this combination"}),(0,r.jsxs)(n.td,{children:["Either:",(0,r.jsx)("br",{}),"1. Create profiles for that year/feeder, OR",(0,r.jsx)("br",{}),"2. Set ",(0,r.jsx)(n.code,{children:"lock_year=False"})," or ",(0,r.jsx)(n.code,{children:"lock_feeder=False"})," in allocation"]})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Understanding Lock Constraints:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lock_year=True"}),": Restricts profile selection to only profiles where ",(0,r.jsx)(n.code,{children:"represents_year"})," matches the scenario year"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"lock_feeder=True"}),": Restricts profile selection to only profiles where ",(0,r.jsx)(n.code,{children:"feeder_code"})," matches the scenario feeder"]}),"\n",(0,r.jsx)(n.li,{children:"If BOTH are false: Any profile in the allocation can be used (most flexible)"}),"\n",(0,r.jsx)(n.li,{children:"If BOTH are true: Profile must match both year AND feeder (most restrictive)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"overall-workflow",children:"Overall Workflow"}),"\n",(0,r.jsx)(n.h3,{id:"typical-usage-pattern",children:"Typical Usage Pattern"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 1: Database Health Check"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"validation:\n  run_config_validation: true\n  run_profile_completeness: true\n  run_availability_validation: false\n  filter_to_work_package: false  # Check entire database\nwork_package:\n  path: null\n"})}),"\n",(0,r.jsx)(n.p,{children:"This validates your entire database integrity without requiring a work package."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 2: Fix Issues"}),"\nReview the CSV outputs and fix any FAIL entries in the database."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Step 3: Work Package Validation (Focused)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'validation:\n  run_config_validation: true\n  run_profile_completeness: true\n  run_availability_validation: true\n  filter_to_work_package: true  # Only check relevant data (faster)\nwork_package:\n  path: "my_work_package.json"\n'})}),"\n",(0,r.jsx)(n.p,{children:"This runs all three validators but only checks data relevant to the specific work package. Faster turnaround."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Alternative Step 3: Work Package Validation (Comprehensive)"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'validation:\n  run_config_validation: true\n  run_profile_completeness: true\n  run_availability_validation: true\n  filter_to_work_package: false  # Check entire database\nwork_package:\n  path: "my_work_package.json"\n'})}),"\n",(0,r.jsx)(n.p,{children:"This validates the entire database AND the work package. Slower but catches all issues."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 4: Execute Work Package"}),"\nIf all validators pass, the work package is ready for HCM execution."]}),"\n",(0,r.jsx)(n.h3,{id:"console-output",children:"Console Output"}),"\n",(0,r.jsx)(n.p,{children:"The validator provides a summary at the end:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"============================================================\nOVERALL VALIDATION SUMMARY\n============================================================\nScenario Config: 3/5 passed (3.4s)\nProfile Completeness: 4806/4998 passed (38.0s)\nProfile Availability: 18/18 passed (3.2s)\n\nTotal time: 44.9s\n============================================================\n"})}),"\n",(0,r.jsx)(n.p,{children:"This shows:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"How many checks passed in each validator"}),"\n",(0,r.jsx)(n.li,{children:"Timing for each validator"}),"\n",(0,r.jsx)(n.li,{children:"Total execution time"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"interpreting-results",children:"Interpreting Results"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"All validators PASS:"}),"\n\u2705 Database is healthy and work package is ready to execute"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Config or Completeness FAIL:"}),"\n\u26A0\uFE0F Database has issues that need fixing regardless of work package"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Availability FAIL (but Config/Completeness PASS):"}),"\n\u26A0\uFE0F Database is healthy but this specific work package can't execute. Either:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fix lock constraints in allocations"}),"\n",(0,r.jsx)(n.li,{children:"Create missing profiles for required year/feeder combinations"}),"\n",(0,r.jsx)(n.li,{children:"Choose different scenarios in the work package"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"configuration-reference",children:"Configuration Reference"}),"\n",(0,r.jsx)(n.h3,{id:"full-configuration-example",children:"Full Configuration Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'database:\n  connection:\n    host: "your-database-host"\n    port: 5432\n    name: "your_database_name"\n    user: "your_username"\n    password: "your_password"\n    timeout: 300\n\nwork_package:\n  path: "yur_work_package_config.json"  # Set to JSON file path for availability validation\n\nvalidation:\n  run_config_validation: true\n  run_profile_completeness: true\n  run_availability_validation: true\n  \n  # When work_package is provided, only validate scenarios/profiles relevant to that work package\n  filter_to_work_package: true\n  \n  scenario_config:\n    forbidden_scenario_names: ["base"]\n    forecast_levels:\n      - "FEEDER"\n    probability_tolerance: 0.001\n  \n  profile_completeness:\n    valid_phases: [1, 3]\n    pv:\n      dc_ac_ratio_min: 1.0\n      dc_ac_ratio_max: 2.0\n    array:\n      valid_intervals_per_year: [17520, 17568]\n      length_tolerance: 0\n    normalization:\n      pv_min: 0.0\n      pv_max: 1.0\n      ev_min: 0.0\n      ev_max: 1.0\n      bess_min: -1.0\n      bess_max: 1.0\n      tolerance: 0.01\n\noutput:\n  timestamp_format: "%Y%m%d_%H%M%S"\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"pip install pandas psycopg2-binary pyyaml\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"files",children:"Files"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"scenario_validator.py"})})," - Main validation script (885 lines)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"scenario_validator_config.yml"})})," - Configuration file"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"sample_work_package.json"})})," - Example work package format"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"2-load-data-coverage-tool",children:"2. Load Data Coverage Tool"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File:"})," ",(0,r.jsx)(n.code,{children:"load-data-coverage-tool.py"})]}),"\n",(0,r.jsx)(n.h3,{id:"what-it-does-3",children:"What It Does"}),"\n",(0,r.jsx)(n.p,{children:"Validates smart meter data completeness by cross-referencing expected usage points from the EWB network model against actual measurement data in the database. Identifies meters with missing or incomplete readings over a specified time period."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fetches all expected identifiers from EWB network hierarchy (NMIs or mRIDs)"}),"\n",(0,r.jsx)(n.li,{children:"Queries database for actual 30-minute interval reading counts"}),"\n",(0,r.jsx)(n.li,{children:"Calculates coverage percentages for each identifier"}),"\n",(0,r.jsx)(n.li,{children:"Outputs results in JSON or CSV format"}),"\n",(0,r.jsx)(n.li,{children:"Supports both Endeavour Energy (NMI-based) and Essential Energy (mRID-based)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Execution flow:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Query database for existing readings (~2-3 minutes)"}),"\n",(0,r.jsx)(n.li,{children:"Fetch feeders from EWB network (~30 seconds)"}),"\n",(0,r.jsx)(n.li,{children:"Extract identifiers from all feeders via multiprocessing (may take 20 minutes up to several hours depending on network size and type)"}),"\n",(0,r.jsx)(n.li,{children:"Cross-reference and identify missing/incomplete data"}),"\n",(0,r.jsx)(n.li,{children:"Calculate percentages and generate reports"}),"\n",(0,r.jsx)(n.li,{children:"Display enhanced summary statistics"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Subsequent runs with the same date range skip data generation and only recalculate percentages (very fast)."}),"\n",(0,r.jsx)(n.h3,{id:"how-to-use-3",children:"How to Use"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Prerequisites:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Python packages: ",(0,r.jsx)(n.code,{children:"psycopg[binary]"}),", ",(0,r.jsx)(n.code,{children:"pyyaml"}),", ",(0,r.jsx)(n.code,{children:"zepben.ewb"}),", ",(0,r.jsx)(n.code,{children:"tqdm"})]}),"\n",(0,r.jsxs)(n.li,{children:["Configuration file: ",(0,r.jsx)(n.code,{children:"load-data-coverage-tool-config.yml"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration steps:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Database settings"})," - Verify connection parameters:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"   db:\n     host: 'load-db.network.zb.energy'\n     name: 'hc'\n     user: 'hc'\n     password: 'your-password'\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analysis time period"})," - Set the date range:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"   db:\n     timestamp:\n       start: 2025-09-01T00:00:00+10:00\n       finish: 2025-09-30T00:00:00+10:00\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"EWB authentication"})," - Ensure valid access token:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"   ewb:\n     host: 'network.ewb.server'\n     access_token: \"your-token\"\n     rpc_port: 443\n     useMridAsCPI: false  # false for Endeavour, true for Essential\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"4",children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Output format"})," - Choose JSON or CSV:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"   output:\n     format: 'json'  # Options: 'json' or 'csv'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Run the script:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"python load-data-coverage-tool.py\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Output files"})," are automatically generated based on the configured date range:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"coverage_YYYY-MM-DD_to_YYYY-MM-DD.[json|csv]"})," - Raw reading counts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"processed_coverage_YYYY-MM-DD_to_YYYY-MM-DD.[json|csv]"})," - Coverage percentages (0.0-1.0)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"understanding-the-results-3",children:"Understanding the Results"}),"\n",(0,r.jsx)(n.p,{children:"The script outputs an enhanced summary with five categories:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"======================================================================\nDATA COVERAGE SUMMARY (2025-09-01 to 2025-09-30)\n======================================================================\nTotal identifiers analyzed:  1,834,917\nComplete coverage (100%):    0 (0.0%)\nNear-complete (95-99%):      698,118 (38.0%)\nPartial coverage (1-94%):    4,622 (0.3%)\nVery low coverage (<1%):     4,622 (0.3%)\nNo data (0 readings):        1,132,177 (61.7%)\n======================================================================\nData Quality Metrics:\n  Expected readings per identifier: 1,392\n  Identifiers with any data: 702,740\n  Actual readings - Min: 1, Max: 1345, Median: 1345\n  Average coverage for meters with data: 96.5%\n======================================================================\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Category definitions:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Category"}),(0,r.jsx)(n.th,{children:"Coverage Range"}),(0,r.jsx)(n.th,{children:"Meaning"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Complete"})}),(0,r.jsx)(n.td,{children:"100%"}),(0,r.jsx)(n.td,{children:"Meter has all expected readings"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Near-complete"})}),(0,r.jsx)(n.td,{children:"95-99%"}),(0,r.jsx)(n.td,{children:"Meter has most data, minor gaps only"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Partial"})}),(0,r.jsx)(n.td,{children:"1-94%"}),(0,r.jsx)(n.td,{children:"Meter has significant data gaps"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Very low"})}),(0,r.jsx)(n.td,{children:"less than 1% (but more than 0)"}),(0,r.jsx)(n.td,{children:"Meter has minimal readings (rounds to 0%)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"No data"})}),(0,r.jsx)(n.td,{children:"0 readings"}),(0,r.jsx)(n.td,{children:"No readings found - includes both basic (accumulation) meters without interval metering capability and potentially failed smart meters"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:'Understanding "No data" results:'})}),"\n",(0,r.jsx)(n.p,{children:"Identifiers with no data typically fall into two categories:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Basic (accumulation) meters"})," - These meters don't have interval metering capability and no data is expected"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Failed smart meters"})," - Smart meters that should be providing data but aren't, due to either upstream collection failures (network has no data) or downstream ingestion issues (data exists but wasn't loaded into the database)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Basic meter penetration varies by feeder and network. To distinguish between expected vs. problematic zero-coverage cases, you'll need to cross-reference with meter type data or consult with the network operator about expected smart meter coverage for specific feeders."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Network-specific notes:"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.em,{children:["Endeavour Energy (",(0,r.jsx)(n.code,{children:"useMridAsCPI: false"}),"):"]}),"\n",(0,r.jsxs)(n.em,{children:["Essential Energy (",(0,r.jsx)(n.code,{children:"useMridAsCPI: true"}),"):"]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Data quality metrics:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Expected readings"}),": Calculated from time range (48 readings/day for 30-min intervals)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Min/Max/Median"}),": Distribution of actual reading counts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Average coverage"}),": Mean coverage percentage for meters with any data"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sparse data warning"}),": Triggered if median coverage less than 1%"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Output file formats:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"JSON example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "NMI123456": 1.0,   // 100% coverage\n    "NMI789012": 0.97,  // 97% coverage (near-complete)\n    "NMI345678": 0.0    // No data\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"CSV example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-csv",children:"Identifier,Value\nNMI123456,1.0\nNMI789012,0.97\nNMI345678,0.0\n"})}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting-common-issues-3",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Issue"}),(0,r.jsx)(n.th,{children:"Cause"}),(0,r.jsx)(n.th,{children:"Solution"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Script reruns full extraction despite existing files"}),(0,r.jsx)(n.td,{children:"Output filename doesn't match date range in config"}),(0,r.jsx)(n.td,{children:"Verify config dates match existing output files; delete old files if date range changed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Very slow execution (>1 hour)"}),(0,r.jsx)(n.td,{children:"Essential Energy network or network/EWB connection issues"}),(0,r.jsx)(n.td,{children:"Essential takes 2-3 hours normally; check connectivity if slower; multiprocessing uses all CPU cores"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:'"Config file not found" error'}),(0,r.jsx)(n.td,{children:"Running from wrong directory"}),(0,r.jsxs)(n.td,{children:["Ensure ",(0,r.jsx)(n.code,{children:"load-data-coverage-tool-config.yml"})," is in same directory as script"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Invalid output format warning"}),(0,r.jsxs)(n.td,{children:["Typo in config ",(0,r.jsx)(n.code,{children:"output.format"})]}),(0,r.jsxs)(n.td,{children:["Must be exactly ",(0,r.jsx)(n.code,{children:"'json'"})," or ",(0,r.jsx)(n.code,{children:"'csv'"})," (case-insensitive)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"All meters show very low/no coverage"}),(0,r.jsxs)(n.td,{children:["Wrong ",(0,r.jsx)(n.code,{children:"useMridAsCPI"})," setting"]}),(0,r.jsxs)(n.td,{children:["Use ",(0,r.jsx)(n.code,{children:"false"})," for Endeavour, ",(0,r.jsx)(n.code,{children:"true"})," for Essential"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sparse data warning for Essential"}),(0,r.jsx)(n.td,{children:"Normal for Essential Energy"}),(0,r.jsx)(n.td,{children:"Essential currently has incomplete data collection; check with colleague for expected date ranges"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-reference-1",children:"Configuration Reference"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Complete config example:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"db:\n  host: 'load-db.future-grid.endeavour.zb.energy'\n  name: 'hc'\n  user: 'hc'\n  password: 'your-password'\n  timestamp:\n    start: 2025-09-01T00:00:00+10:00\n    finish: 2025-09-30T00:00:00+10:00\n\newb:\n  host: 'future-grid.endeavour.zb.energy'\n  access_token: \"your-token\"\n  rpc_port: 443\n  useMridAsCPI: false  # CRITICAL: false for Endeavour, true for Essential\n\noutput:\n  format: 'json'  # Options: 'json' or 'csv'\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"feeder-equipment-analysis",children:"Feeder Equipment Analysis"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"File:"})," ",(0,r.jsx)(n.code,{children:"feeder_equipment_analysis.py"})]}),"\n",(0,r.jsx)(n.h3,{id:"what-it-does-4",children:"What It Does"}),"\n",(0,r.jsx)(n.p,{children:"Analyzes electrical network equipment across utility feeders using the Zepben network API. Provides comprehensive statistics on customer connections, transformers, switches, and power electronics to support network planning and analysis."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Analysis includes:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Usage point (customer connection) counts"}),"\n",(0,r.jsx)(n.li,{children:"Transformer inventories"}),"\n",(0,r.jsx)(n.li,{children:"Switch type breakdowns (breakers, disconnectors, fuses, etc.)"}),"\n",(0,r.jsx)(n.li,{children:"Power electronics capacity summaries"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"how-to-use-4",children:"How to Use"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Prerequisites:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Valid Zepben API access token in ",(0,r.jsx)(n.code,{children:"token.txt"})," file"]}),"\n",(0,r.jsx)(n.li,{children:"Network connectivity to Zepben API endpoint"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration options:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"FEEDER_SLICE = None  # Set to number to limit feeders (e.g., 10 for testing)\nSUMMARY_METRICS_ONLY = True  # False for detailed object breakdown showing all equipment types\n"})}),"\n",(0,r.jsx)(n.p,{children:"The script automatically:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Authenticates with Zepben network API"}),"\n",(0,r.jsxs)(n.li,{children:["Discovers all available feeders (or subset if ",(0,r.jsx)(n.code,{children:"FEEDER_SLICE"})," set)"]}),"\n",(0,r.jsx)(n.li,{children:"Extracts equipment data for each feeder"}),"\n",(0,r.jsxs)(n.li,{children:["Exports results to: ",(0,r.jsx)(n.code,{children:"feeder_equipment_analysis_YYYY-MM-DD_HH-MM-SS.csv"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"understanding-the-results-4",children:"Understanding the Results"}),"\n",(0,r.jsx)(n.p,{children:"Results are sorted by usage point count (highest first) with the following columns:"}),"\n",(0,r.jsx)(n.h4,{id:"core-equipment-counts",children:"Core Equipment Counts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"feeder"})," - Feeder identifier"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"usage_points"})," - Customer connection points (NMIs)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"transformers"})," - Power transformer count"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"total_switches"})," - All switching device count"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"switch-type-breakdown",children:"Switch Type Breakdown"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"s_breaker"})," - Circuit breakers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"s_disconnector"})," - Disconnectors/isolators"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"s_fuse"})," - Fuses"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"s_jumper"})," - Jumpers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"s_recloser"})," - Automatic reclosers"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"power-electronics",children:"Power Electronics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"power_electronics"})," - Power electronics connection count"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"power_electronics_rated_kw"})," - Total rated capacity (kW)"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"full-mode-additional-data",children:"Full Mode Additional Data"}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"SUMMARY_METRICS_ONLY = False"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"total_objects"})," - Total equipment objects in feeder"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"total_object_types"})," - Number of distinct object types"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"obj_[typename]"})," - Count of each specific equipment type"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"troubleshooting-common-issues-4",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Connection Problems:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ensure ",(0,r.jsx)(n.code,{children:"token.txt"})," exists with valid access token"]}),"\n",(0,r.jsx)(n.li,{children:"Verify network connectivity to Zepben API"}),"\n",(0,r.jsx)(n.li,{children:"Check authentication token hasn't expired"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Performance:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"FEEDER_SLICE"})," to limit analysis during testing (e.g., ",(0,r.jsx)(n.code,{children:"FEEDER_SLICE = 10"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Enable ",(0,r.jsx)(n.code,{children:"SUMMARY_METRICS_ONLY = True"})," for faster processing"]}),"\n",(0,r.jsx)(n.li,{children:"Large networks may require 10+ minutes for complete analysis"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Data Quality Issues:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Zero equipment counts may indicate incomplete network model"}),"\n",(0,r.jsxs)(n.li,{children:["Missing power electronics ratings suggest incomplete ",(0,r.jsx)(n.code,{children:"rated_s"})," attributes"]}),"\n",(0,r.jsx)(n.li,{children:"Check console output for specific feeder processing errors"}),"\n"]})]})}function h(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:function(e,n,i){i.d(n,{R:()=>t,x:()=>a});var s=i(6540);let r={},l=s.createContext(r);function t(e){let n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);