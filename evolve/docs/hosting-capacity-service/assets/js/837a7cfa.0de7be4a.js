"use strict";(self.webpackChunkhosting_capacity_service_doco=self.webpackChunkhosting_capacity_service_doco||[]).push([[389],{5680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>c});var n=a(6540);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},p=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=d(a),m=o,c=u["".concat(s,".").concat(m)]||u[m]||g[m]||i;return a?n.createElement(c,r(r({ref:t},p),{},{components:a})):n.createElement(c,r({ref:t},p))}));function c(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:o,r[1]=l;for(var d=2;d<i;d++)r[d]=a[d];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},8642:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>c,frontMatter:()=>l,metadata:()=>d,toc:()=>u});var n=a(8168),o=a(8587),i=(a(6540),a(5680));const r=["components"],l={id:"calibration-methodology",title:"Model Calibration Methodology",slug:"/reference/calibration-methodology",toc_max_heading_level:4},s="Model Calibration Methodology",d={unversionedId:"reference/calibration-methodology",id:"reference/calibration-methodology",title:"Model Calibration Methodology",description:"This page provides a detailed overview of the methodology used for network Model Calibration within the Hosting Capacity Module. It yields a table of tap settings for each off-load transformer, which can then be used in future work packages to run time-series modelling with the inferred tap positions. It also produces a set of results per Energy Consumer allowing the comparison between modelled (simulated) and measured (real) voltages, which can be used to validate the model and understand the uncertainty in the model.",source:"@site/docs/reference/calibration-methodology.mdx",sourceDirName:"reference",slug:"/reference/calibration-methodology",permalink:"/evolve/docs/hosting-capacity-service/docs/next/reference/calibration-methodology",draft:!1,tags:[],version:"current",frontMatter:{id:"calibration-methodology",title:"Model Calibration Methodology",slug:"/reference/calibration-methodology",toc_max_heading_level:4},sidebar:"theSidebar",previous:{title:"Configuration",permalink:"/evolve/docs/hosting-capacity-service/docs/next/reference/configuration"},next:{title:"How-To Guides - Home",permalink:"/evolve/docs/hosting-capacity-service/docs/next/how-to-guides/how-to-home"}},p={},u=[{value:"Introduction to Model Calibration",id:"introduction-to-model-calibration",level:3},{value:"Calibration Prerequisites",id:"calibration-prerequisites",level:3},{value:"Calibration Methodology",id:"calibration-methodology",level:2},{value:"Initiation",id:"initiation",level:3},{value:"Work Package Generation and Execution",id:"work-package-generation-and-execution",level:3},{value:"Off-Load Tap Position Determination",id:"off-load-tap-position-determination",level:3},{value:"Using the Calibrated Tap Positions",id:"using-the-calibrated-tap-positions",level:4},{value:"Raw Results",id:"raw-results",level:3}],g={toc:u},m="wrapper";function c(e){let{components:t}=e,a=(0,o.A)(e,r);return(0,i.yg)(m,(0,n.A)({},g,a,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"model-calibration-methodology"},"Model Calibration Methodology"),(0,i.yg)("p",null," This page provides a detailed overview of the methodology used for network Model Calibration within the Hosting Capacity Module. It yields a table of tap settings for each off-load transformer, which can then be used in future work packages to run time-series modelling with the inferred tap positions. It also produces a set of results per Energy Consumer allowing the comparison between modelled (simulated) and measured (real) voltages, which can be used to validate the model and understand the uncertainty in the model."),(0,i.yg)("h3",{id:"introduction-to-model-calibration"},"Introduction to Model Calibration"),(0,i.yg)("p",null,"Accurate network Model Calibration is a prerequisite for reliable power system analysis and is particularly crucial for voltage regulation studies and determining unknown distribution transformer tap positions. The objective is to ensure that the power flow models generated are an accurate reflection of real-world system conditions, providing a validated baseline for further analysis. "),(0,i.yg)("p",null,"For more information on why network calibration is important, see the page ",(0,i.yg)("a",{parentName:"p",href:"../explanation/calibration-concepts"},"What is Network Model Calibration and why is it useful?")),(0,i.yg)("p",null,"For a step by step guide on how to run a Model Calibration work package, see ",(0,i.yg)("a",{parentName:"p",href:"../how-to-guides/calibration"},"How to Run a Model Calibration Work Package"),"."),(0,i.yg)("hr",null),(0,i.yg)("h3",{id:"calibration-prerequisites"},"Calibration Prerequisites"),(0,i.yg)("p",null,"Required inputs (these should have been automated into your deployment during Hosting Capacity Module deployment):"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Historic power quality data at the Energy Consumer level, which includes measurements of watts (P), vars (Q), and voltages (V). This data is known as PQV data. ")),(0,i.yg)("admonition",{title:"Valid Voltages",type:"info"},(0,i.yg)("p",{parentName:"admonition"},"For the purposes of Model Calibration, valid voltages are defined as those that are between 180.0 and 263.0 volts")),(0,i.yg)("admonition",{title:"Note on Time Periods",type:"note"},(0,i.yg)("p",{parentName:"admonition"},"It is not necessary for the PQV data to cover complete weeks, months, or years; rather, it should encompass a range of grid conditions, including minimum, maximum, and typical network loading periods.  You may wish to consider running Model Calibration over various times to explore the impacts of different system conditions. Providing data for periods such as 7am, 12pm, 7pm, and 3am could be useful to explore periods of medium demand, high generation, high demand, and low demand respectively.  ")),(0,i.yg)("h2",{id:"calibration-methodology"},"Calibration Methodology"),(0,i.yg)("p",null,"The calibration process integrates measured field data with the Hosting Capacity Module's power flow simulation environment through the following steps:"),(0,i.yg)("h3",{id:"initiation"},"Initiation"),(0,i.yg)("p",null,"The user initiates a calibration work package, specifying the time period and feeders to be calibrated, as per the instructions in the ",(0,i.yg)("a",{parentName:"p",href:"../how-to-guides/calibration"},"How to Run a Model Calibration Work Package")," guide."),(0,i.yg)("h3",{id:"work-package-generation-and-execution"},"Work Package Generation and Execution"),(0,i.yg)("p",null,"A work package request is sent to EAS. This follows the same methodology as other work packages, but with some differences in the OpenDSS model setup."),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"The OpenDSS model has ",(0,i.yg)("inlineCode",{parentName:"li"},"measurement_zone")," objects placed at each NMI, unlike in the Hosting Capacity Module's standard power flow model, which only has ",(0,i.yg)("inlineCode",{parentName:"li"},"measurement_zone")," objects at the feeder head and distribution transformer. The service checks if each Energy Consumer has PQV data for the specified time period. If not found, those Energy Consumers are not allocated measurement zones. This more granular approach allows for a direct comparison of modelled voltages against real-world measurements at each Energy Consumer location. This is more computationally intensive and generates more data to store, but is necessary for the calibration process to infer off-load tap positions and validate the model's accuracy. Given that Model Calibration is done only for a single timestep, the computational overhead is acceptable and manageable."),(0,i.yg)("li",{parentName:"ul"},"The Calibration flag is set to True, allowing the model to enter calibration mode.")),(0,i.yg)("p",null,"The Work Package is run via the Hosting Capacity Service as normal. Several results tables are generated."),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"Results are streamed to the specific ",(0,i.yg)("inlineCode",{parentName:"p"},"energy_meter_voltages_raw")," table, where the ",(0,i.yg)("inlineCode",{parentName:"p"},"conducting_equipment_mrid")," lines up with the ",(0,i.yg)("inlineCode",{parentName:"p"},"energy_consumer_mrid")," (supply point) and can then be used as part of the automated analysis to infer off-load tap changer positions and 'calibrate' the model. This is unlike the standard HCM, where energy_meter_voltages_raw is off by default, as it would generate too much data for standard use.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"The simulated voltages are stored in the ",(0,i.yg)("inlineCode",{parentName:"p"},"energy_consumer_meters")," table, with the ",(0,i.yg)("inlineCode",{parentName:"p"},"meter_group_id")," being the name given to the calibration work package."))),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},"The calibration workflow does not track failures within the work package. The likely failure modes are no results appearing in the results database or completely invalid voltages on one or more phases. The post-loadflow tasks are left to deal with these cases. ")),(0,i.yg)("h3",{id:"off-load-tap-position-determination"},"Off-Load Tap Position Determination"),(0,i.yg)("p",null,"For each transformer, the process is as:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Determine which Energy Consumers are downstream of the transformer"),(0,i.yg)("li",{parentName:"ul"},"Get the calculated voltage results for each of those Energy Consumers from the work package run above."),(0,i.yg)("li",{parentName:"ul"},"Get all the PQV data for each of those Energy Consumers")),(0,i.yg)("admonition",{title:"Multi-phase validity",type:"note"},(0,i.yg)("p",{parentName:"admonition"},"In some cases, PQV data may be structured as three-phase\nbut effectively represent only a single-phase connection, with invalid or placeholder data recorded for the other phases. To ensure accuracy, any phase voltage falling outside the valid range of 180.0 to 263.0 volts is excluded from analysis. The average voltage for the Energy Consumer is then calculated using only the remaining valid phase values.")),(0,i.yg)("admonition",{title:"Aggregation",type:"info"},(0,i.yg)("p",{parentName:"admonition"},"Each ",(0,i.yg)("em",{parentName:"p"},"Energy Consumer")," can have multiple NMIs, each NMI can have multiple meters, and each meter can be multi-phase. We aggregate all these via a simple average to produce a single voltage value per ",(0,i.yg)("em",{parentName:"p"},"Energy Consumer"),". The ",(0,i.yg)("em",{parentName:"p"},"Energy Consumer")," represents the closest electrical connection point to the customer premise; it is typically where the network responsibility boundary point is located. ")),(0,i.yg)("admonition",{title:"Filtering",type:"note"},(0,i.yg)("p",{parentName:"admonition"},"For the purposes of Off-Load Tap Position determination, voltages are filtered to ones that have valid results in both simulated and real voltages for a given Energy Consumer.\nIf the real (measured) values are valid but the simulated results were invalid, that Energy Consumer voltage pair (real and simulated) are excluded from the Off-Load Tap Position process, and vice versa.")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Calculate the overall transformer average real voltage using the PQV data for all customers under that transformer."),(0,i.yg)("li",{parentName:"ul"},"Calculate the overall transformer average simulated voltage using the HCM results for all customers under that transformer")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Compare these two voltages and get a percentage difference for each transformer."),(0,i.yg)("li",{parentName:"ul"},"The tap positions will be adjusted according to this table:")),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},"The tap adjustment is calculated using 'current tap positions', which are either drawn from the CIM model if present, or if not present, are assumed to be a nominal tap position, which will be a preset common default value for many distribution transformers.")),(0,i.yg)("table",null,(0,i.yg)("thead",{parentName:"table"},(0,i.yg)("tr",{parentName:"thead"},(0,i.yg)("th",{parentName:"tr",align:null},"Delta Percent Range"),(0,i.yg)("th",{parentName:"tr",align:null},"Tap Adjustment"),(0,i.yg)("th",{parentName:"tr",align:null},"Description"))),(0,i.yg)("tbody",{parentName:"table"},(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"Greater than 11.25%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position + 4"),(0,i.yg)("td",{parentName:"tr",align:null},"Very large positive delta, increase tap by 4 positions and log that it exceeds the maximum adjustment threshold.")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"8.75% to 11.25%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position + 4"),(0,i.yg)("td",{parentName:"tr",align:null},"Large positive delta, increase tap by 4 positions.")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"6.25% to 8.75%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position + 3"),(0,i.yg)("td",{parentName:"tr",align:null},"Moderately large positive delta, increase tap by 3 positions.")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"3.75% to 6.25%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position + 2"),(0,i.yg)("td",{parentName:"tr",align:null},"Medium positive delta, increase tap by 2 positions.")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"1.25% to 3.75%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position + 1"),(0,i.yg)("td",{parentName:"tr",align:null},"Small positive delta, increase tap by 1 position.")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"-1.25% to 1.25%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position"),(0,i.yg)("td",{parentName:"tr",align:null},"Delta is near zero, no adjustment.")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"-3.75% to -1.25%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position - 1"),(0,i.yg)("td",{parentName:"tr",align:null},"Small negative delta, decrease tap by 1 position.")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"-6.25% to -3.75%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position - 2"),(0,i.yg)("td",{parentName:"tr",align:null},"Medium negative delta, decrease tap by 2 positions.")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"-8.75% to -6.25%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position - 3"),(0,i.yg)("td",{parentName:"tr",align:null},"Large negative delta, decrease tap by 3 positions.")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},"Less than -8.75%"),(0,i.yg)("td",{parentName:"tr",align:null},"Current Tap Position - 3"),(0,i.yg)("td",{parentName:"tr",align:null},"Very large negative delta, decrease tap by 3 positions and log that it exceeds the maximum adjustment threshold.")))),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"The outcomes are stored in the ",(0,i.yg)("inlineCode",{parentName:"li"},"calibrated_taps")," table. A full breakdown of the columns is found at ",(0,i.yg)("a",{parentName:"li",href:"./input-tables#calibrated_taps"},"Input Tables"),".")),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"If all Energy Consumers under a transformer have invalid voltages, the tap position is not adjusted, and the transformer is not included in the ",(0,i.yg)("inlineCode",{parentName:"p"},"calibrated_taps")," table. A warning is placed in the logs if this happens.")),(0,i.yg)("h4",{id:"using-the-calibrated-tap-positions"},"Using the Calibrated Tap Positions"),(0,i.yg)("p",null,"The ",(0,i.yg)("inlineCode",{parentName:"p"},"calibrated_taps"),' can be called within the ModelConfig of a Work Package using the "transformerTapSettings" parameter, using the name of the calibration work package as the value. This will then apply the calibrated tap positions to the OpenDSS model for that work package, allowing for time-series modelling with the inferred tap positions.'),(0,i.yg)("admonition",{title:"Note",type:"info"},(0,i.yg)("p",{parentName:"admonition"},"When running a Work Package with a specified list of Calibrated Taps via transformerTapSettings, if a transformer is not present in the ",(0,i.yg)("inlineCode",{parentName:"p"},"calibrated_taps")," table, it will use the value in the CIM model, or if that is not present, will default to a tap position of 4."),(0,i.yg)("p",{parentName:"admonition"},"When running a Work Package with a specified list of Calibrated Taps via transformerTapSettings, if a transformer is not present in the\ncalibrated_taps table, it will use the value in the CIM model, or if that is not present, will default to a nominal tap position, which will be a preset common default value for many distribution transformers.")),(0,i.yg)("h3",{id:"raw-results"},"Raw Results"),(0,i.yg)("p",null,"The Calibration process generates a table that contains the real and simulated voltages for each Energy Consumer, along with the calculated voltage deltas. This can include invalid voltages (e.g., NaN values) if the simulated or real voltages were not valid for that Energy Consumer. These will have been not considered in the Off-Load Tap Position determination step, but are included here for completeness and further analysis."),(0,i.yg)("p",null,"This table is called ",(0,i.yg)("inlineCode",{parentName:"p"},"calibration_meter_results"),". A breakdown of the columns is found at ",(0,i.yg)("a",{parentName:"p",href:"./output-tables#calibration_meter_results"},"Output Tables"),"."),(0,i.yg)("p",null,"Further analysis of the relationship between demand and voltage error can provide insights into the uncertainty of the impedance model; however, no built-in tools are included for this analysis."),(0,i.yg)("hr",null))}c.isMDXComponent=!0}}]);