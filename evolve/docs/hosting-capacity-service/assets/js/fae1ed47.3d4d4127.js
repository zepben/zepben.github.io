"use strict";(self.webpackChunkhosting_capacity_service=self.webpackChunkhosting_capacity_service||[]).push([["7855"],{2462:function(e,t,i){i.r(t),i.d(t,{metadata:()=>n,default:()=>c,frontMatter:()=>r,contentTitle:()=>s,toc:()=>d,assets:()=>l});var n=JSON.parse('{"id":"reference/calibration-methodology","title":"Model Calibration Methodology","description":"This page provides a detailed overview of the methodology used for network Model Calibration within the Hosting Capacity Module. It yields a table of tap settings for each off-load transformer, which can then be used in future work packages to run time-series modelling with the inferred tap positions. It also produces a set of results per Energy Consumer allowing the comparison between modelled (simulated) and measured (real) voltages, which can be used to validate the model and understand the uncertainty in the model.","source":"@site/versioned_docs/version-0.6.1/reference/calibration-methodology.mdx","sourceDirName":"reference","slug":"/reference/calibration-methodology","permalink":"/evolve/docs/hosting-capacity-service/0.6.1/reference/calibration-methodology","draft":false,"unlisted":false,"tags":[],"version":"0.6.1","frontMatter":{"id":"calibration-methodology","title":"Model Calibration Methodology","slug":"/reference/calibration-methodology","toc_max_heading_level":4},"sidebar":"theSidebar","previous":{"title":"Configuration Options","permalink":"/evolve/docs/hosting-capacity-service/0.6.1/reference/configuration"},"next":{"title":"How-To Guides - Home","permalink":"/evolve/docs/hosting-capacity-service/0.6.1/how-to-guides/how-to-home"}}'),a=i(4848),o=i(8453);let r={id:"calibration-methodology",title:"Model Calibration Methodology",slug:"/reference/calibration-methodology",toc_max_heading_level:4},s="Model Calibration Methodology",l={},d=[{value:"Introduction to Model Calibration",id:"introduction-to-model-calibration",level:3},{value:"Calibration Prerequisites",id:"calibration-prerequisites",level:3},{value:"Selecting Optimal Time Periods for Calibration",id:"selecting-optimal-time-periods-for-calibration",level:2},{value:"Calibration Methodology",id:"calibration-methodology",level:2},{value:"Initiation",id:"initiation",level:3},{value:"Work Package Generation and Execution",id:"work-package-generation-and-execution",level:3},{value:"Off-Load Tap Position Determination",id:"off-load-tap-position-determination",level:3},{value:"Using the Calibrated Tap Positions",id:"using-the-calibrated-tap-positions",level:4},{value:"Raw Results",id:"raw-results",level:3}];function h(e){let t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"model-calibration-methodology",children:"Model Calibration Methodology"})}),"\n",(0,a.jsx)(t.p,{children:"This page provides a detailed overview of the methodology used for network Model Calibration within the Hosting Capacity Module. It yields a table of tap settings for each off-load transformer, which can then be used in future work packages to run time-series modelling with the inferred tap positions. It also produces a set of results per Energy Consumer allowing the comparison between modelled (simulated) and measured (real) voltages, which can be used to validate the model and understand the uncertainty in the model."}),"\n",(0,a.jsx)(t.h3,{id:"introduction-to-model-calibration",children:"Introduction to Model Calibration"}),"\n",(0,a.jsx)(t.p,{children:"Accurate network Model Calibration is a prerequisite for reliable power system analysis and is particularly crucial for voltage regulation studies and determining unknown distribution transformer tap positions. The objective is to ensure that the power flow models generated are an accurate reflection of real-world system conditions, providing a validated baseline for further analysis."}),"\n",(0,a.jsxs)(t.p,{children:["For more information on why network calibration is important, see the page ",(0,a.jsx)(t.a,{href:"../explanation/calibration-concepts",children:"What is Network Model Calibration and why is it useful?"})]}),"\n",(0,a.jsxs)(t.p,{children:["For a step-by-step guide on how to run Model Calibration, see ",(0,a.jsx)(t.a,{href:"../how-to-guides/calibration",children:"How to Run Network Model Calibration"}),"."]}),"\n",(0,a.jsx)(t.hr,{}),"\n",(0,a.jsx)(t.h3,{id:"calibration-prerequisites",children:"Calibration Prerequisites"}),"\n",(0,a.jsx)(t.p,{children:"Required inputs (these should have been automated into your deployment during Hosting Capacity Module deployment):"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Historic power quality data at the Energy Consumer level, which includes measurements of watts (P), vars (Q), and voltages (V). This data is known as PQV data."}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{title:"Valid Voltages",type:"info",children:(0,a.jsx)(t.p,{children:"For the purposes of Model Calibration, valid voltages are defined as those that are between 180.0 and 263.0 volts (phase to neutral). Any voltage readings outside this range are considered invalid and are excluded from the calibration process. This range is chosen to encompass typical voltage variations in distribution networks while filtering out erroneous or extreme values that could skew the calibration results. These values are hardcoded but can be changed by Zepben if needed; please contact Zepben support for making changes to these values."})}),"\n",(0,a.jsx)(t.h2,{id:"selecting-optimal-time-periods-for-calibration",children:"Selecting Optimal Time Periods for Calibration"}),"\n",(0,a.jsx)(t.admonition,{title:"Note on Time Periods",type:"note",children:(0,a.jsx)(t.p,{children:"It is not necessary for the PQV data to cover complete weeks, months, or years; rather, it should encompass a range of grid conditions, including minimum, maximum, and typical network loading periods.  You may wish to consider running Model Calibration over various times to explore the impacts of different system conditions. Providing data for periods such as 7am, 12pm, 7pm, and 3am could be useful to explore periods of medium demand, high generation, high demand, and low demand respectively."})}),"\n",(0,a.jsx)(t.p,{children:"Calibration can be used for two related but distinct things:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Determining a best fit for off-load tap settings (",(0,a.jsx)(t.code,{children:"calibrated_taps"})," table)\nFor this use case, it will work best using a time of minimum load. This may vary by network, but is typically around 4am."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Measuring raw results per Energy Consumer highlighting modelled (simulated) and measured (real) voltages, which can be used to highlight impedance errors in the model and for further analysis (the ",(0,a.jsx)(t.code,{children:"energy_consumer_meters"})," table).\nFor this use case, you may want to try a number of different conditions, for periods such as 7am, 12pm, 7pm, and 4am could be useful to explore periods of medium demand, high generation, high demand, and low demand respectively."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"calibration-methodology",children:"Calibration Methodology"}),"\n",(0,a.jsx)(t.p,{children:"The calibration process integrates measured field data with the Hosting Capacity Module's power flow simulation environment through the following steps:"}),"\n",(0,a.jsx)(t.h3,{id:"initiation",children:"Initiation"}),"\n",(0,a.jsxs)(t.p,{children:["The user initiates a Calibration run, specifying the time period and feeders to be calibrated, as per the instructions in the ",(0,a.jsx)(t.a,{href:"../how-to-guides/calibration",children:"How to Run Network Model Calibration"})," guide."]}),"\n",(0,a.jsx)(t.h3,{id:"work-package-generation-and-execution",children:"Work Package Generation and Execution"}),"\n",(0,a.jsx)(t.p,{children:"A work package request is sent to EAS. This follows the same methodology as other work packages, but with some differences in the OpenDSS model setup."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["The OpenDSS model has ",(0,a.jsx)(t.code,{children:"measurement_zone"})," objects placed at each NMI, unlike in the Hosting Capacity Module's standard power flow model, which only has ",(0,a.jsx)(t.code,{children:"measurement_zone"})," objects at the feeder head and distribution transformer. The service checks if each Energy Consumer has PQV data for the specified time period. If not found, those Energy Consumers are not allocated measurement zones. This more granular approach allows for a direct comparison of modelled voltages against real-world measurements at each Energy Consumer location. This is more computationally intensive and generates more data to store, but is necessary for the calibration process to infer off-load tap positions and validate the model's accuracy. Given that Model Calibration is done only for a single timestep, the computational overhead is acceptable and manageable."]}),"\n",(0,a.jsx)(t.li,{children:"The Calibration flag is set to True, allowing the model to enter calibration mode."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"The Work Package is run via the Hosting Capacity Service as usual. Several results tables are generated."}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["Results are streamed to the specific ",(0,a.jsx)(t.code,{children:"energy_meter_voltages_raw"})," table, where the ",(0,a.jsx)(t.code,{children:"conducting_equipment_mrid"})," aligns with the ",(0,a.jsx)(t.code,{children:"energy_consumer_mrid"})," (supply point) and can then be used as part of the automated analysis to infer off-load tap changer positions and 'calibrate' the model. This is unlike the standard HCM, where energy_meter_voltages_raw is off by default, as it would generate too much data for standard use."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["The simulated voltages are stored in the ",(0,a.jsx)(t.code,{children:"energy_consumer_meters"})," table, with the ",(0,a.jsx)(t.code,{children:"meter_group_id"})," being the name given to the calibration work package."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"off-load-tap-position-determination",children:"Off-Load Tap Position Determination"}),"\n",(0,a.jsx)(t.p,{children:"For each transformer, the process is as:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Determine which Energy Consumers are downstream of the transformer"}),"\n",(0,a.jsx)(t.li,{children:"Get the calculated voltage results for each of those Energy Consumers from the work package run above."}),"\n",(0,a.jsx)(t.li,{children:"Get all the PQV data for each of those Energy Consumers"}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{title:"Multi-phase validity",type:"note",children:(0,a.jsx)(t.p,{children:"In some cases, PQV data may be structured as three-phase\nbut effectively represent only a single-phase connection, with invalid or placeholder data recorded for the other phases. To ensure accuracy, any phase voltage falling outside the valid range of 180.0 to 263.0 volts is excluded from analysis. The average voltage for the Energy Consumer is then calculated using only the remaining valid phase values."})}),"\n",(0,a.jsx)(t.admonition,{title:"Aggregation",type:"info",children:(0,a.jsxs)(t.p,{children:["Each ",(0,a.jsx)(t.em,{children:"Energy Consumer"})," can have multiple NMIs, each NMI can have multiple meters, and each meter can be multi-phase. We aggregate all these via a simple average to produce a single voltage value per ",(0,a.jsx)(t.em,{children:"Energy Consumer"}),". The ",(0,a.jsx)(t.em,{children:"Energy Consumer"})," represents the closest electrical connection point to the customer premise; it is typically where the network responsibility boundary point is located."]})}),"\n",(0,a.jsx)(t.admonition,{title:"Filtering",type:"note",children:(0,a.jsx)(t.p,{children:"For the purposes of Off-Load Tap Position determination, voltages are filtered to ones that have valid results in both simulated and real voltages for a given Energy Consumer.\nIf the real (measured) values are valid but the simulated results were invalid, that Energy Consumer voltage pair (real and simulated) are excluded from the Off-Load Tap Position process, and vice versa."})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Calculate the overall transformer average real voltage using the PQV data for all customers under that transformer (simple average)."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Calculate the overall transformer average simulated voltage using the HCM results for all customers under that transformer (simple average)."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"Compare these two voltages and get a percentage difference for each transformer."}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsx)(t.p,{children:"The tap positions will be adjusted according to this table:"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{type:"caution",children:(0,a.jsx)(t.p,{children:"The tap adjustment is calculated using 'current tap positions', which are either drawn from the CIM model if present, or if not present, are assumed to be a nominal tap position, which will be a preset common default value for many distribution transformers."})}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Delta Percent Range"}),(0,a.jsx)(t.th,{children:"Tap Adjustment"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Greater than 11.25%"}),(0,a.jsx)(t.td,{children:"Current Tap Position + 4"}),(0,a.jsx)(t.td,{children:"Very large positive delta, increase tap by 4 positions and log that it exceeds the maximum adjustment threshold."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"8.75% to 11.25%"}),(0,a.jsx)(t.td,{children:"Current Tap Position + 4"}),(0,a.jsx)(t.td,{children:"Large positive delta, increase tap by 4 positions."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"6.25% to 8.75%"}),(0,a.jsx)(t.td,{children:"Current Tap Position + 3"}),(0,a.jsx)(t.td,{children:"Moderately large positive delta, increase tap by 3 positions."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"3.75% to 6.25%"}),(0,a.jsx)(t.td,{children:"Current Tap Position + 2"}),(0,a.jsx)(t.td,{children:"Medium positive delta, increase tap by 2 positions."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"1.25% to 3.75%"}),(0,a.jsx)(t.td,{children:"Current Tap Position + 1"}),(0,a.jsx)(t.td,{children:"Small positive delta, increase tap by 1 position."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"-1.25% to 1.25%"}),(0,a.jsx)(t.td,{children:"Current Tap Position"}),(0,a.jsx)(t.td,{children:"Delta is near zero, no adjustment."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"-3.75% to -1.25%"}),(0,a.jsx)(t.td,{children:"Current Tap Position - 1"}),(0,a.jsx)(t.td,{children:"Small negative delta, decrease tap by 1 position."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"-6.25% to -3.75%"}),(0,a.jsx)(t.td,{children:"Current Tap Position - 2"}),(0,a.jsx)(t.td,{children:"Medium negative delta, decrease tap by 2 positions."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"-8.75% to -6.25%"}),(0,a.jsx)(t.td,{children:"Current Tap Position - 3"}),(0,a.jsx)(t.td,{children:"Large negative delta, decrease tap by 3 positions."})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"Less than -8.75%"}),(0,a.jsx)(t.td,{children:"Current Tap Position - 3"}),(0,a.jsx)(t.td,{children:"Very large negative delta, decrease tap by 3 positions and log that it exceeds the maximum adjustment threshold."})]})]})]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["The outcomes are stored in the ",(0,a.jsx)(t.code,{children:"calibrated_taps"})," table. A full breakdown of the columns is found at ",(0,a.jsx)(t.a,{href:"./input-tables#calibrated-taps",children:"Input Tables"}),". Note that although the table is an 'output' of this process, it is also an 'input' to future work packages that wish to use the calibrated tap positions, and is thus stored in the Input Tables section of the database."]}),"\n"]}),"\n",(0,a.jsx)(t.admonition,{type:"note",children:(0,a.jsxs)(t.p,{children:["If all Energy Consumers under a transformer have invalid voltages, the tap position is not adjusted, and the transformer is not included in the ",(0,a.jsx)(t.code,{children:"calibrated_taps"})," table. A warning is placed in the logs if this happens."]})}),"\n",(0,a.jsx)(t.h4,{id:"using-the-calibrated-tap-positions",children:"Using the Calibrated Tap Positions"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"calibrated_taps"}),' can be called within the ModelConfig of a Work Package using the "transformerTapSettings" parameter, using the name of the calibration work package as the value. This will then apply the calibrated tap positions to the OpenDSS model for that work package, allowing for time-series modelling with the inferred tap positions.']}),"\n",(0,a.jsx)(t.admonition,{title:"Note",type:"info",children:(0,a.jsx)(t.p,{children:"When running a Work Package with a specified list of Calibrated Taps via transformerTapSettings, if a transformer is not present in the\ncalibrated_taps table, it will use the value in the CIM model, or if that is not present, will default to a nominal tap position, which will be a preset common default value for many distribution transformers."})}),"\n",(0,a.jsx)(t.h3,{id:"raw-results",children:"Raw Results"}),"\n",(0,a.jsx)(t.p,{children:"The Calibration process generates a table that contains the real and simulated voltages for each Energy Consumer, along with the calculated voltage deltas. This can include invalid voltages (e.g., NaN values) if the simulated or real voltages were not valid for that Energy Consumer. These will have been not considered in the Off-Load Tap Position determination step, but are included here for completeness and further analysis."}),"\n",(0,a.jsxs)(t.p,{children:["This table is called ",(0,a.jsx)(t.code,{children:"calibration_meter_results"}),". A breakdown of the columns is found at ",(0,a.jsx)(t.a,{href:"./output-tables#calibration-meter-results",children:"Output Tables"}),"."]}),"\n",(0,a.jsx)(t.p,{children:"Further analysis of the relationship between demand and voltage error can provide insights into the uncertainty of the impedance model; however, no built-in tools are included for this analysis."}),"\n",(0,a.jsx)(t.hr,{})]})}function c(e={}){let{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:function(e,t,i){i.d(t,{R:()=>r,x:()=>s});var n=i(6540);let a={},o=n.createContext(a);function r(e){let t=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);