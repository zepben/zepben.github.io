"use strict";(self.webpackChunkhosting_capacity_service_doco=self.webpackChunkhosting_capacity_service_doco||[]).push([[8959],{3453:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>c});var n=a(8168),i=a(8587),o=(a(6540),a(5680));const r=["components"],l={id:"calibration",title:"How to run Model Calibration",slug:"/how-to-guides/calibration",toc_max_heading_level:4},s=void 0,p={unversionedId:"how-to-guides/calibration",id:"how-to-guides/calibration",title:"How to run Model Calibration",description:"Calibration has been undergoing some development changes recently. If you encounter any problems or have questions, please contact Zepben support.",source:"@site/docs/how-to-guides/calibration.mdx",sourceDirName:"how-to-guides",slug:"/how-to-guides/calibration",permalink:"/evolve/docs/hosting-capacity-service/docs/next/how-to-guides/calibration",draft:!1,tags:[],version:"current",frontMatter:{id:"calibration",title:"How to run Model Calibration",slug:"/how-to-guides/calibration",toc_max_heading_level:4},sidebar:"theSidebar",previous:{title:"How to install Python",permalink:"/evolve/docs/hosting-capacity-service/docs/next/how-to-guides/install-python"},next:{title:"How to run Feeder Load Analysis",permalink:"/evolve/docs/hosting-capacity-service/docs/next/how-to-guides/feeder-load-analysis"}},d={},c=[{value:"What time to pick",id:"what-time-to-pick",level:2},{value:"Recommended Option",id:"recommended-option",level:2},{value:"Using the Hosting Capacity Runner tool",id:"using-the-hosting-capacity-runner-tool",level:3},{value:"Using the results",id:"using-the-results",level:2},{value:"Tap settings",id:"tap-settings",level:3},{value:"Raw Results",id:"raw-results",level:3}],u={toc:c},g="wrapper";function m(e){let{components:t}=e,a=(0,i.A)(e,r);return(0,o.yg)(g,(0,n.A)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"Calibration has been undergoing some development changes recently. If you encounter any problems or have questions, please contact Zepben support.")),(0,o.yg)("h1",{id:"how-to-run-a-model-calibration-work-package"},"How to Run a Model Calibration Work Package"),(0,o.yg)("p",null,"This page provides a guide for network model calibration within the Hosting Capacity Module. It yields a table of tap settings for each off-load transformer, which can then be used in future work packages to run time-series modelling with the inferred tap positions. It also produces a set of raw results per energy consumer highlighting modelled (simulated) and measured (real) voltages, which can be used to highlight impedance errors in the model and for validation analysis."),(0,o.yg)("h1",{id:"prerequisites"},"Prerequisites"),(0,o.yg)("p",null,"See the ",(0,o.yg)("a",{parentName:"p",href:"../how-to-guides/run-a-work-package"},"How to Run a Work Package")," guide for prerequisites on basic Work Package setup, which are the same for running a Model Calibration Work Package."),(0,o.yg)("p",null,"See the ",(0,o.yg)("a",{parentName:"p",href:"../reference/calibration-methodology"},"Model Calibration Methodology")," page for a detailed overview of the calibration process, including data requirements."),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"Only one set of tap settings can be used on a given Work Package. When running a Work Package, ensure you use the calibration results that include all feeders present in the Work Package")),(0,o.yg)("h2",{id:"what-time-to-pick"},"What time to pick"),(0,o.yg)("p",null,"Calibration can be used for two related but distinct things:"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Determining a best fit for off-load tap settings (the ",(0,o.yg)("inlineCode",{parentName:"p"},"calibrated_taps")," table) to use in general work packages\nFor this use case, it will work best using a time of minimum load. This may vary by network, but is typically around 4am. ")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Measuring raw results per energy consumer, highlighting modelled (simulated) and measured (real) voltages, which can be used to highlight impedance errors in the model and for further analysis.\nFor this use case, you may want to try a number of different conditions, for periods such as 7am, 12pm, 7pm, and 4am could be useful to explore periods of medium demand, high generation, high demand, and low demand respectively."))),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"Make sure the time you specify has available PQV data in the database, otherwise the calibration will not run successfully. Not all times will have PQV data available, and will depend on the data you have ingested into the system. To see details of how the PQV data was used, see the logs for detailed information on an individual calibration run. Contact Zepben support if you need help with this.")),(0,o.yg)("h1",{id:"how-to-run"},"How to Run"),(0,o.yg)("h2",{id:"recommended-option"},"Recommended Option"),(0,o.yg)("h3",{id:"using-the-hosting-capacity-runner-tool"},"Using the Hosting Capacity Runner tool"),(0,o.yg)("p",null,"The Hosting Capacity Runner tool provides a user interface to run Model Calibration Work Packages."),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Clone the ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/Zepben/hosting-capacity-runner"},"Hosting Capacity Runner")," repository. Ensure requirements are installed by running ",(0,o.yg)("inlineCode",{parentName:"p"},"pip install -r requirements.txt"),". Check the ",(0,o.yg)("inlineCode",{parentName:"p"},"README.md")," and ensure other prerequisites are as per the general ",(0,o.yg)("a",{parentName:"p",href:"../how-to-guides/run-a-work-package"},"Hosting Capacity Module prerequisites"),".")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Open the ",(0,o.yg)("inlineCode",{parentName:"p"},"run_calibration.py")," file in the ",(0,o.yg)("inlineCode",{parentName:"p"},"hosting_capacity_runner")," directory.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Update the ",(0,o.yg)("inlineCode",{parentName:"p"},"calibration_name"),", ",(0,o.yg)("inlineCode",{parentName:"p"},"calibration_time_local"),", ",(0,o.yg)("inlineCode",{parentName:"p"},"feeder_mrids")," parameters in the script to match your requirements. Note that the time is the local time of the calibration in ISO 8601 format (it should not have a timezone offset, as the calibration time is assumed to be in the local timezone of the network model, which is set up in the underlying model). To run calibration for all feeders in the network, see the note in the file. "))),(0,o.yg)("p",null,"3a. If you want to use a set of off-load transformer tap settings from a previous calibration run (as you are interested in the voltage difference with the new taps), then uncomment the ",(0,o.yg)("inlineCode",{parentName:"p"},"transformer_tap_settings")," line and use the ",(0,o.yg)("inlineCode",{parentName:"p"},"calibration_name")," used previously as the value."),(0,o.yg)("p",null,"3b. If you want to use a full ",(0,o.yg)("inlineCode",{parentName:"p"},"generator_config"),", you can directly copy-and-paste it from your standard run work package file into the ",(0,o.yg)("inlineCode",{parentName:"p"},"generator_config")," section, being sure to get the bracketing correct. "),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"Note that the calibration workflow will always ignore certain parameters in the generator_config. Leaving them in will cause no issues, they will simply be ignored in favour of the values needed to make calibration work. These values are:\n",(0,o.yg)("inlineCode",{parentName:"p"},"calibration"),", ",(0,o.yg)("inlineCode",{parentName:"p"},"meter_placement_config"),", ",(0,o.yg)("inlineCode",{parentName:"p"},"step_size_minutes"),", and ",(0,o.yg)("inlineCode",{parentName:"p"},"raw_results"),".")),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"If a ",(0,o.yg)("inlineCode",{parentName:"p"},"transformer_tap_settings")," is provided directly, it will take precedence over any ",(0,o.yg)("inlineCode",{parentName:"p"},"transformer_tap_settings")," supplied inside the ",(0,o.yg)("inlineCode",{parentName:"p"},"generator_config")," parameter."),(0,o.yg)("ol",{parentName:"admonition",start:4},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Run the script using your IDE.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"To check the status of the Work Package, you can use the ",(0,o.yg)("inlineCode",{parentName:"p"},"monitor_calibration_run.py")," function in the same directory, using the ",(0,o.yg)("inlineCode",{parentName:"p"},"calibration_id")," returned by the ",(0,o.yg)("inlineCode",{parentName:"p"},"run_calibration.py")," script."))),(0,o.yg)("h1",{parentName:"admonition",id:"alternative-methods"},"Alternative Methods"),(0,o.yg)("h3",{parentName:"admonition",id:"using-the-eas-client-python-library"},"Using the EAS Client Python Library"),(0,o.yg)("p",{parentName:"admonition"},"If you prefer to use the EAS Client Python Library directly, you can run a Model Calibration Work Package using the ",(0,o.yg)("inlineCode",{parentName:"p"},"run_hosting_capacity_calibration")," method."),(0,o.yg)("p",{parentName:"admonition"},"In the ",(0,o.yg)("inlineCode",{parentName:"p"},"eas-client-python")," client, run:"),(0,o.yg)("pre",{parentName:"admonition"},(0,o.yg)("code",{parentName:"pre",className:"language-python"},'run_hosting_capacity_calibration(`calibration_name`, `local_calibration_time`,["`feeder1`", "`feeder2`", "`feeder3etc`"], `transformer_tap_settings`, `generator_config`)\n')),(0,o.yg)("p",{parentName:"admonition"},"This will start a Model Calibration Work Package with the specified name, time and feeders. ",(0,o.yg)("inlineCode",{parentName:"p"},"transformer_tap_settings")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"generator_config")," are optional, see above for more info."),(0,o.yg)("h3",{parentName:"admonition",id:"using-graphql"},"Using GraphQL"),(0,o.yg)("p",{parentName:"admonition"},"Run a GraphQL query to start a Model Calibration Work Package."),(0,o.yg)("pre",{parentName:"admonition"},(0,o.yg)("code",{parentName:"pre",className:"language-graphql"},'mutation {runCalibration(calibrationName: "tap_settings_42", calibrationTimeLocal: "2025-01-15T00:00:00" , feeders: ["feeder1", "feeder2", "feeder3etc"], generatorConfig: {\nmodel: {\n        load_vmax_pu=1.2,\n        etc. \n       }\n  }\n)\n}\n')),(0,o.yg)("p",{parentName:"admonition"},"This will start a Model Calibration Work Package.")),(0,o.yg)("p",null,"The QraphQL doesn't have a separate argument for the transformer tap settings. That must be set by providing a generatorConfig.\n:::"),(0,o.yg)("h2",{id:"using-the-results"},"Using the results"),(0,o.yg)("h3",{id:"tap-settings"},"Tap settings"),(0,o.yg)("p",null,"The tap settings from a calibration run are stored in the input database (input as they form part of the inputs to a regular work package), in a table called ",(0,o.yg)("inlineCode",{parentName:"p"},"calibrated_taps"),". See the Calibrated Taps Table in the ",(0,o.yg)("a",{parentName:"p",href:"../reference/input-tables"},"Input Tables")," section for a full breakdown. These can then be called by their unique name in a Work Package config for use in that Work Package."),(0,o.yg)("h3",{id:"raw-results"},"Raw Results"),(0,o.yg)("p",null,"The raw results of the calibration run are stored in the ",(0,o.yg)("inlineCode",{parentName:"p"},"calibration_meter_results")," table, which is stored in the results database. See the Calibration Meter results in the ",(0,o.yg)("a",{parentName:"p",href:"../reference/output-tables"},"Results Tables")," section for a full breakdown."),(0,o.yg)("p",null,"For more info see the ",(0,o.yg)("a",{parentName:"p",href:"../reference/calibration-methodology"},"Model Calibration Methodology")," page, which provides a detailed overview of the calibration process, including data ingestion, model adjustments, load flow execution, and off-load tap position determination."),(0,o.yg)("p",null,"And the ",(0,o.yg)("a",{parentName:"p",href:"../explanation/calibration-concepts"},"What is Network Model Calibration and why is it useful?")," page for an overview of the concepts behind network model calibration, its importance, and how it can be applied to improve the accuracy of power system models."))}m.isMDXComponent=!0},5680:(e,t,a)=>{a.d(t,{xA:()=>d,yg:()=>m});var n=a(6540);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=p(a),g=i,m=c["".concat(s,".").concat(g)]||c[g]||u[g]||o;return a?n.createElement(m,r(r({ref:t},d),{},{components:a})):n.createElement(m,r({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,r=new Array(o);r[0]=g;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<o;p++)r[p]=a[p];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"}}]);