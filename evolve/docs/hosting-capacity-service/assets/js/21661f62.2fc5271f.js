"use strict";(self.webpackChunkhosting_capacity_service=self.webpackChunkhosting_capacity_service||[]).push([["2466"],{989:function(e,s,n){n.r(s),n.d(s,{metadata:()=>i,default:()=>h,frontMatter:()=>l,contentTitle:()=>d,toc:()=>c,assets:()=>o});var i=JSON.parse('{"id":"how-to-guides/data-validation-scripts","title":"Data Validation Scripts","description":"Data validation scripts are provided as-is without formal support. They are intended to test data validation as we develop more formal data validation tools.","source":"@site/docs/how-to-guides/data-validation-scripts.mdx","sourceDirName":"how-to-guides","slug":"/how-to-guides/data-validation-scripts","permalink":"/evolve/docs/hosting-capacity-service/next/how-to-guides/data-validation-scripts","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"data-validation-scripts","title":"Data Validation Scripts","slug":"/how-to-guides/data-validation-scripts","toc_max_heading_level":4}}'),r=n(4848),t=n(8453);let l={id:"data-validation-scripts",title:"Data Validation Scripts",slug:"/how-to-guides/data-validation-scripts",toc_max_heading_level:4},d="Data Validation Scripts for Hosting Capacity Model (HCM)",o={},c=[{value:"1. Scenario Configuration Validator",id:"1-scenario-configuration-validator",level:2},{value:"What It Does",id:"what-it-does",level:3},{value:"How to Use",id:"how-to-use",level:3},{value:"Understanding the Results",id:"understanding-the-results",level:3},{value:"Core Information",id:"core-information",level:4},{value:"Validation Checks",id:"validation-checks",level:4},{value:"Data Coverage Metrics",id:"data-coverage-metrics",level:4},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:3},{value:"2. Profile Completeness Validator",id:"2-profile-completeness-validator",level:2},{value:"What It Does",id:"what-it-does-1",level:3},{value:"How to Use",id:"how-to-use-1",level:3},{value:"Understanding the Results",id:"understanding-the-results-1",level:3},{value:"Core Information",id:"core-information-1",level:4},{value:"Validation Checks",id:"validation-checks-1",level:4},{value:"Statistical Summary",id:"statistical-summary",level:4},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues-1",level:3},{value:"Configuration Requirements",id:"configuration-requirements",level:3},{value:"3. Feeder Equipment Analysis",id:"3-feeder-equipment-analysis",level:2},{value:"What It Does",id:"what-it-does-2",level:3},{value:"How to Use",id:"how-to-use-2",level:3},{value:"Understanding the Results",id:"understanding-the-results-2",level:3},{value:"Core Equipment Counts",id:"core-equipment-counts",level:4},{value:"Switch Type Breakdown",id:"switch-type-breakdown",level:4},{value:"Power Electronics",id:"power-electronics",level:4},{value:"Full Mode Additional Data",id:"full-mode-additional-data",level:4},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues-2",level:3},{value:"4. Load Data Coverage Tool",id:"4-load-data-coverage-tool",level:2},{value:"What It Does",id:"what-it-does-3",level:3},{value:"How to Use",id:"how-to-use-3",level:3},{value:"Understanding the Results",id:"understanding-the-results-3",level:3},{value:"Script Outputs",id:"script-outputs",level:4},{value:"Output Files",id:"output-files",level:4},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues-3",level:3}];function a(e){let s={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"data-validation-scripts-for-hosting-capacity-model-hcm",children:"Data Validation Scripts for Hosting Capacity Model (HCM)"})}),"\n",(0,r.jsx)(s.admonition,{title:"Unsupported",type:"info",children:(0,r.jsx)(s.p,{children:"Data validation scripts are provided as-is without formal support. They are intended to test data validation as we develop more formal data validation tools."})}),"\n",(0,r.jsx)(s.p,{children:"This document describes three data validation scripts that ensure data integrity before running HCM work packages. Each tool prevents runtime errors by validating different aspects of the input data pipeline."}),"\n",(0,r.jsx)(s.h2,{id:"1-scenario-configuration-validator",children:"1. Scenario Configuration Validator"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"File:"})," ",(0,r.jsx)(s.code,{children:"scenario_config_validation.py"})]}),"\n",(0,r.jsx)(s.h3,{id:"what-it-does",children:"What It Does"}),"\n",(0,r.jsxs)(s.p,{children:["Validates the ",(0,r.jsx)(s.code,{children:"scenario_configuration"})," input table against all related reference tables to ensure scenario setups are complete and correct before HCM execution."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Key validations include:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Scenario naming and ID uniqueness"}),"\n",(0,r.jsx)(s.li,{children:"Reference integrity (allocation IDs, forecast scenarios, profile IDs)"}),"\n",(0,r.jsx)(s.li,{children:"Data consistency across forecast levels"}),"\n",(0,r.jsx)(s.li,{children:"Business logic validation (probability weights, POE values)"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"how-to-use",children:"How to Use"}),"\n",(0,r.jsx)(s.p,{children:"The validator automatically:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Connects to the input database via SSH tunnel"}),"\n",(0,r.jsx)(s.li,{children:"Loads all reference data into memory"}),"\n",(0,r.jsx)(s.li,{children:"Runs 8 validation checks on each scenario"}),"\n",(0,r.jsxs)(s.li,{children:["Outputs results to timestamped CSV file: ",(0,r.jsx)(s.code,{children:"scenario_config_validation_YYYY-MM-DD_HH-MM.csv"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"understanding-the-results",children:"Understanding the Results"}),"\n",(0,r.jsx)(s.h4,{id:"core-information",children:"Core Information"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"scenario_id"})," - Unique scenario identifier"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"scenario_name"})," - Human-readable scenario name"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"overall_status"})," - ",(0,r.jsx)(s.strong,{children:"PASS"})," (all checks pass) or ",(0,r.jsx)(s.strong,{children:"FAIL"})," (issues found)"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"validation-checks",children:"Validation Checks"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Check Type"}),(0,r.jsx)(s.th,{children:"What It Validates"}),(0,r.jsx)(s.th,{children:"Pass/Fail Indicators"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"basic_checks"})}),(0,r.jsx)(s.td,{children:"Scenario naming and uniqueness"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"scenario_name='base'"})," forbidden ",(0,r.jsx)("br",{})," No duplicate ",(0,r.jsx)(s.code,{children:"scenario_id"})," values"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"forecast_level_checks"})}),(0,r.jsx)(s.td,{children:"Valid forecast aggregation levels"}),(0,r.jsxs)(s.td,{children:["Must be one of: ",(0,r.jsx)(s.code,{children:"LV_FEEDER"}),", ",(0,r.jsx)(s.code,{children:"FEEDER"}),", ",(0,r.jsx)(s.code,{children:"SUBSTATION"}),", ",(0,r.jsx)(s.code,{children:"SUB_GEOGRAPHICAL_REGION"}),", ",(0,r.jsx)(s.code,{children:"GEOGRAPHICAL_REGION"})]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"allocation_id_checks"})}),(0,r.jsx)(s.td,{children:"Allocation table references exist"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"pv_allocation_id"}),", ",(0,r.jsx)(s.code,{children:"ev_allocation_id"}),", ",(0,r.jsx)(s.code,{children:"bess_allocation_id"})," must exist in respective allocation tables"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"forecast_scenario_checks"})}),(0,r.jsx)(s.td,{children:"Forecast scenario references exist"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"pv_forecasts_scenario"}),", ",(0,r.jsx)(s.code,{children:"ev_forecasts_scenario"}),", ",(0,r.jsx)(s.code,{children:"bess_forecasts_scenario"}),", ",(0,r.jsx)(s.code,{children:"demand_forecasts_scenario"})," must exist"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"cross_validation_checks"})}),(0,r.jsx)(s.td,{children:"Forecast level consistency"}),(0,r.jsx)(s.td,{children:"Specified forecast level must have actual data in the forecast scenario"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"demand_poe_checks"})}),(0,r.jsx)(s.td,{children:"Probability of Exceedance validity"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"demand_forecast_poe"})," must exist in demand forecast data"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"probability_weights_checks"})}),(0,r.jsx)(s.td,{children:"Allocation probability math"}),(0,r.jsx)(s.td,{children:"Weights must sum to 1.0 per feeder in each allocation"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"profile_existence_checks"})}),(0,r.jsx)(s.td,{children:"Profile reference integrity"}),(0,r.jsx)(s.td,{children:"All profile IDs in allocations must exist in profile tables"})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"data-coverage-metrics",children:"Data Coverage Metrics"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"pv_forecast_codes_count"})," - Number of network codes in PV forecast scenario"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ev_forecast_codes_count"})," - Number of network codes in EV forecast scenario"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"bess_forecast_codes_count"})," - Number of network codes in BESS forecast scenario"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Error Message"}),(0,r.jsx)(s.th,{children:"Cause"}),(0,r.jsx)(s.th,{children:"Solution"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"scenario_name='base' is forbidden"})}),(0,r.jsx)(s.td,{children:"Reserved scenario name used"}),(0,r.jsx)(s.td,{children:"Rename scenario to avoid 'base'"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"allocation_id does not exist"})}),(0,r.jsx)(s.td,{children:"Missing or mistyped allocation ID"}),(0,r.jsx)(s.td,{children:"Verify allocation exists in reference table"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"forecast_scenario does not exist"})}),(0,r.jsx)(s.td,{children:"Missing forecast data"}),(0,r.jsx)(s.td,{children:"Create forecast or fix scenario reference"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"forecast_level not found in scenario"})}),(0,r.jsx)(s.td,{children:"Data/configuration mismatch"}),(0,r.jsx)(s.td,{children:"Use correct forecast level or update forecast data"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"feeder weights sum to X, not 1.0"})}),(0,r.jsx)(s.td,{children:"Incorrect probability distribution"}),(0,r.jsx)(s.td,{children:"Adjust allocation weights to sum to 1.0 per feeder"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"references missing profile_id"})}),(0,r.jsx)(s.td,{children:"Missing profile data"}),(0,r.jsx)(s.td,{children:"Create missing profiles or fix allocation references"})]})]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"2-profile-completeness-validator",children:"2. Profile Completeness Validator"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"File:"})," ",(0,r.jsx)(s.code,{children:"profile_completeness_validator.py"})]}),"\n",(0,r.jsx)(s.h3,{id:"what-it-does-1",children:"What It Does"}),"\n",(0,r.jsxs)(s.p,{children:["Validates DER profile data tables (",(0,r.jsx)(s.code,{children:"pv_profiles"}),", ",(0,r.jsx)(s.code,{children:"ev_profiles"}),", ",(0,r.jsx)(s.code,{children:"bess_profiles"}),") to ensure power time-series arrays are complete, correctly formatted, and contain realistic values."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Key validations include:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Power array completeness and length verification"}),"\n",(0,r.jsx)(s.li,{children:"Normalized power value range checking"}),"\n",(0,r.jsx)(s.li,{children:"Technology-specific metadata validation"}),"\n",(0,r.jsx)(s.li,{children:"Statistical analysis of profile characteristics"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"how-to-use-1",children:"How to Use"}),"\n",(0,r.jsx)(s.p,{children:"The validator automatically:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Connects to the input database via SSH tunnel"}),"\n",(0,r.jsx)(s.li,{children:"Processes each DER type (PV, EV, BESS) separately"}),"\n",(0,r.jsx)(s.li,{children:"Validates profile metadata and power arrays"}),"\n",(0,r.jsxs)(s.li,{children:["Outputs results to timestamped CSV file: ",(0,r.jsx)(s.code,{children:"profile_validation_YYYY-MM-DD_HH-MM.csv"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"understanding-the-results-1",children:"Understanding the Results"}),"\n",(0,r.jsx)(s.p,{children:"Each profile gets one row in the output CSV with validation results and statistics:"}),"\n",(0,r.jsx)(s.h4,{id:"core-information-1",children:"Core Information"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"der_type"})," - Technology type (PV, EV, or BESS)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"profile_id"})," - Unique profile identifier"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"overall_status"})," - ",(0,r.jsx)(s.strong,{children:"PASS"})," (all checks pass) or ",(0,r.jsx)(s.strong,{children:"FAIL"})," (issues found)"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"validation-checks-1",children:"Validation Checks"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Check Type"}),(0,r.jsx)(s.th,{children:"What It Validates"}),(0,r.jsx)(s.th,{children:"Technology-Specific Rules"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"basic_checks"})}),(0,r.jsx)(s.td,{children:"Metadata field validity"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.strong,{children:"All:"})," ",(0,r.jsx)(s.code,{children:"phases"})," must be 1 or 3",(0,r.jsx)("br",{}),(0,r.jsx)(s.strong,{children:"PV:"})," ",(0,r.jsx)(s.code,{children:"dc_ac_ratio"})," between 1.0-2.0",(0,r.jsx)("br",{}),(0,r.jsx)(s.strong,{children:"BESS:"})," ",(0,r.jsx)(s.code,{children:"round_trip_efficiency"})," between 0.0-1.0"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"array_length_checks"})}),(0,r.jsx)(s.td,{children:"Power array completeness"}),(0,r.jsxs)(s.td,{children:["Expected 17,520 intervals (standard year) or 17,568 (leap year)",(0,r.jsx)("br",{}),"Reports shortfall if incomplete"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.strong,{children:"array_validation_checks"})}),(0,r.jsx)(s.td,{children:"Power value ranges"}),(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.strong,{children:"PV:"})," 0.0 to 1.0 \xb1 tolerance",(0,r.jsx)("br",{}),(0,r.jsx)(s.strong,{children:"EV/BESS:"})," -1.0 to 1.0 \xb1 tolerance",(0,r.jsx)("br",{}),"Accounts for floating-point precision"]})]})]})]}),"\n",(0,r.jsx)(s.h4,{id:"statistical-summary",children:"Statistical Summary"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"min_value"})," - Minimum power value in array"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"max_value"})," - Maximum power value in array"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"mean_value"})," - Average power value"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"median_value"})," - Median power value"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"troubleshooting-common-issues-1",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Error Pattern"}),(0,r.jsx)(s.th,{children:"Cause"}),(0,r.jsx)(s.th,{children:"Solution"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"dc_ac_ratio=0.8 should be between 1.0 and 2.0"})}),(0,r.jsx)(s.td,{children:"Unrealistic PV inverter sizing"}),(0,r.jsx)(s.td,{children:"Verify system specifications and data collection"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"expected=17520|actual=17000|shortfall=520"})}),(0,r.jsx)(s.td,{children:"Missing time intervals"}),(0,r.jsx)(s.td,{children:"Check for data collection gaps, ensure full year coverage"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"expected=17520|actual=0|shortfall=17520"})}),(0,r.jsx)(s.td,{children:"Empty power array"}),(0,r.jsx)(s.td,{children:"Profile data not loaded properly, check import process"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"max_value=1.050000, above normalized range"})}),(0,r.jsx)(s.td,{children:"Normalization errors"}),(0,r.jsx)(s.td,{children:"Review power normalization method and rated capacity"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"min_value=-0.050000, below PV tolerance"})}),(0,r.jsx)(s.td,{children:"PV showing negative generation"}),(0,r.jsx)(s.td,{children:"Check sensor calibration and data processing"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"round_trip_efficiency=1.2 must be between 0.0 and 1.0"})}),(0,r.jsx)(s.td,{children:"Invalid BESS efficiency"}),(0,r.jsx)(s.td,{children:"Verify battery specifications and calculation methods"})]})]})]}),"\n",(0,r.jsx)(s.h3,{id:"configuration-requirements",children:"Configuration Requirements"}),"\n",(0,r.jsxs)(s.p,{children:["Requires ",(0,r.jsx)(s.code,{children:"profile_completeness_validator_config.yml"})," with:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Database connection parameters"}),"\n",(0,r.jsx)(s.li,{children:"Validation thresholds and tolerances"}),"\n",(0,r.jsx)(s.li,{children:"Expected data ranges per technology"}),"\n",(0,r.jsx)(s.li,{children:"Array size expectations"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"3-feeder-equipment-analysis",children:"3. Feeder Equipment Analysis"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"File:"})," ",(0,r.jsx)(s.code,{children:"feeder_equipment_analysis.py"})]}),"\n",(0,r.jsx)(s.h3,{id:"what-it-does-2",children:"What It Does"}),"\n",(0,r.jsx)(s.p,{children:"Analyzes electrical network equipment across utility feeders using the Zepben network API. Provides comprehensive statistics on customer connections, transformers, switches, and power electronics to support network planning and analysis."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Analysis includes:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Usage point (customer connection) counts"}),"\n",(0,r.jsx)(s.li,{children:"Transformer inventories"}),"\n",(0,r.jsx)(s.li,{children:"Switch type breakdowns (breakers, disconnectors, fuses, etc.)"}),"\n",(0,r.jsx)(s.li,{children:"Power electronics capacity summaries"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"how-to-use-2",children:"How to Use"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Prerequisites:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Valid Zepben API access token in ",(0,r.jsx)(s.code,{children:"token.txt"})," file"]}),"\n",(0,r.jsx)(s.li,{children:"Network connectivity to Zepben API endpoint"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Configuration options:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:"FEEDER_SLICE = None  # Set to number to limit feeders (e.g., 10 for testing)\nSUMMARY_METRICS_ONLY = True  # False for detailed object breakdown\n"})}),"\n",(0,r.jsx)(s.p,{children:"The script automatically:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Authenticates with Zepben network API"}),"\n",(0,r.jsxs)(s.li,{children:["Discovers all available feeders (or subset if ",(0,r.jsx)(s.code,{children:"FEEDER_SLICE"})," set)"]}),"\n",(0,r.jsx)(s.li,{children:"Extracts equipment data for each feeder"}),"\n",(0,r.jsxs)(s.li,{children:["Exports results to: ",(0,r.jsx)(s.code,{children:"feeder_equipment_analysis_YYYY-MM-DD_HH-MM-SS.csv"})]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"understanding-the-results-2",children:"Understanding the Results"}),"\n",(0,r.jsx)(s.p,{children:"Results are sorted by usage point count (highest first) with the following columns:"}),"\n",(0,r.jsx)(s.h4,{id:"core-equipment-counts",children:"Core Equipment Counts"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"feeder"})," - Feeder identifier"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"usage_points"})," - Customer connection points (NMIs)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"transformers"})," - Power transformer count"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"total_switches"})," - All switching device count"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"switch-type-breakdown",children:"Switch Type Breakdown"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"s_breaker"})," - Circuit breakers"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"s_disconnector"})," - Disconnectors/isolators"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"s_fuse"})," - Fuses"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"s_jumper"})," - Jumpers"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"s_recloser"})," - Automatic reclosers"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"power-electronics",children:"Power Electronics"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"power_electronics"})," - Power electronics connection count"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"power_electronics_rated_kw"})," - Total rated capacity (kW)"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"full-mode-additional-data",children:"Full Mode Additional Data"}),"\n",(0,r.jsxs)(s.p,{children:["When ",(0,r.jsx)(s.code,{children:"SUMMARY_METRICS_ONLY = False"}),":"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"total_objects"})," - Total equipment objects in feeder"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"total_object_types"})," - Number of distinct object types"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"obj_[typename]"})," - Count of each specific equipment type"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"troubleshooting-common-issues-2",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Connection Problems:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Ensure ",(0,r.jsx)(s.code,{children:"token.txt"})," exists with valid access token"]}),"\n",(0,r.jsx)(s.li,{children:"Verify network connectivity to Zepben API"}),"\n",(0,r.jsx)(s.li,{children:"Check authentication token hasn't expired"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Performance Optimization:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Use ",(0,r.jsx)(s.code,{children:"FEEDER_SLICE"})," to limit analysis during testing (e.g., ",(0,r.jsx)(s.code,{children:"FEEDER_SLICE = 10"}),")"]}),"\n",(0,r.jsxs)(s.li,{children:["Enable ",(0,r.jsx)(s.code,{children:"SUMMARY_METRICS_ONLY = True"})," for faster processing"]}),"\n",(0,r.jsx)(s.li,{children:"Large networks may require 10+ minutes for complete analysis"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Data Quality Issues:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Zero equipment counts may indicate incomplete network model"}),"\n",(0,r.jsxs)(s.li,{children:["Missing power electronics ratings suggest incomplete ",(0,r.jsx)(s.code,{children:"rated_s"})," attributes"]}),"\n",(0,r.jsx)(s.li,{children:"Check console output for specific feeder processing errors"}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"4-load-data-coverage-tool",children:"4. Load Data Coverage Tool"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"File:"})," ",(0,r.jsx)(s.code,{children:"load-data-coverage-tool.py"})]}),"\n",(0,r.jsx)(s.h3,{id:"what-it-does-3",children:"What It Does"}),"\n",(0,r.jsx)(s.p,{children:"Validates smart meter data completeness by cross-referencing expected usage points from the EWB network model against actual measurement data in the database. Identifies meters with missing or incomplete readings over a specified time period."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Key features:"})}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Fetches all expected NMIs from EWB network hierarchy"}),"\n",(0,r.jsx)(s.li,{children:"Queries database for actual 30-minute interval reading counts"}),"\n",(0,r.jsx)(s.li,{children:"Calculates coverage percentages for each NMI"}),"\n",(0,r.jsx)(s.li,{children:"Outputs results in JSON or CSV format"}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"how-to-use-3",children:"How to Use"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Set Up"})}),"\n",(0,r.jsxs)(s.p,{children:["Set up the config file: (",(0,r.jsx)(s.code,{children:"load-data-coverage-tool-config.yml"}),")"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsx)(s.li,{children:"Check database config parameters. Ensure the db host, name, user, and password are correct."}),"\n",(0,r.jsxs)(s.li,{children:["Set the time period for coverage analysis by editing the ",(0,r.jsx)(s.code,{children:"timestamp"})," section."]}),"\n",(0,r.jsx)(s.li,{children:"Ensure the EWB network API token is valid and accessible."}),"\n",(0,r.jsxs)(s.li,{children:["Configure the output format to be either ",(0,r.jsx)(s.code,{children:"json"})," or ",(0,r.jsx)(s.code,{children:"csv"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Execution Flow:"})}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Query database"})," for existing readings (~2-3 minutes)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fetch feeders"})," from EWB network (~30 seconds)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Extract NMIs"})," from all feeders via multiprocessing (~15-20 minutes)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Cross-reference"})," and identify missing/incomplete data"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Calculate percentages"})," and generate reports"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Display summary"})," statistics"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Subsequent runs with the same date range skip data generation and only recalculate percentages (very fast)."}),"\n",(0,r.jsx)(s.h3,{id:"understanding-the-results-3",children:"Understanding the Results"}),"\n",(0,r.jsx)(s.h4,{id:"script-outputs",children:"Script Outputs"}),"\n",(0,r.jsx)(s.p,{children:"The script outputs a summary with three categories:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"============================================================\nDATA COVERAGE SUMMARY (2024-07-01 to 2024-08-01)\n============================================================\nTotal NMIs analyzed:     1,136,248\nComplete coverage:       686,989 (60.5%)\nPartial coverage:        8,235 (0.7%)\nNo data:                 441,024 (38.8%)\n============================================================\n"})}),"\n",(0,r.jsx)(s.p,{children:"The summary output shows three categories:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Complete coverage"})," - Smart meters with 100% of expected readings"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Partial coverage"})," - Smart meters with some data gaps (investigate these)"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"No data"})," - Typically basic (accumulation) meters without interval metering, or failed smart meters"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"output-files",children:"Output Files"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Raw data:"})," ",(0,r.jsx)(s.code,{children:"coverage_YYYY-MM-DD_to_YYYY-MM-DD.[json|csv]"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"NMIs with missing or incomplete data"}),"\n",(0,r.jsx)(s.li,{children:"Reading counts (null = no data found)"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Processed data:"})," ",(0,r.jsx)(s.code,{children:"processed_coverage_YYYY-MM-DD_to_YYYY-MM-DD.[json|csv]"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Coverage percentages (0.0-1.0 scale)"}),"\n",(0,r.jsx)(s.li,{children:"1.0 = 100% complete, 0.0 = no data"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"JSON format:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n    "NMI123456": 1.0,   // 100% coverage\n    "NMI789012": 0.0,   // No data\n    "NMI345678": 0.5    // 50% coverage\n}\n'})}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"CSV format:"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-csv",children:"NMI,Value\nNMI123456,1.0\nNMI789012,0.0\nNMI345678,0.5\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Note:"})," NMIs with no data include both basic meters (expected) and potentially failed smart meters. Basic meter penetration varies by feeder."]}),"\n",(0,r.jsx)(s.h3,{id:"troubleshooting-common-issues-3",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Issue"}),(0,r.jsx)(s.th,{children:"Cause"}),(0,r.jsx)(s.th,{children:"Solution"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Script reruns full extraction despite existing files"}),(0,r.jsx)(s.td,{children:"Output filename doesn't match date range in config"}),(0,r.jsx)(s.td,{children:"Verify config dates match existing output files; delete old files if date range changed"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Very slow execution (greater than 30-45 minutes)"}),(0,r.jsx)(s.td,{children:"Network/EWB connection issues or high system load"}),(0,r.jsx)(s.td,{children:"Check connectivity and retry; note that multiprocessing uses all CPU cores and may impact system performance"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:'"Config file not found" error'}),(0,r.jsx)(s.td,{children:"Running from wrong directory"}),(0,r.jsxs)(s.td,{children:["Ensure ",(0,r.jsx)(s.code,{children:"load-data-coverage-tool-config.yml"})," is in the same directory as the script"]})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"Invalid output format warning"}),(0,r.jsxs)(s.td,{children:["Typo in config ",(0,r.jsx)(s.code,{children:"output.format"})]}),(0,r.jsxs)(s.td,{children:["Must be exactly ",(0,r.jsx)(s.code,{children:"'json'"})," or ",(0,r.jsx)(s.code,{children:"'csv'"})," (case-insensitive)"]})]})]})]}),"\n",(0,r.jsx)(s.hr,{})]})}function h(e={}){let{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:function(e,s,n){n.d(s,{R:()=>l,x:()=>d});var i=n(6540);let r={},t=i.createContext(r);function l(e){let s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);