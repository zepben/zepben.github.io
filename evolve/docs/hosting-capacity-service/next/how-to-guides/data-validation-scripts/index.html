<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-how-to-guides/data-validation-scripts" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Data Validation Scripts | Hosting Capacity Service</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://zepben.github.io/evolve/docs/hosting-capacity-service/next/how-to-guides/data-validation-scripts><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docsearch:project content=hosting-capacity-service><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Data Validation Scripts | Hosting Capacity Service"><meta data-rh=true name=description content="Data validation scripts are provided as-is without formal support. They are intended to test data validation as we develop more formal data validation tools."><meta data-rh=true property=og:description content="Data validation scripts are provided as-is without formal support. They are intended to test data validation as we develop more formal data validation tools."><link data-rh=true rel=icon href=/evolve/docs/hosting-capacity-service/img/favicon.ico><link data-rh=true rel=canonical href=https://zepben.github.io/evolve/docs/hosting-capacity-service/next/how-to-guides/data-validation-scripts><link data-rh=true rel=alternate href=https://zepben.github.io/evolve/docs/hosting-capacity-service/next/how-to-guides/data-validation-scripts hreflang=en><link data-rh=true rel=alternate href=https://zepben.github.io/evolve/docs/hosting-capacity-service/next/how-to-guides/data-validation-scripts hreflang=x-default><link data-rh=true rel=preconnect href=https://3K6D3DR52K-dsn.algolia.net crossorigin=anonymous><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=G-JG9JB2RSST"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JG9JB2RSST",{})</script><link rel=search type=application/opensearchdescription+xml title="Hosting Capacity Service" href=/evolve/docs/hosting-capacity-service/opensearch.xml><link rel=stylesheet href=/evolve/docs/hosting-capacity-service/assets/css/styles.c1cb3c8e.css><script src=/evolve/docs/hosting-capacity-service/assets/js/runtime~main.f8ea8671.js defer></script><script src=/evolve/docs/hosting-capacity-service/assets/js/main.d7f0a3fb.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/evolve/docs/hosting-capacity-service/img/logo.svg><link rel=preload as=image href=/evolve/docs/hosting-capacity-service/img/logo-dark.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a href=https://www.zepben.com/ target=_blank rel="noopener noreferrer" class=navbar__brand><div class=navbar__logo><img src=/evolve/docs/hosting-capacity-service/img/logo.svg alt=Zepben class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/evolve/docs/hosting-capacity-service/img/logo-dark.svg alt=Zepben class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a href=https://zepben.github.io/evolve/docs target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Evolve</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/evolve/docs/hosting-capacity-service/>Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/evolve/docs/hosting-capacity-service/release-notes>Release Notes</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/evolve/docs/hosting-capacity-service/next/how-to-guides/data-validation-scripts>Next</a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/evolve/docs/hosting-capacity-service/next/how-to-guides/data-validation-scripts>Next</a><li><a class=dropdown__link href=/evolve/docs/hosting-capacity-service/0.6.1/>0.6.1</a><li><a class=dropdown__link href=/evolve/docs/hosting-capacity-service/0.6.0/>0.6.0</a><li><a class=dropdown__link href=/evolve/docs/hosting-capacity-service/0.5.1/>0.5.1</a><li><a class=dropdown__link href=/evolve/docs/hosting-capacity-service/0.5.0/>0.5.0</a><li><a class=dropdown__link href=/evolve/docs/hosting-capacity-service/0.0.0/>0.0.0</a></ul></div><a href=https://github.com/zepben/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="Zepben's GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role=alert><div>This is unreleased documentation for <!-- -->Hosting Capacity Service<!-- --> <b>Next</b> version.</div><div class=margin-top--md>For up-to-date documentation, see the <b><a href=/evolve/docs/hosting-capacity-service/0.6.1/>latest version</a></b> (<!-- -->0.6.1<!-- -->).</div></div><div class=docItemContainer_Djhp><article><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Data Validation Scripts for Hosting Capacity Model (HCM)</h1></header>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>Unsupported</div><div class=admonitionContent_BuS1><p>Data validation scripts are provided as-is without formal support. They are intended to test data validation as we develop more formal data validation tools.</div></div>
<p>This document describes three data validation scripts that ensure data integrity before running HCM work packages. Each tool prevents runtime errors by validating different aspects of the input data pipeline.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=1-scenario-configuration-validator>1. Scenario Configuration Validator<a href=#1-scenario-configuration-validator class=hash-link aria-label="Direct link to 1. Scenario Configuration Validator" title="Direct link to 1. Scenario Configuration Validator">​</a></h2>
<p><strong>File:</strong> <code>scenario_config_validation.py</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=what-it-does>What It Does<a href=#what-it-does class=hash-link aria-label="Direct link to What It Does" title="Direct link to What It Does">​</a></h3>
<p>Validates the <code>scenario_configuration</code> input table against all related reference tables to ensure scenario setups are complete and correct before HCM execution.</p>
<p><strong>Key validations include:</strong></p>
<ul>
<li>Scenario naming and ID uniqueness</li>
<li>Reference integrity (allocation IDs, forecast scenarios, profile IDs)</li>
<li>Data consistency across forecast levels</li>
<li>Business logic validation (probability weights, POE values)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=how-to-use>How to Use<a href=#how-to-use class=hash-link aria-label="Direct link to How to Use" title="Direct link to How to Use">​</a></h3>
<p>The validator automatically:</p>
<ol>
<li>Connects to the input database via SSH tunnel</li>
<li>Loads all reference data into memory</li>
<li>Runs 8 validation checks on each scenario</li>
<li>Outputs results to timestamped CSV file: <code>scenario_config_validation_YYYY-MM-DD_HH-MM.csv</code></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=understanding-the-results>Understanding the Results<a href=#understanding-the-results class=hash-link aria-label="Direct link to Understanding the Results" title="Direct link to Understanding the Results">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=core-information>Core Information<a href=#core-information class=hash-link aria-label="Direct link to Core Information" title="Direct link to Core Information">​</a></h4>
<ul>
<li><strong>scenario_id</strong> - Unique scenario identifier</li>
<li><strong>scenario_name</strong> - Human-readable scenario name</li>
<li><strong>overall_status</strong> - <strong>PASS</strong> (all checks pass) or <strong>FAIL</strong> (issues found)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=validation-checks>Validation Checks<a href=#validation-checks class=hash-link aria-label="Direct link to Validation Checks" title="Direct link to Validation Checks">​</a></h4>
<table><thead><tr><th>Check Type<th>What It Validates<th>Pass/Fail Indicators<tbody><tr><td><strong>basic_checks</strong><td>Scenario naming and uniqueness<td><code>scenario_name='base'</code> forbidden <br> No duplicate <code>scenario_id</code> values<tr><td><strong>forecast_level_checks</strong><td>Valid forecast aggregation levels<td>Must be one of: <code>LV_FEEDER</code>, <code>FEEDER</code>, <code>SUBSTATION</code>, <code>SUB_GEOGRAPHICAL_REGION</code>, <code>GEOGRAPHICAL_REGION</code><tr><td><strong>allocation_id_checks</strong><td>Allocation table references exist<td><code>pv_allocation_id</code>, <code>ev_allocation_id</code>, <code>bess_allocation_id</code> must exist in respective allocation tables<tr><td><strong>forecast_scenario_checks</strong><td>Forecast scenario references exist<td><code>pv_forecasts_scenario</code>, <code>ev_forecasts_scenario</code>, <code>bess_forecasts_scenario</code>, <code>demand_forecasts_scenario</code> must exist<tr><td><strong>cross_validation_checks</strong><td>Forecast level consistency<td>Specified forecast level must have actual data in the forecast scenario<tr><td><strong>demand_poe_checks</strong><td>Probability of Exceedance validity<td><code>demand_forecast_poe</code> must exist in demand forecast data<tr><td><strong>probability_weights_checks</strong><td>Allocation probability math<td>Weights must sum to 1.0 per feeder in each allocation<tr><td><strong>profile_existence_checks</strong><td>Profile reference integrity<td>All profile IDs in allocations must exist in profile tables</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=data-coverage-metrics>Data Coverage Metrics<a href=#data-coverage-metrics class=hash-link aria-label="Direct link to Data Coverage Metrics" title="Direct link to Data Coverage Metrics">​</a></h4>
<ul>
<li><strong>pv_forecast_codes_count</strong> - Number of network codes in PV forecast scenario</li>
<li><strong>ev_forecast_codes_count</strong> - Number of network codes in EV forecast scenario</li>
<li><strong>bess_forecast_codes_count</strong> - Number of network codes in BESS forecast scenario</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=troubleshooting-common-issues>Troubleshooting Common Issues<a href=#troubleshooting-common-issues class=hash-link aria-label="Direct link to Troubleshooting Common Issues" title="Direct link to Troubleshooting Common Issues">​</a></h3>
<table><thead><tr><th>Error Message<th>Cause<th>Solution<tbody><tr><td><code>scenario_name='base' is forbidden</code><td>Reserved scenario name used<td>Rename scenario to avoid 'base'<tr><td><code>allocation_id does not exist</code><td>Missing or mistyped allocation ID<td>Verify allocation exists in reference table<tr><td><code>forecast_scenario does not exist</code><td>Missing forecast data<td>Create forecast or fix scenario reference<tr><td><code>forecast_level not found in scenario</code><td>Data/configuration mismatch<td>Use correct forecast level or update forecast data<tr><td><code>feeder weights sum to X, not 1.0</code><td>Incorrect probability distribution<td>Adjust allocation weights to sum to 1.0 per feeder<tr><td><code>references missing profile_id</code><td>Missing profile data<td>Create missing profiles or fix allocation references</table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=2-profile-completeness-validator>2. Profile Completeness Validator<a href=#2-profile-completeness-validator class=hash-link aria-label="Direct link to 2. Profile Completeness Validator" title="Direct link to 2. Profile Completeness Validator">​</a></h2>
<p><strong>File:</strong> <code>profile_completeness_validator.py</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=what-it-does-1>What It Does<a href=#what-it-does-1 class=hash-link aria-label="Direct link to What It Does" title="Direct link to What It Does">​</a></h3>
<p>Validates DER profile data tables (<code>pv_profiles</code>, <code>ev_profiles</code>, <code>bess_profiles</code>) to ensure power time-series arrays are complete, correctly formatted, and contain realistic values.</p>
<p><strong>Key validations include:</strong></p>
<ul>
<li>Power array completeness and length verification</li>
<li>Normalized power value range checking</li>
<li>Technology-specific metadata validation</li>
<li>Statistical analysis of profile characteristics</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=how-to-use-1>How to Use<a href=#how-to-use-1 class=hash-link aria-label="Direct link to How to Use" title="Direct link to How to Use">​</a></h3>
<p>The validator automatically:</p>
<ol>
<li>Connects to the input database via SSH tunnel</li>
<li>Processes each DER type (PV, EV, BESS) separately</li>
<li>Validates profile metadata and power arrays</li>
<li>Outputs results to timestamped CSV file: <code>profile_validation_YYYY-MM-DD_HH-MM.csv</code></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=understanding-the-results-1>Understanding the Results<a href=#understanding-the-results-1 class=hash-link aria-label="Direct link to Understanding the Results" title="Direct link to Understanding the Results">​</a></h3>
<p>Each profile gets one row in the output CSV with validation results and statistics:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=core-information-1>Core Information<a href=#core-information-1 class=hash-link aria-label="Direct link to Core Information" title="Direct link to Core Information">​</a></h4>
<ul>
<li><strong>der_type</strong> - Technology type (PV, EV, or BESS)</li>
<li><strong>profile_id</strong> - Unique profile identifier</li>
<li><strong>overall_status</strong> - <strong>PASS</strong> (all checks pass) or <strong>FAIL</strong> (issues found)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=validation-checks-1>Validation Checks<a href=#validation-checks-1 class=hash-link aria-label="Direct link to Validation Checks" title="Direct link to Validation Checks">​</a></h4>
<table><thead><tr><th>Check Type<th>What It Validates<th>Technology-Specific Rules<tbody><tr><td><strong>basic_checks</strong><td>Metadata field validity<td><strong>All:</strong> <code>phases</code> must be 1 or 3<br><strong>PV:</strong> <code>dc_ac_ratio</code> between 1.0-2.0<br><strong>BESS:</strong> <code>round_trip_efficiency</code> between 0.0-1.0<tr><td><strong>array_length_checks</strong><td>Power array completeness<td>Expected 17,520 intervals (standard year) or 17,568 (leap year)<br>Reports shortfall if incomplete<tr><td><strong>array_validation_checks</strong><td>Power value ranges<td><strong>PV:</strong> 0.0 to 1.0 ± tolerance<br><strong>EV/BESS:</strong> -1.0 to 1.0 ± tolerance<br>Accounts for floating-point precision</table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=statistical-summary>Statistical Summary<a href=#statistical-summary class=hash-link aria-label="Direct link to Statistical Summary" title="Direct link to Statistical Summary">​</a></h4>
<ul>
<li><strong>min_value</strong> - Minimum power value in array</li>
<li><strong>max_value</strong> - Maximum power value in array</li>
<li><strong>mean_value</strong> - Average power value</li>
<li><strong>median_value</strong> - Median power value</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=troubleshooting-common-issues-1>Troubleshooting Common Issues<a href=#troubleshooting-common-issues-1 class=hash-link aria-label="Direct link to Troubleshooting Common Issues" title="Direct link to Troubleshooting Common Issues">​</a></h3>
<table><thead><tr><th>Error Pattern<th>Cause<th>Solution<tbody><tr><td><code>dc_ac_ratio=0.8 should be between 1.0 and 2.0</code><td>Unrealistic PV inverter sizing<td>Verify system specifications and data collection<tr><td><code>expected=17520|actual=17000|shortfall=520</code><td>Missing time intervals<td>Check for data collection gaps, ensure full year coverage<tr><td><code>expected=17520|actual=0|shortfall=17520</code><td>Empty power array<td>Profile data not loaded properly, check import process<tr><td><code>max_value=1.050000, above normalized range</code><td>Normalization errors<td>Review power normalization method and rated capacity<tr><td><code>min_value=-0.050000, below PV tolerance</code><td>PV showing negative generation<td>Check sensor calibration and data processing<tr><td><code>round_trip_efficiency=1.2 must be between 0.0 and 1.0</code><td>Invalid BESS efficiency<td>Verify battery specifications and calculation methods</table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=configuration-requirements>Configuration Requirements<a href=#configuration-requirements class=hash-link aria-label="Direct link to Configuration Requirements" title="Direct link to Configuration Requirements">​</a></h3>
<p>Requires <code>profile_completeness_validator_config.yml</code> with:</p>
<ul>
<li>Database connection parameters</li>
<li>Validation thresholds and tolerances</li>
<li>Expected data ranges per technology</li>
<li>Array size expectations</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=3-feeder-equipment-analysis>3. Feeder Equipment Analysis<a href=#3-feeder-equipment-analysis class=hash-link aria-label="Direct link to 3. Feeder Equipment Analysis" title="Direct link to 3. Feeder Equipment Analysis">​</a></h2>
<p><strong>File:</strong> <code>feeder_equipment_analysis.py</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=what-it-does-2>What It Does<a href=#what-it-does-2 class=hash-link aria-label="Direct link to What It Does" title="Direct link to What It Does">​</a></h3>
<p>Analyzes electrical network equipment across utility feeders using the Zepben network API. Provides comprehensive statistics on customer connections, transformers, switches, and power electronics to support network planning and analysis.</p>
<p><strong>Analysis includes:</strong></p>
<ul>
<li>Usage point (customer connection) counts</li>
<li>Transformer inventories</li>
<li>Switch type breakdowns (breakers, disconnectors, fuses, etc.)</li>
<li>Power electronics capacity summaries</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=how-to-use-2>How to Use<a href=#how-to-use-2 class=hash-link aria-label="Direct link to How to Use" title="Direct link to How to Use">​</a></h3>
<p><strong>Prerequisites:</strong></p>
<ul>
<li>Valid Zepben API access token in <code>token.txt</code> file</li>
<li>Network connectivity to Zepben API endpoint</li>
</ul>
<p><strong>Configuration options:</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token plain">FEEDER_SLICE </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">None</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Set to number to limit feeders (e.g., 10 for testing)</span><span class="token plain"></span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">SUMMARY_METRICS_ONLY </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># False for detailed object breakdown</span><br></span></code></pre></div></div>
<p>The script automatically:</p>
<ol>
<li>Authenticates with Zepben network API</li>
<li>Discovers all available feeders (or subset if <code>FEEDER_SLICE</code> set)</li>
<li>Extracts equipment data for each feeder</li>
<li>Exports results to: <code>feeder_equipment_analysis_YYYY-MM-DD_HH-MM-SS.csv</code></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=understanding-the-results-2>Understanding the Results<a href=#understanding-the-results-2 class=hash-link aria-label="Direct link to Understanding the Results" title="Direct link to Understanding the Results">​</a></h3>
<p>Results are sorted by usage point count (highest first) with the following columns:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=core-equipment-counts>Core Equipment Counts<a href=#core-equipment-counts class=hash-link aria-label="Direct link to Core Equipment Counts" title="Direct link to Core Equipment Counts">​</a></h4>
<ul>
<li><strong>feeder</strong> - Feeder identifier</li>
<li><strong>usage_points</strong> - Customer connection points (NMIs)</li>
<li><strong>transformers</strong> - Power transformer count</li>
<li><strong>total_switches</strong> - All switching device count</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=switch-type-breakdown>Switch Type Breakdown<a href=#switch-type-breakdown class=hash-link aria-label="Direct link to Switch Type Breakdown" title="Direct link to Switch Type Breakdown">​</a></h4>
<ul>
<li><strong>s_breaker</strong> - Circuit breakers</li>
<li><strong>s_disconnector</strong> - Disconnectors/isolators</li>
<li><strong>s_fuse</strong> - Fuses</li>
<li><strong>s_jumper</strong> - Jumpers</li>
<li><strong>s_recloser</strong> - Automatic reclosers</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=power-electronics>Power Electronics<a href=#power-electronics class=hash-link aria-label="Direct link to Power Electronics" title="Direct link to Power Electronics">​</a></h4>
<ul>
<li><strong>power_electronics</strong> - Power electronics connection count</li>
<li><strong>power_electronics_rated_kw</strong> - Total rated capacity (kW)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=full-mode-additional-data>Full Mode Additional Data<a href=#full-mode-additional-data class=hash-link aria-label="Direct link to Full Mode Additional Data" title="Direct link to Full Mode Additional Data">​</a></h4>
<p>When <code>SUMMARY_METRICS_ONLY = False</code>:</p>
<ul>
<li><strong>total_objects</strong> - Total equipment objects in feeder</li>
<li><strong>total_object_types</strong> - Number of distinct object types</li>
<li><strong>obj_[typename]</strong> - Count of each specific equipment type</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=troubleshooting-common-issues-2>Troubleshooting Common Issues<a href=#troubleshooting-common-issues-2 class=hash-link aria-label="Direct link to Troubleshooting Common Issues" title="Direct link to Troubleshooting Common Issues">​</a></h3>
<p><strong>Connection Problems:</strong></p>
<ul>
<li>Ensure <code>token.txt</code> exists with valid access token</li>
<li>Verify network connectivity to Zepben API</li>
<li>Check authentication token hasn't expired</li>
</ul>
<p><strong>Performance Optimization:</strong></p>
<ul>
<li>Use <code>FEEDER_SLICE</code> to limit analysis during testing (e.g., <code>FEEDER_SLICE = 10</code>)</li>
<li>Enable <code>SUMMARY_METRICS_ONLY = True</code> for faster processing</li>
<li>Large networks may require 10+ minutes for complete analysis</li>
</ul>
<p><strong>Data Quality Issues:</strong></p>
<ul>
<li>Zero equipment counts may indicate incomplete network model</li>
<li>Missing power electronics ratings suggest incomplete <code>rated_s</code> attributes</li>
<li>Check console output for specific feeder processing errors</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=4-load-data-coverage-tool>4. Load Data Coverage Tool<a href=#4-load-data-coverage-tool class=hash-link aria-label="Direct link to 4. Load Data Coverage Tool" title="Direct link to 4. Load Data Coverage Tool">​</a></h2>
<p><strong>File:</strong> <code>load-data-coverage-tool.py</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=what-it-does-3>What It Does<a href=#what-it-does-3 class=hash-link aria-label="Direct link to What It Does" title="Direct link to What It Does">​</a></h3>
<p>Validates smart meter data completeness by cross-referencing expected usage points from the EWB network model against actual measurement data in the database. Identifies meters with missing or incomplete readings over a specified time period.</p>
<p><strong>Key features:</strong></p>
<ul>
<li>Fetches all expected NMIs from EWB network hierarchy</li>
<li>Queries database for actual 30-minute interval reading counts</li>
<li>Calculates coverage percentages for each NMI</li>
<li>Outputs results in JSON or CSV format</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=how-to-use-3>How to Use<a href=#how-to-use-3 class=hash-link aria-label="Direct link to How to Use" title="Direct link to How to Use">​</a></h3>
<p><strong>Set Up</strong></p>
<p>Set up the config file: (<code>load-data-coverage-tool-config.yml</code>)</p>
<ol>
<li>Check database config parameters. Ensure the db host, name, user, and password are correct.</li>
<li>Set the time period for coverage analysis by editing the <code>timestamp</code> section.</li>
<li>Ensure the EWB network API token is valid and accessible.</li>
<li>Configure the output format to be either <code>json</code> or <code>csv</code>.</li>
</ol>
<p><strong>Execution Flow:</strong></p>
<ol>
<li><strong>Query database</strong> for existing readings (~2-3 minutes)</li>
<li><strong>Fetch feeders</strong> from EWB network (~30 seconds)</li>
<li><strong>Extract NMIs</strong> from all feeders via multiprocessing (~15-20 minutes)</li>
<li><strong>Cross-reference</strong> and identify missing/incomplete data</li>
<li><strong>Calculate percentages</strong> and generate reports</li>
<li><strong>Display summary</strong> statistics</li>
</ol>
<p>Subsequent runs with the same date range skip data generation and only recalculate percentages (very fast).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=understanding-the-results-3>Understanding the Results<a href=#understanding-the-results-3 class=hash-link aria-label="Direct link to Understanding the Results" title="Direct link to Understanding the Results">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=script-outputs>Script Outputs<a href=#script-outputs class=hash-link aria-label="Direct link to Script Outputs" title="Direct link to Script Outputs">​</a></h4>
<p>The script outputs a summary with three categories:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token plain">============================================================</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">DATA COVERAGE SUMMARY (2024-07-01 to 2024-08-01)</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">============================================================</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">Total NMIs analyzed:     1,136,248</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">Complete coverage:       686,989 (60.5%)</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">Partial coverage:        8,235 (0.7%)</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">No data:                 441,024 (38.8%)</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">============================================================</span><br></span></code></pre></div></div>
<p>The summary output shows three categories:</p>
<ul>
<li><strong>Complete coverage</strong> - Smart meters with 100% of expected readings</li>
<li><strong>Partial coverage</strong> - Smart meters with some data gaps (investigate these)</li>
<li><strong>No data</strong> - Typically basic (accumulation) meters without interval metering, or failed smart meters</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=output-files>Output Files<a href=#output-files class=hash-link aria-label="Direct link to Output Files" title="Direct link to Output Files">​</a></h4>
<p><strong>Raw data:</strong> <code>coverage_YYYY-MM-DD_to_YYYY-MM-DD.[json|csv]</code></p>
<ul>
<li>NMIs with missing or incomplete data</li>
<li>Reading counts (null = no data found)</li>
</ul>
<p><strong>Processed data:</strong> <code>processed_coverage_YYYY-MM-DD_to_YYYY-MM-DD.[json|csv]</code></p>
<ul>
<li>Coverage percentages (0.0-1.0 scale)</li>
<li>1.0 = 100% complete, 0.0 = no data</li>
</ul>
<p><strong>JSON format:</strong></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-json codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"NMI123456"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 100% coverage</span><span class="token plain"></span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"NMI789012"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// No data</span><span class="token plain"></span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">    </span><span class="token property">"NMI345678"</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.5</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// 50% coverage</span><span class="token plain"></span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p><strong>CSV format:</strong></p>
<div class="language-csv codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#bfc7d5;--prism-background-color:#292d3e><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-csv codeBlock_bY9V thin-scrollbar" style=color:#bfc7d5;background-color:#292d3e><code class=codeBlockLines_e6Vv><span class=token-line style=color:#bfc7d5><span class="token plain">NMI,Value</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">NMI123456,1.0</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">NMI789012,0.0</span><br></span><span class=token-line style=color:#bfc7d5><span class="token plain">NMI345678,0.5</span><br></span></code></pre></div></div>
<p><strong>Note:</strong> NMIs with no data include both basic meters (expected) and potentially failed smart meters. Basic meter penetration varies by feeder.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=troubleshooting-common-issues-3>Troubleshooting Common Issues<a href=#troubleshooting-common-issues-3 class=hash-link aria-label="Direct link to Troubleshooting Common Issues" title="Direct link to Troubleshooting Common Issues">​</a></h3>
<table><thead><tr><th>Issue<th>Cause<th>Solution<tbody><tr><td>Script reruns full extraction despite existing files<td>Output filename doesn't match date range in config<td>Verify config dates match existing output files; delete old files if date range changed<tr><td>Very slow execution (greater than 30-45 minutes)<td>Network/EWB connection issues or high system load<td>Check connectivity and retry; note that multiprocessing uses all CPU cores and may impact system performance<tr><td>"Config file not found" error<td>Running from wrong directory<td>Ensure <code>load-data-coverage-tool-config.yml</code> is in the same directory as the script<tr><td>Invalid output format warning<td>Typo in config <code>output.format</code><td>Must be exactly <code>'json'</code> or <code>'csv'</code> (case-insensitive)</table>
<hr></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#1-scenario-configuration-validator class="table-of-contents__link toc-highlight">1. Scenario Configuration Validator</a><ul><li><a href=#what-it-does class="table-of-contents__link toc-highlight">What It Does</a><li><a href=#how-to-use class="table-of-contents__link toc-highlight">How to Use</a><li><a href=#understanding-the-results class="table-of-contents__link toc-highlight">Understanding the Results</a><ul><li><a href=#core-information class="table-of-contents__link toc-highlight">Core Information</a><li><a href=#validation-checks class="table-of-contents__link toc-highlight">Validation Checks</a><li><a href=#data-coverage-metrics class="table-of-contents__link toc-highlight">Data Coverage Metrics</a></ul><li><a href=#troubleshooting-common-issues class="table-of-contents__link toc-highlight">Troubleshooting Common Issues</a></ul><li><a href=#2-profile-completeness-validator class="table-of-contents__link toc-highlight">2. Profile Completeness Validator</a><ul><li><a href=#what-it-does-1 class="table-of-contents__link toc-highlight">What It Does</a><li><a href=#how-to-use-1 class="table-of-contents__link toc-highlight">How to Use</a><li><a href=#understanding-the-results-1 class="table-of-contents__link toc-highlight">Understanding the Results</a><ul><li><a href=#core-information-1 class="table-of-contents__link toc-highlight">Core Information</a><li><a href=#validation-checks-1 class="table-of-contents__link toc-highlight">Validation Checks</a><li><a href=#statistical-summary class="table-of-contents__link toc-highlight">Statistical Summary</a></ul><li><a href=#troubleshooting-common-issues-1 class="table-of-contents__link toc-highlight">Troubleshooting Common Issues</a><li><a href=#configuration-requirements class="table-of-contents__link toc-highlight">Configuration Requirements</a></ul><li><a href=#3-feeder-equipment-analysis class="table-of-contents__link toc-highlight">3. Feeder Equipment Analysis</a><ul><li><a href=#what-it-does-2 class="table-of-contents__link toc-highlight">What It Does</a><li><a href=#how-to-use-2 class="table-of-contents__link toc-highlight">How to Use</a><li><a href=#understanding-the-results-2 class="table-of-contents__link toc-highlight">Understanding the Results</a><ul><li><a href=#core-equipment-counts class="table-of-contents__link toc-highlight">Core Equipment Counts</a><li><a href=#switch-type-breakdown class="table-of-contents__link toc-highlight">Switch Type Breakdown</a><li><a href=#power-electronics class="table-of-contents__link toc-highlight">Power Electronics</a><li><a href=#full-mode-additional-data class="table-of-contents__link toc-highlight">Full Mode Additional Data</a></ul><li><a href=#troubleshooting-common-issues-2 class="table-of-contents__link toc-highlight">Troubleshooting Common Issues</a></ul><li><a href=#4-load-data-coverage-tool class="table-of-contents__link toc-highlight">4. Load Data Coverage Tool</a><ul><li><a href=#what-it-does-3 class="table-of-contents__link toc-highlight">What It Does</a><li><a href=#how-to-use-3 class="table-of-contents__link toc-highlight">How to Use</a><li><a href=#understanding-the-results-3 class="table-of-contents__link toc-highlight">Understanding the Results</a><ul><li><a href=#script-outputs class="table-of-contents__link toc-highlight">Script Outputs</a><li><a href=#output-files class="table-of-contents__link toc-highlight">Output Files</a></ul><li><a href=#troubleshooting-common-issues-3 class="table-of-contents__link toc-highlight">Troubleshooting Common Issues</a></ul></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2026 Zeppelin Bend Pty. Ltd.</div></div></div></footer></div>