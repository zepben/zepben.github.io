"use strict";(self.webpackChunkcommons=self.webpackChunkcommons||[]).push([["4935"],{4833:function(e,r,t){t.r(r),t.d(r,{metadata:()=>n,default:()=>d,frontMatter:()=>l,contentTitle:()=>c,toc:()=>m,assets:()=>u});var n=JSON.parse('{"id":"metrics-for-issues","title":"Metrics for Issues","description":"Motivation","source":"@site/versioned_docs/version-1.3.0/metrics-for-issues.mdx","sourceDirName":".","slug":"/metrics-for-issues","permalink":"/evolve/docs/commons/1.3.0/metrics-for-issues","draft":false,"unlisted":false,"tags":[],"version":"1.3.0","frontMatter":{"id":"metrics-for-issues","title":"Metrics for Issues"},"sidebar":"someSidebar","previous":{"title":"Network Simplifier","permalink":"/evolve/docs/commons/1.3.0/network-simplifier"},"next":{"title":"Phase Consistency Processor","permalink":"/evolve/docs/commons/1.3.0/phase-consistency"}}'),o=t(4848),s=t(8453),a=t(8010),i=t(7250);let l={id:"metrics-for-issues",title:"Metrics for Issues"},c,u={},m=[{value:"Motivation",id:"motivation",level:2},{value:"Network Container Metrics for Issues",id:"network-container-metrics-for-issues",level:2}];function p(e){let r={code:"code",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.h2,{id:"motivation",children:"Motivation"}),"\n",(0,o.jsx)(r.p,{children:"Issue trackers are useful for collecting and displaying problems with source data, but their usefulness is limited if these issues are not saved somewhere after\r\nthe run of an ingestor. This is why we added the ability for issue trackers to add metrics to the metrics database that correspond to each issue."}),"\n",(0,o.jsx)(r.h2,{id:"network-container-metrics-for-issues",children:"Network Container Metrics for Issues"}),"\n",(0,o.jsxs)(r.p,{children:["Network container metrics store quantitative metrics for network containers, e.g. feeders and substations. By connecting an ",(0,o.jsx)(r.code,{children:"IssueTracker"})," to a ",(0,o.jsx)(r.code,{children:"NetworkMetrics"}),"\r\nobject and supplying a ",(0,o.jsx)(r.code,{children:"metricName"}),", a metric with that name will be incremented each time the ",(0,o.jsx)(r.code,{children:"track()"})," method is called for that ",(0,o.jsx)(r.code,{children:"IssueTracker"}),". By default,\r\nthis metric will only be incremented for the ",(0,o.jsx)(r.code,{children:"TotalNetworkContainer"}),", but you may supply additional ",(0,o.jsx)(r.code,{children:"NetworkContainer"}),"s in the ",(0,o.jsx)(r.code,{children:"networkContainers"})," parameter."]}),"\n",(0,o.jsx)(a.A,{groupId:"code-example",defaultValue:"kotlin",values:[{label:"Kotlin",value:"kotlin"}],children:(0,o.jsx)(i.A,{value:"kotlin",children:(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-kotlin",children:'import com.zepben.ewb.cim.iec61970.base.core.Feeder\r\nimport com.zepben.ewb.metrics.NetworkMetrics\r\nimport com.zepben.ewb.metrics.TotalNetworkContainer\r\nimport com.zepben.ewb.metrics.toNetworkContainer\r\nimport com.zepben.ewb.issues.IssueTracker\r\nimport org.slf4j.Logger\r\nimport org.slf4j.LoggerFactory\r\n\r\nval logger: Logger = LoggerFactory.getLogger("Example")\r\n\r\nfun main() {\r\n    val networkMetrics = NetworkMetrics()\r\n    val exampleIssue = IssueTracker(logger, networkMetrics = networkMetrics, metricName = "Example Issue") { "issue was tracked $it times" }\r\n    val feeder = Feeder("FDR123").apply { name = "Feeder 123" }\r\n\r\n    exampleIssue.track("This message won\'t be saved to the network metrics")\r\n    exampleIssue.track("Neither will this one", networkContainers = listOf(feeder.toNetworkContainer()))\r\n\r\n    println("Number of times example issue was tracked in total: ${networkMetrics[TotalNetworkContainer]["Example Issue"]}")\r\n    println("Number of times example issue was tracked for the feeder: ${networkMetrics[feeder.toNetworkContainer()]["Example Issue"]}")\r\n}\n'})})})}),"\n",(0,o.jsxs)(r.p,{children:["For issue tracker groups, all issue trackers within the group can be assigned a common ",(0,o.jsx)(r.code,{children:"NetworkMetrics"})," and a default name with a single call to\r\n",(0,o.jsx)(r.code,{children:"setNetworkMetrics()"}),". The property name for each issue tracker within the group will be used as their default name:"]}),"\n",(0,o.jsx)(a.A,{groupId:"code-example",defaultValue:"kotlin",values:[{label:"Kotlin",value:"kotlin"}],children:(0,o.jsx)(i.A,{value:"kotlin",children:(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-kotlin",children:'import com.zepben.ewb.cim.iec61970.base.core.Feeder\r\nimport com.zepben.ewb.metrics.NetworkMetrics\r\nimport com.zepben.ewb.metrics.TotalNetworkContainer\r\nimport com.zepben.ewb.metrics.toNetworkContainer\r\nimport com.zepben.ewb.issues.IssueTracker\r\nimport com.zepben.ewb.issues.IssueTrackerGroup\r\nimport org.slf4j.Logger\r\nimport org.slf4j.LoggerFactory\r\n\r\nval logger: Logger = LoggerFactory.getLogger("Example")\r\n\r\nfun main() {\r\n    val networkMetrics = NetworkMetrics()\r\n    val exampleIssueTrackerGroup = object : IssueTrackerGroup() {\r\n        val exampleIssue = IssueTracker(logger) { "issue was tracked $it times" }\r\n    }.apply { setNetworkMetrics(networkMetrics) }\r\n    val feeder = Feeder("FDR123").apply { name = "Feeder 123" }\r\n\r\n    exampleIssueTrackerGroup.exampleIssue.track("This message won\'t be saved to the network metrics")\r\n    exampleIssueTrackerGroup.exampleIssue.track("Neither will this one", networkContainers = listOf(feeder.toNetworkContainer()))\r\n\r\n    println("Number of times example issue was tracked in total: ${networkMetrics[TotalNetworkContainer]["exampleIssue"]}")\r\n    println("Number of times example issue was tracked for the feeder: ${networkMetrics[feeder.toNetworkContainer()]["exampleIssue"]}")\r\n}\n'})})})})]})}function d(e={}){let{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},7250:function(e,r,t){t.d(r,{A:()=>s});var n=t(4848);t(6540);var o=t(4164);function s(e){let{children:r,hidden:t,className:s}=e;return(0,n.jsx)("div",{role:"tabpanel",className:(0,o.A)("tabItem_Ymn6",s),hidden:t,children:r})}},8010:function(e,r,t){t.d(r,{A:()=>g});var n=t(4848),o=t(6540),s=t(4164),a=t(8584),i=t(6347),l=t(9989),c=t(6629),u=t(618),m=t(1367);function p(e){var r,t;return null!=(t=null==(r=o.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){let{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw Error("Docusaurus error: Bad <Tabs> child <".concat("string"==typeof e.type?e.type:e.type.name,'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.'))}))?void 0:r.filter(Boolean))?t:[]}function d(e){let{value:r,tabValues:t}=e;return t.some(e=>e.value===r)}var f=t(9863);function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){var n;n=t[r],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return e}function h(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function w(e){let{className:r,block:t,selectedValue:o,selectValue:i,tabValues:l}=e,c=[],{blockElementScrollPositionUntilNextRender:u}=(0,a.a_)(),m=e=>{let r=e.currentTarget,t=l[c.indexOf(r)].value;t!==o&&(u(r),i(t))},p=e=>{var r,t;let n=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{let t=c.indexOf(e.currentTarget)+1;n=null!=(r=c[t])?r:c[0];break}case"ArrowLeft":{let r=c.indexOf(e.currentTarget)-1;n=null!=(t=c[r])?t:c[c.length-1]}}null==n||n.focus()};return(0,n.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":t},r),children:l.map(e=>{let{value:r,label:t,attributes:a}=e;return(0,n.jsx)("li",h(b({role:"tab",tabIndex:o===r?0:-1,"aria-selected":o===r,ref:e=>{c.push(e)},onKeyDown:p,onClick:m},a),{className:(0,s.A)("tabs__item","tabItem_LNqP",null==a?void 0:a.className,{"tabs__item--active":o===r}),children:null!=t?t:r}),r)})})}function k(e){let{lazy:r,children:t,selectedValue:a}=e,i=(Array.isArray(t)?t:[t]).filter(Boolean);if(r){let e=i.find(e=>e.props.value===a);return e?(0,o.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,n.jsx)("div",{className:"margin-top--md",children:i.map((e,r)=>(0,o.cloneElement)(e,{key:r,hidden:e.props.value!==a}))})}function v(e){let r=function(e){let r,{defaultValue:t,queryString:n=!1,groupId:s}=e,a=function(e){let{values:r,children:t}=e;return(0,o.useMemo)(()=>{let e=null!=r?r:p(t).map(e=>{let{props:{value:r,label:t,attributes:n,default:o}}=e;return{value:r,label:t,attributes:n,default:o}}),n=(0,u.XI)(e,(e,r)=>e.value===r.value);if(n.length>0)throw Error('Docusaurus error: Duplicate values "'.concat(n.map(e=>e.value).join(", "),'" found in <Tabs>. Every value needs to be unique.'));return e},[r,t])}(e),[f,b]=(0,o.useState)(()=>(function(e){var r;let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw Error('Docusaurus error: The <Tabs> has a defaultValue "'.concat(t,'" but none of its children has the corresponding value. Available values are: ').concat(n.map(e=>e.value).join(", "),". If you intend to show no default tab, use defaultValue={null} instead."));return t}let o=null!=(r=n.find(e=>e.default))?r:n[0];if(!o)throw Error("Unexpected error: 0 tabValues");return o.value})({defaultValue:t,tabValues:a})),[h,w]=function(e){let{queryString:r=!1,groupId:t}=e,n=(0,i.W6)(),s=function(e){let{queryString:r=!1,groupId:t}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!t)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:r,groupId:t});return[(0,c.aZ)(s),(0,o.useCallback)(e=>{var r,t;if(!s)return;let o=new URLSearchParams(n.location.search);o.set(s,e),n.replace((r=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){var n;n=t[r],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return e}({},n.location),t=t={search:o.toString()},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):(function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t})(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}),r))},[s,n])]}({queryString:n,groupId:s}),[k,v]=function(e){let{groupId:r}=e,t=r?"docusaurus.tab.".concat(r):null,[n,s]=(0,m.Dv)(t);return[n,(0,o.useCallback)(e=>{t&&s.set(e)},[t,s])]}({groupId:s}),g=d({value:r=null!=h?h:k,tabValues:a})?r:null;return(0,l.A)(()=>{g&&b(g)},[g]),{selectedValue:f,selectValue:(0,o.useCallback)(e=>{if(!d({value:e,tabValues:a}))throw Error("Can't select invalid tab value=".concat(e));b(e),w(e),v(e)},[w,v,a]),tabValues:a}}(e);return(0,n.jsxs)("div",{className:(0,s.A)("tabs-container","tabList__CuJ"),children:[(0,n.jsx)(w,b({},r,e)),(0,n.jsx)(k,b({},r,e))]})}function g(e){let r=(0,f.A)();return(0,n.jsx)(v,h(b({},e),{children:p(e.children)}),String(r))}},8453:function(e,r,t){t.d(r,{R:()=>a,x:()=>i});var n=t(6540);let o={},s=n.createContext(o);function a(e){let r=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),n.createElement(s.Provider,{value:r},e.children)}}}]);