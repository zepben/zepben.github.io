"use strict";(self.webpackChunkednar_app_server=self.webpackChunkednar_app_server||[]).push([["4707"],{44516:function(e,t,n){n.r(t),n.d(t,{metadata:()=>i,default:()=>h,frontMatter:()=>r,contentTitle:()=>o,toc:()=>c,assets:()=>l});var i=JSON.parse('{"id":"api-clients","title":"API Clients","description":"This page will walk through how to create and use API clients in EDNAR for machine-to-machine authentication.","source":"@site/versioned_docs/version-6.7.0/api-clients.md","sourceDirName":".","slug":"/api-clients","permalink":"/ednar/docs/ednar-app-server/6.7.0/api-clients","draft":false,"unlisted":false,"tags":[],"version":"6.7.0","frontMatter":{"id":"api-clients","title":"API Clients","slug":"/api-clients"},"sidebar":"version-6.7.0-sidebar","previous":{"title":"App Options","permalink":"/ednar/docs/ednar-app-server/6.7.0/app-options"},"next":{"title":"Calendar Events","permalink":"/ednar/docs/ednar-app-server/6.7.0/calendar-events"}}'),s=n(74848),a=n(28453);let r={id:"api-clients",title:"API Clients",slug:"/api-clients"},o,l={},c=[{value:"Creating API Clients",id:"creating-api-clients",level:2},{value:"Using API Clients for authentication",id:"using-api-clients-for-authentication",level:2}];function d(e){let t={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["This page will walk through how to create and use API clients in EDNAR for machine-to-machine authentication.\nTo create and manage API clients, you will need the ",(0,s.jsx)(t.code,{children:"ADMIN_API_CLIENTS"})," privilege."]}),"\n",(0,s.jsx)(t.h2,{id:"creating-api-clients",children:"Creating API Clients"}),"\n",(0,s.jsxs)(t.p,{children:["In the EDNAR Admin app, go to Configuration -> API Client Management\n",(0,s.jsx)(t.img,{alt:"APIClients1.png",src:n(32013).A+"",width:"658",height:"366"})]}),"\n",(0,s.jsxs)(t.p,{children:['Click "Create API Client"\n',(0,s.jsx)(t.img,{alt:"APIClients2.png",src:n(50390).A+"",width:"856",height:"361"})]}),"\n",(0,s.jsxs)(t.p,{children:["Give the API Client a description and assign it a role (the role will dictate what privileges the client has)\n",(0,s.jsx)(t.img,{alt:"APIClients3.png",src:n(46719).A+"",width:"848",height:"655"})]}),"\n",(0,s.jsxs)(t.p,{children:['Click "Save". You will be presented a Client Secret similar to this:\n',(0,s.jsx)(t.img,{alt:"APIClients4.png",src:n(95392).A+"",width:"632",height:"767"})]}),"\n",(0,s.jsx)(t.admonition,{title:"Important",type:"warning",children:(0,s.jsx)(t.p,{children:"You must copy the Client Secret and save it somewhere secure now - you won't be able to access it again!"})}),"\n",(0,s.jsx)(t.p,{children:"Back on the API Client form, you will now see a Client ID, which you can also copy by clicking the dotted box."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"APIClients5.png",src:n(66569).A+"",width:"854",height:"318"})}),"\n",(0,s.jsx)(t.h2,{id:"using-api-clients-for-authentication",children:"Using API Clients for authentication"}),"\n",(0,s.jsx)(t.p,{children:"To use your Client ID and Client Secret to authenticate with EDNAR, we use an OAuth2 flow. The easiest one is the OAuth2 Client Credentials flow."}),"\n",(0,s.jsxs)(t.p,{children:["In your preferred HTTP Client, configure Auth, and select OAuth2 from the list of available options.\n",(0,s.jsx)(t.img,{alt:"APIClients6.png",src:n(75858).A+"",width:"714",height:"862"})]}),"\n",(0,s.jsxs)(t.p,{children:['Fill in "Grant Type" as "Client Credentials" for this example.\n',(0,s.jsx)(t.img,{alt:"APIClients7.png",src:n(73723).A+"",width:"816",height:"420"})]}),"\n",(0,s.jsxs)(t.p,{children:["For access token URL, use the host where the EDNAR App Server is running, with the endpoint /api/token. Use your Client ID as the Client ID, and your Client Secret as the Client Secret:\n",(0,s.jsx)(t.img,{alt:"APIClients8.png",src:n(19564).A+"",width:"961",height:"353"})]}),"\n",(0,s.jsxs)(t.p,{children:['Click "Fetch Token" and it should issue you an Access Token:\n',(0,s.jsx)(t.img,{alt:"APIClients9.png",src:n(5013).A+"",width:"1092",height:"481"})]}),"\n",(0,s.jsxs)(t.p,{children:["Manually perform the OAuth2 Client Credentials flow rather than use a HTTP Client, you can follow the spec for a request here: ",(0,s.jsx)(t.a,{href:"https://datatracker.ietf.org/doc/html/rfc6749#section-1.3.4",children:"https://datatracker.ietf.org/doc/html/rfc6749#section-1.3.4"})]}),"\n",(0,s.jsx)(t.p,{children:"To do so, you need to make a POST request to /api/token with the following body encoded in x-www-form-urlencoded format with the following parameters:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"grant_type=client_credentials&\nclient_id=<YOUR_CLIENT_ID>&\nclient_secret=<YOUR_CLIENT_SECRET>\n"})}),"\n",(0,s.jsx)(t.p,{children:"or,"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"grant_type=client_credentials"})}),"\n",(0,s.jsxs)(t.p,{children:["and then include an Authorization header with the Client ID and Client Secret encoded as Basic auth credentials: ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Basic_access_authentication",children:"https://en.wikipedia.org/wiki/Basic_access_authentication"})]}),"\n",(0,s.jsx)(t.p,{children:"The response will contain an Access Token."}),"\n",(0,s.jsx)(t.p,{children:"Either way, you can then use that Access Token as a Bearer token for subsequent EDNAR requests, without needing to include a token in the cookie or an X-XSRF-Token header. You are now logged in as an API Client!"}),"\n",(0,s.jsxs)(t.p,{children:["The token will expire at some point, so you'll need to repeat the request to /api/token every time it expires. If you'd rather refresh the token using a refresh token, you can use the more complex OAuth2 Authorization Code flow described here: ",(0,s.jsx)(t.a,{href:"https://datatracker.ietf.org/doc/html/rfc6749#section-1.3.1",children:"https://datatracker.ietf.org/doc/html/rfc6749#section-1.3.1"})," with /api/authorize as the Authorization Code endpoint and /api/token as the Access Token endpoint."]})]})}function h(e={}){let{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},32013:function(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/APIClients1-c95396c85ba06f907a38a061b0c0d310.png"},50390:function(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/APIClients2-565f99117032fad5d26b79efb342be75.png"},46719:function(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/APIClients3-60b2f61e4ca8f2bf8a3e29878bb8b56d.png"},95392:function(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/APIClients4-f4dc7e840fd6c2392e69b5a66517706d.png"},66569:function(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/APIClients5-9fd327dc20dc73c70e5cea21e0da9c3a.png"},75858:function(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/APIClients6-bf8e8e1aa5a99fb92b8e26d01d72075b.png"},73723:function(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/APIClients7-c14537559ed471ef943e92a5b9d62f45.png"},19564:function(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/APIClients8-afc0dcae858e8094e13b062848dc6b3f.png"},5013:function(e,t,n){n.d(t,{A:()=>i});let i=n.p+"assets/images/APIClients9-b7695c2032dbad23d1b31f5adbede591.png"},28453:function(e,t,n){n.d(t,{R:()=>r,x:()=>o});var i=n(96540);let s={},a=i.createContext(s);function r(e){let t=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);