(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{81:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return p}));var n=a(3),r=a(7),o=(a(0),a(98)),i={id:"ednar-api-server-configuration",title:"EDNAR API Server Configuration",slug:"/ednar-api-server-configuration"},c={unversionedId:"ednar-api-server-configuration",id:"ednar-api-server-configuration",isDocsHomePage:!1,title:"EDNAR API Server Configuration",description:"This page describes how to configure and run the EDNAR WEB API Server.",source:"@site/docs\\ednar-api-server-configuration.md",slug:"/ednar-api-server-configuration",permalink:"/ednar/docs/admin/ednar-api-server-configuration",editUrl:"https://github.com/zepben/docs/ednar-api-server-configuration.md",version:"current",sidebar:"sidebar",previous:{title:"EDNAR API Server",permalink:"/ednar/docs/admin/ednar-api-server"},next:{title:"EDNAR Content Server",permalink:"/ednar/docs/admin/ednar-content-server"}},s=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Configuration",id:"configuration",children:[]},{value:"Run",id:"run",children:[]}],l={toc:s};function p(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.a)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(o.a)("p",null,"This page describes how to configure and run the EDNAR WEB API Server."),Object(o.a)("hr",null),Object(o.a)("h2",{id:"prerequisites"},"Prerequisites"),Object(o.a)("ul",null,Object(o.a)("li",{parentName:"ul"},"Java 11"),Object(o.a)("li",{parentName:"ul"},"If using Oracle, a user already created with permissions to create schema objects and run various DDL statements.")),Object(o.a)("hr",null),Object(o.a)("h2",{id:"configuration"},"Configuration"),Object(o.a)("blockquote",null,Object(o.a)("p",{parentName:"blockquote"},"Configuration for the EDNAR server is specified in a JSON file.")),Object(o.a)("table",null,Object(o.a)("thead",{parentName:"table"},Object(o.a)("tr",{parentName:"thead"},Object(o.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Key"),Object(o.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(o.a)("tbody",{parentName:"table"},Object(o.a)("tr",{parentName:"tbody"},Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.a)("inlineCode",{parentName:"td"},"auth")),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object holding authentication config \\ Refer to ",Object(o.a)("a",Object(n.a)({parentName:"td"},{href:"#auth-config"}),Object(o.a)("strong",{parentName:"a"},"auth options"))," below.")),Object(o.a)("tr",{parentName:"tbody"},Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.a)("inlineCode",{parentName:"td"},"database")),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object holding database config \\ Refer to ",Object(o.a)("a",Object(n.a)({parentName:"td"},{href:"#database-config"}),Object(o.a)("strong",{parentName:"a"},"database options"))," below.")),Object(o.a)("tr",{parentName:"tbody"},Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.a)("inlineCode",{parentName:"td"},"dms")),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object holding DMS config \\ Refer to ",Object(o.a)("a",Object(n.a)({parentName:"td"},{href:"#dms-config"}),Object(o.a)("strong",{parentName:"a"},"dms options"))," below.")),Object(o.a)("tr",{parentName:"tbody"},Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.a)("inlineCode",{parentName:"td"},"ewb")),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object holding EWB config \\ Refer to ",Object(o.a)("a",Object(n.a)({parentName:"td"},{href:"#ewb-config"}),Object(o.a)("strong",{parentName:"a"},"ewb options"))," below.")),Object(o.a)("tr",{parentName:"tbody"},Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.a)("inlineCode",{parentName:"td"},"http")),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object holding HTTP config. <\\ Refer to ",Object(o.a)("a",Object(n.a)({parentName:"td"},{href:"#http-config"}),Object(o.a)("strong",{parentName:"a"},"http options"))," below.")),Object(o.a)("tr",{parentName:"tbody"},Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.a)("inlineCode",{parentName:"td"},"pon")),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object holding PoN config \\ Refer to ",Object(o.a)("a",Object(n.a)({parentName:"td"},{href:"#pon-config"}),Object(o.a)("strong",{parentName:"a"},"pon options"))," below.")),Object(o.a)("tr",{parentName:"tbody"},Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.a)("inlineCode",{parentName:"td"},"smtp")),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object holding SMTP config \\ Refer to ",Object(o.a)("a",Object(n.a)({parentName:"td"},{href:"#smtp-config"}),Object(o.a)("strong",{parentName:"a"},"smtp options"))," below.")),Object(o.a)("tr",{parentName:"tbody"},Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.a)("inlineCode",{parentName:"td"},"reports")),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"Object holding report config \\ Refer to ",Object(o.a)("a",Object(n.a)({parentName:"td"},{href:"#reports-config"}),Object(o.a)("strong",{parentName:"a"},"report options"))," below.")))),Object(o.a)("h6",{id:"auth-config"},"Auth Config"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{}),"| Option                 | Description                                                         | Required | Default |\n| ---------------------- | ------------------------------------------------------------------- | -------- | ------- |\n| `type`                 | The type of config. Currently only the value `Layer7` is supported. | Yes      |         |\n| `loginUrl`             | The Layer7 endpoint url for login.                                  | Yes      |         |\n| `validateUrl`          | The Layer7 endpoint url for validating a token.                     | No       |         |\n| `verifyHost`           | Flag for host verification for https connections on above URLs      | No       | true    |\n| `trustAllCertificates` | Flag to trust all https certificates for above URLs                 | No       | false   |\n")),Object(o.a)("h6",{id:"database-config"},"Database Config"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{}),"|  Option  |               Description               | Required | Default |\n| :------: | :-------------------------------------: | :------: | :-----: |\n| `driver` |          The JDBC driver class          |   Yes    |         |\n|  `url`   |       The JDBC connection string        |   Yes    |         |\n|  `user`  |   The user to connect to the database   |    No    |         |\n|  `pass`  | The password to connect to the database |    No    |         |\n")),Object(o.a)("h6",{id:"dms-config"},"DMS Config"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{}),"|        Option         |                                    Description                                     | Required | Default |\n| :-------------------: | :--------------------------------------------------------------------------------: | :------: | :-----: |\n|         `url`         |        The SOAP endpoint of PowerOn Fusion listening for WPM SOAP messages.        |   Yes    |         |\n|   `connectTimeout`    | The timeout in ms before the SOAP client deems it failed to connect to the server. |    No    |  10000  |\n|     `readTimeout`     |    The timeout in ms before the SOAP client deems the server failed to respond.    |    No    |  10000  |\n|    `listenerPort`     |         The port the EDNAR will listen on for outbound WPM SOAP messages.          |   Yes    |         |\n|    `listenerPath`     |               The path EDNAR will accept outbound WPM SOAP messages.               |   Yes    |         |\n| `listenerLogRequests` |               Boolean flag that will enable SOAP request access log.               |    No    |  false  |\n")),Object(o.a)("h6",{id:"ewb-config"},"EWB Config"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{}),"|   Option   |                    Description                     | Required | Default |\n| :--------: | :------------------------------------------------: | :------: | :-----: |\n|   `host`   |          The host name of the EWB server.          |   Yes    |         |\n|   `port`   |      The port the EWB server is listening on.      |   Yes    |         |\n| `basePath` | A path that will be prepended to all calls to EWB. |   Yes    |         |\n")),Object(o.a)("h6",{id:"http-config"},"HTTP Config"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{}),'|        Option        | Description                                                                                                                                             | Required |  Default  |\n| :------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------- | :------: | :-------: |\n|        `port`        | The port for the server to listen on.                                                                                                                   |   Yes    |           |\n|      `webroot`       | The path to the directory holding the application static assets.                                                                                        |   Yes    | `webroot` |\n| `staticAssetCaching` | Will cache static assets in memory if set to `true`. This improves performance but means that the server needs to be restarted if static assets change. |    No    |  `true`   |\n|       `https`        | Enables https by specifying the certificate type. Supported types: `pem`.                                                                               |    No    |           |\n|      `certPath`      | The file path the the https certificate when https is `pem`.                                                                                            |    No    |           |\n|      `keyPath`       | The file path the the private key file when https is `pem`.                                                                                             |    No    |           |\n|     `csrfSecret`     | Secret used to generate crytographically secure CSRF tokens.                                                                                            |   Yes    |           |\n|     `protocols`     | List of transport security protocols to enable. Valid values are "TLSv1.1", "TLSv1.2".                                                                   |   No    | `["TLSv1.2"]` |\n|    `logRequests`     | Logs all http requests to the log when set to `true`.                                                                                                   |    No    |  `false`  |\n|    `apiOnly`     | Disables serving of static assets and only enables API routes.                                                                                              |    No    |  `false`  |\n')),Object(o.a)("h6",{id:"pon-config"},"PoN Config"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{}),"| Option |               Description                | Required | Default |\n| :----: | :--------------------------------------: | :------: | :-----: |\n| `host` |     The host name of the PoN server.     |   Yes    |         |\n| `port` | The port the PoN server is listening on. |   Yes    |         |\n")),Object(o.a)("h6",{id:"smtp-config"},"SMTP Config"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{}),"| Option |                Description                 | Required | Default |\n| :----: | :----------------------------------------: | :------: | :-----: |\n| `host` |     The host name of the SMTP server.      |   Yes    |         |\n| `port` | The port the SMTP server is listening on.  |   Yes    |         |\n| `user` |   The user to connect to the SMTP server   |    No    |         |\n| `pass` | The password to connect to the SMTP server |    No    |         |\n")),Object(o.a)("h6",{id:"reports-config"},"Reports Config"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{}),"|      Option       |                        Description                         | Required | Default |\n| :---------------: | :--------------------------------------------------------: | :------: | :-----: |\n| `narReportPdfUrl` | The report server endpoint url for getting the nar report pdf. |   Yes    |         |\n| `narHandCardPdfUrl` | The report server endpoint url for getting the nar hand card pdf. |   Yes    |         |\n")),Object(o.a)("p",null,"If any paths in the configuration are given as relative paths, they will be relative to the current working directory."),Object(o.a)("h4",{id:"sample-configuration-file"},"Sample Configuration File"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "http": {\n    "port": 443,\n    "webroot": "./webroot",\n    "https": "pem",\n    "certPath": "/path/to/the/cert.pem",\n    "keyPath": "/path/to/the/key.pem",\n    "logRequests": true\n  },\n\n  "database": {\n    "driver": "oracle.jdbc.driver.OracleDriver",\n    "url": "jdbc:oracle:thin:@localhost:1521:xe",\n    "user": "ednar",\n    "pass": "Password1"\n  },\n\n  "auth": {\n    "type": "Layer7",\n    "loginUrl": "https://my-layer7.invalid/sso/jwt/login/ednar",\n    "validateUrl": "https://my-layer7.invalid/sso/jwt/login-validation/ednar"\n  },\n\n  "smtp": {\n    "host": "smtp.myhost.invalid",\n    "port": 25,\n    "user": "username",\n    "pass": "password"\n  },\n\n  "dms": {\n    "url": "http://pof-server/enmac/SOAP"\n  },\n\n  "ewb": {\n    "port": 9000,\n    "host": "my-ewb-server",\n    "basePath": "/ewb"\n  },\n\n  "pon": {\n    "port": 80,\n    "host": "my-pon-server"\n  },\n\n  "reports": {\n    "narReportPdfUrl": "http://report-server/report",\n    "narHandCardPdfUrl": "http://report-server/hand-card"\n  }\n}\n')),Object(o.a)("hr",null),Object(o.a)("h2",{id:"run"},"Run"),Object(o.a)("h5",{id:"command-line-arguments"},"Command Line Arguments"),Object(o.a)("table",null,Object(o.a)("thead",{parentName:"table"},Object(o.a)("tr",{parentName:"thead"},Object(o.a)("th",Object(n.a)({parentName:"tr"},{align:"center"}),"Flag"),Object(o.a)("th",Object(n.a)({parentName:"tr"},{align:"center"}),"Valid Values"),Object(o.a)("th",Object(n.a)({parentName:"tr"},{align:"center"}),"Required"),Object(o.a)("th",Object(n.a)({parentName:"tr"},{align:"center"}),"Default"))),Object(o.a)("tbody",{parentName:"table"},Object(o.a)("tr",{parentName:"tbody"},Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:"center"}),Object(o.a)("strong",{parentName:"td"},"-conf")),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:"center"}),"Path to the configuration file"),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:"center"}),"Yes"),Object(o.a)("td",Object(n.a)({parentName:"tr"},{align:"center"}))))),Object(o.a)("p",null,"To run the server, execute the following command at a terminal:"),Object(o.a)("pre",null,Object(o.a)("code",Object(n.a)({parentName:"pre"},{}),"java -jar <path to ednar jar> -c <path to config file>\n")))}p.isMDXComponent=!0},98:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),p=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):c({},t,{},e)),a},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=p(a),u=n,O=d["".concat(i,".").concat(u)]||d[u]||b[u]||o;return a?r.a.createElement(O,c({ref:t},l,{components:a})):r.a.createElement(O,c({ref:t},l))}));function u(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var l=2;l<o;l++)i[l]=a[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);