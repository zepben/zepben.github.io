(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{110:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return o})),a.d(t,"default",(function(){return d}));var n=a(3),r=a(7),l=(a(0),a(141)),i={id:"templates",title:"Templates",slug:"/templates"},c={unversionedId:"templates",id:"templates",isDocsHomePage:!1,title:"Templates",description:"Configuring Templates",source:"@site/docs\\templates.md",slug:"/templates",permalink:"/ednar/docs/admin/next/templates",editUrl:"https://github.com/zepben/docs/templates.md",version:"current",sidebar:"sidebar",previous:{title:"Criteria",permalink:"/ednar/docs/admin/next/criteria"},next:{title:"Target Groups",permalink:"/ednar/docs/admin/next/target-groups"}},o=[{value:"Configuring Templates",id:"configuring-templates",children:[]},{value:"Email Template Tags",id:"email-template-tags",children:[{value:"NAR Tags",id:"nar-tags",children:[]},{value:"Users",id:"users",children:[]},{value:"Tag Usage",id:"tag-usage",children:[]}]}],b={toc:o};function d(e){var t=e.components,i=Object(r.a)(e,["components"]);return Object(l.a)("wrapper",Object(n.a)({},b,i,{components:t,mdxType:"MDXLayout"}),Object(l.a)("h2",{id:"configuring-templates"},"Configuring Templates"),Object(l.a)("p",null,"Notification templates can be viewed using the admin app by navigating to the ",Object(l.a)("inlineCode",{parentName:"p"},"Configuration -> Notification Management -> Templates")," page from the top menu."),Object(l.a)("p",null,Object(l.a)("img",{alt:"Templates",src:a(188).default})),Object(l.a)("p",null,"A new template can be created by using the ",Object(l.a)("inlineCode",{parentName:"p"},"Create Template")," button on the top right next to the search control."),Object(l.a)("p",null,Object(l.a)("img",{alt:"Creating template",src:a(189).default})),Object(l.a)("p",null,"A template needs the following : "),Object(l.a)("ol",null,Object(l.a)("li",{parentName:"ol"},Object(l.a)("inlineCode",{parentName:"li"},"NAR Action")," - An action from a predefined set of triggers on which the notification needs to be sent."),Object(l.a)("li",{parentName:"ol"},Object(l.a)("inlineCode",{parentName:"li"},"Access Type")," - (Optional) Determines which Access Type this notification template will apply to. If left blank the template will apply to NARs of all Access Types."),Object(l.a)("li",{parentName:"ol"},Object(l.a)("inlineCode",{parentName:"li"},"Target Group")," - A target group from a preconfigured set of target groups. For configuring target groups refer to ",Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"./config-schema#notification-target-groups"}),"target groups config"),"."),Object(l.a)("li",{parentName:"ol"},Object(l.a)("inlineCode",{parentName:"li"},"Notification Type")," - Method to notify target group. "),Object(l.a)("li",{parentName:"ol"},Object(l.a)("inlineCode",{parentName:"li"},"Criteria")," - Criteria under which notification needs to be sent. For configuring criteria refer to ",Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"./criteria"}),"configuring criteria"),"."),Object(l.a)("li",{parentName:"ol"},Object(l.a)("inlineCode",{parentName:"li"},"Subject")," - Notification subject."),Object(l.a)("li",{parentName:"ol"},Object(l.a)("inlineCode",{parentName:"li"},"isHtml")," - Whether the notification body is an ",Object(l.a)("inlineCode",{parentName:"li"},"html")," block."),Object(l.a)("li",{parentName:"ol"},Object(l.a)("inlineCode",{parentName:"li"},"Body")," - Notification body which can either be plain text or an ",Object(l.a)("inlineCode",{parentName:"li"},"html")," block. See ",Object(l.a)("a",Object(n.a)({parentName:"li"},{href:"#email-template-tags"}),"Email Template Tags")," below for details on this HTML.   ")),Object(l.a)("p",null,"After creating the template click on the ",Object(l.a)("inlineCode",{parentName:"p"},"Save")," button on the top right to save it."),Object(l.a)("h2",{id:"email-template-tags"},"Email Template Tags"),Object(l.a)("p",null,"When creating HTML email templates, special tags can be used to insert data from NARs into both the email subject line and email body. These tags are identified in the code by surrounding them with 3 pairs of braces: ",Object(l.a)("inlineCode",{parentName:"p"},"{{{tag}}}"),"."),Object(l.a)("p",null,"Included below is a list of available tags and their descriptions. More information and examples on the use of these tags is included underneath."),Object(l.a)("h3",{id:"nar-tags"},"NAR Tags"),Object(l.a)("table",null,Object(l.a)("thead",{parentName:"table"},Object(l.a)("tr",{parentName:"thead"},Object(l.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Prefix"),Object(l.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Tag"),Object(l.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(l.a)("tbody",{parentName:"table"},Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"id")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"state")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The state of the NAR. This refers to the new state of the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"startDateTime")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The start date and time of the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"endDateTime")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The end date and time of the NAR")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"jobType")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The Job Type (or Switching Type) of the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"accessType")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The Access Type of the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"planningArea")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The Planning Area of the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"controlDesk")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The Control Desk of the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"primaryFeeder")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The Primary Feeder listed on the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"location")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The location of the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"workType")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The work type listed on the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"dmsId")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The ID of the DMS job associated with the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"url")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"ednar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The base URL of EDNAR as configured in the ",Object(l.a)("a",Object(n.a)({parentName:"td"},{href:"./app-options"}),"App Options"),".")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"url")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The URL of the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"url")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"narReport")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The base URL of the NAR Report PDF print-out. Note that you will need to include the URL report parameters as well (see example below).")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null})),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"actionComment")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The comment left when the triggering action was performed (if available).")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null})),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"actionReasons")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The reason provided when the triggering action was performed (if available).")))),Object(l.a)("h3",{id:"users"},"Users"),Object(l.a)("p",null,"These tags each reference a specific user (or users) related to the NAR. The user details that can be accessed with each tag are the same, and are included underneath."),Object(l.a)("table",null,Object(l.a)("thead",{parentName:"table"},Object(l.a)("tr",{parentName:"thead"},Object(l.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"User Tag"),Object(l.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(l.a)("tbody",{parentName:"table"},Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"nar.planners")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The user(s) that are assigned as Planners on the NAR. This tag will return details for each Planner user assigned on the NAR.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"recipient")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The user that is receiving the email. If the email is sent to multiple people, these details will be specific to each recipient.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"actionUser")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The user that performed the action that triggered the notification.")))),Object(l.a)("h4",{id:"user-details-tags"},"User Details tags"),Object(l.a)("p",null,"These tags can be used for each of the above user types."),Object(l.a)("table",null,Object(l.a)("thead",{parentName:"table"},Object(l.a)("tr",{parentName:"thead"},Object(l.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Tag"),Object(l.a)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(l.a)("tbody",{parentName:"table"},Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"firstName")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The first name of the user.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"lastName")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The last name of the user.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"email")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The email address of the user.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"mobile")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The mobile number of the user.")),Object(l.a)("tr",{parentName:"tbody"},Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(l.a)("inlineCode",{parentName:"td"},"phone")),Object(l.a)("td",Object(n.a)({parentName:"tr"},{align:null}),"The phone number of the user.")))),Object(l.a)("h3",{id:"tag-usage"},"Tag Usage"),Object(l.a)("p",null,"There are two main ways in which the tags can be used in the HTML templates. The first is by using the format ",Object(l.a)("inlineCode",{parentName:"p"},"{{{prefix.tag}}}"),". "),Object(l.a)("p",null,"The second is with opening and closing tags, with the value tags included between. When using this method, only 2 braces are required around the opening and closing tags. ",Object(l.a)("br",null),"\nThe format for this is: ",Object(l.a)("inlineCode",{parentName:"p"},"{{#openingTag}} {{{tag}}} {{{anotherTag}}} {{/closingTag}}"),". This is useful where there are multiple fields required from the same source."),Object(l.a)("h4",{id:"example-template"},"Example Template"),Object(l.a)("pre",null,Object(l.a)("code",Object(n.a)({parentName:"pre"},{className:"language-html"}),'<table style="width: 601px;">\n<tbody>\n<tr>\n<td colspan="2"><strong>{{{nar.primaryFeeder}}} : {{{nar.location}}} : {{{nar.workType}}}</strong></td>\n</tr>\n<tr>\n<td><strong>From:</strong></td>\n<td>{{{nar.startDateTime}}}</td>\n</tr>\n<tr>\n<td><strong>To:</strong></td>\n<td>{{{nar.endDateTime}}}</td>\n</tr>\n</tbody>\n</table>\n<h2><span><strong>NAR {{{nar.id}}} has been {{{nar.state}}}</strong></span></h2>\n<table style="width: 450px;">\n<tbody>\n<tr>\n<td colspan="2"><strong>{{{nar.state}}} by: </strong> {{#actionUser}}{{{firstName}}} {{{lastName}}}{{/actionUser}}</td>\n</tr>\n<tr>\n<td><strong>Email:</strong></td>\n<td>{{#actionUser}}{{{email}}}{{/actionUser}}</td>\n</tr>\n<tr>\n<td><strong>Phone:</strong></td>\n<td>{{#actionUser}}{{{phone}}}{{/actionUser}}</td>\n</tr>\n<tr>\n<td><strong>Mobile:</strong></td>\n<td>{{#actionUser}}{{{mobile}}}{{/actionUser}}</td>\n</tr>\n</tbody>\n</table>\n<table style="width: 595px;">\n<tbody>\n<tr>\n<td><br /><strong>{{#recipient}}{{{firstName}}} {{{lastName}}}{{/recipient}}</strong>, you are receiving this email because you have been assigned as an <strong>Authorised Applicant</strong> in this Network Access Request.</td>\n</tr>\n<tr>\n<td>For any queries please contact the<strong> {{{nar.planningArea}}}</strong> planning area.</td>\n</tr>\n</tbody>\n</table>\n<table style="width: 444px;">\n<tbody>\n<tr>\n<td><br />View NAR:</td>\n<td><br /><a href="{{{url.nar}}}" target="_blank" rel="noopener">NAR {{{nar.id}}}</a></td>\n</tr>\n<tr>\n<td>NAR PDF:</td>\n<td><a href="{{{url.narReport}}}?includeFile=CUSTOMER_LISTS&includeFile=CHECKED_ATTACHMENTS&includeFile=NAR_SUMMARY&includeFile=SWITCHING_SCHEDULE">NAR {{{nar.id}}} PDF</a></td>\n</tr>\n</tbody>\n</table>\n<p>This Email has been generated automatically. <br />Please do not reply to this email.<br />Emails sent to this address cannot be answered.</p>\n       \n\n')),Object(l.a)("p",null,"The above template when sent as an email:"),Object(l.a)("p",null,Object(l.a)("img",{alt:"Email",src:a(190).default})))}d.isMDXComponent=!0},141:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(0),r=a.n(n);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var b=r.a.createContext({}),d=function(e){var t=r.a.useContext(b),a=t;return e&&(a="function"==typeof e?e(t):c({},t,{},e)),a},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},s=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,i=e.parentName,b=o(e,["components","mdxType","originalType","parentName"]),s=d(a),m=n,O=s["".concat(i,".").concat(m)]||s[m]||p[m]||l;return a?r.a.createElement(O,c({ref:t},b,{components:a})):r.a.createElement(O,c({ref:t},b))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,i=new Array(l);i[0]=s;var c={};for(var o in t)hasOwnProperty.call(t,o)&&(c[o]=t[o]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var b=2;b<l;b++)i[b]=a[b];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}s.displayName="MDXCreateElement"},188:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/templates-4dd7e633ba3ad57468586332b1ee0d09.png"},189:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/new-template-57f19957bd6d2de85c0ce2a9071f4dd3.png"},190:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/email-f768627d58ba47ad7856185983afd898.png"}}]);